{"version":3,"sources":["ui-bootstrap-tpls.js","angular-ui-router.js","angular-resource.js","angular-jwt.js","angular-slugify.js","ng-flow-standalone.js","angular-sortable-view.js"],"names":["angular","module","directive","$animate","link","scope","element","attrs","expand","removeClass","addClass","to","height","scrollHeight","then","expandDone","css","collapse","collapseDone","$watch","shouldCollapse","constant","closeOthers","controller","$scope","$attrs","accordionConfig","this","groups","openGroup","isDefined","$eval","forEach","group","isOpen","addGroup","groupScope","that","push","$on","event","removeGroup","index","indexOf","splice","restrict","transclude","replace","templateUrl","require","heading","isDisabled","setHeading","accordionCtrl","value","toggleOpen","template","attr","accordionGroupCtrl","noop","accordionTransclude","html","append","closeable","close","type","$timeout","alertCtrl","parseInt","dismissOnTimeout","data","bindHtmlUnsafe","activeClass","toggleEvent","buttonConfig","ctrls","buttonsCtrl","ngModelCtrl","$render","toggleClass","equals","$modelValue","btnRadio","bind","isActive","hasClass","uncheckable","$apply","$setViewValue","getTrueValue","getCheckboxValue","btnCheckboxTrue","getFalseValue","btnCheckboxFalse","attributeValue","defaultValue","val","$interval","getSlideByIndex","isUndefined","slides","i","length","restartTimer","resetTimer","interval","isNaN","currentInterval","timerFn","cancel","isPlaying","next","pause","self","currentIndex","currentSlide","destroyed","select","nextSlide","direction","goNext","extend","active","enabled","noTransition","$element","$currentTransition","one","nextIndex","indexOfSlide","undefined","getCurrentIndex","slide","newIndex","prev","play","noPause","addSlide","removeSlide","sort","a","b","carouselCtrl","animation","beforeAddClass","className","done","parent","stopped","isolateScope","directionClass","beforeRemoveClass","service","$locale","orderByFilter","createParser","format","map","regex","split","formatCodeToRegex","code","n","join","apply","RegExp","isValid","year","month","date","SPECIAL_CHARACTERS_REGEXP","parsers","yyyy","yy","y","MMMM","DATETIME_FORMATS","MONTH","MMM","SHORTMONTH","MM","M","dd","d","EEEE","DAY","EEE","SHORTDAY","HH","hours","H","mm","minutes","m","sss","milliseconds","ss","seconds","s","parse","input","baseDate","isString","parser","results","match","fields","dt","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","mapper","call","Date","factory","$document","$window","getStyle","el","cssprop","currentStyle","getComputedStyle","style","isStaticPositioned","parentOffsetEl","docDomEl","offsetParent","position","elBCR","offset","offsetParentBCR","top","left","offsetParentEl","clientTop","scrollTop","clientLeft","scrollLeft","boundingClientRect","getBoundingClientRect","width","prop","pageYOffset","documentElement","pageXOffset","positionElements","hostEl","targetEl","positionStr","appendToBody","hostElPos","targetElWidth","targetElHeight","targetElPos","positionStrParts","pos0","pos1","shiftWidth","center","right","shiftHeight","bottom","formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","datepickerMode","minMode","maxMode","showWeeks","startingDay","yearRange","minDate","maxDate","shortcutPropagation","$parse","$interpolate","$log","dateFilter","datepickerConfig","modes","key","$parent","refreshView","uniqueId","$id","Math","floor","random","initDate","activeDate","$isEmpty","$invalid","dateObject","compare","activeDateId","uid","init","ngModelCtrl_","render","$viewValue","error","$setValidity","_refreshView","createDateObject","model","label","selected","disabled","current","customClass","dateDisabled","mode","arr","size","arrays","setFullYear","move","step","years","months","toggleMode","keys",13,32,33,34,35,36,37,38,39,40,"focusElement","focus","keydown","evt","which","shiftKey","altKey","preventDefault","stopPropagation","ctrlKey","handleKeyDown","datepickerCtrl","ctrl","getDaysInMonth","DAYS_IN_MONTH","getDates","startDate","dates","Array","setHours","setDate","getISO8601WeekNumber","checkDate","getDay","time","getTime","setMonth","round","firstDayOfMonth","difference","numDisplayedFromPreviousMonth","firstDate","days","secondary","labels","j","abbr","full","title","rows","weekNumbers","thursdayIndex","numWeeks","curWeek","date1","date2","min","getStartingYear","range","start","datepickerPopup","html5Types","datetime-local","currentText","clearText","closeText","closeOnDateSelection","showButtonBar","$compile","$position","dateParser","datepickerPopupConfig","ngModel","cameltoDash","string","$1","toLowerCase","parseDate","viewValue","isNumber","isDate","dateFormat","validator","modelValue","datepickerAppendToBody","getText","isHtml5DateInput","$observe","oldValue","newDateFormat","Error","popupEl","ng-model","ng-change","datepickerEl","children","datepickerOptions","options","option","watchData","getAttribute","setAttribute","assign","oldvalue","$formatters","$$parserName","$validators","$parsers","unshift","dateSelection","$viewChangeListeners","documentClickBind","target","noApply","$broadcast","unbind","today","$popup","remove","find","after","openClass","$rootScope","openScope","open","dropdownScope","closeDropdown","escapeKeyBind","getAutoClose","toggleElement","getToggleElement","contains","getElement","$$phase","focusToggleElement","dropdownConfig","dropdownService","getIsOpen","$new","setIsOpen","toggleInvoker","onToggle","dropdownAppendToBody","dropdownMenu","on","toggle","arguments","autoClose","wasOpen","pos","display","$destroy","dropdownCtrl","toggleDropdown","aria-haspopup","aria-expanded","createNew","stack","add","get","idx","removeTop","linkFn","animate","compile","tElement","tAttrs","backdropClass","$modalStack","$q","windowClass","modal","getTop","backdrop","currentTarget","dismiss","$isRendered","modalRenderDeferObj","defer","resolve","promise","inputsWithAutofocus","querySelectorAll","modalRendered","modalAnimation","modalAnimationClass","$transclude","clone","empty","$$stackedMap","backdropIndex","topBackdropIndex","opened","openedWindows","removeModalWindow","modalInstance","body","eq","modalWindow","removeAfterAnimate","modalDomEl","modalScope","OPENED_MODAL_CLASS","checkRemoveBackdrop","backdropDomEl","backdropScopeRef","backdropScope","domEl","afterAnimating","$evalAsync","broadcastClosing","resultOrReason","closing","defaultPrevented","newBackdropIndex","keyboard","modalOpener","activeElement","deferred","renderDeferred","currBackdropIndex","angularBackgroundDomEl","angularDomEl","template-url","windowTemplateUrl","window-class","content","result","reason","reject","dismissAll","topModal","provider","$modalProvider","$get","$injector","$templateRequest","$controller","getTemplatePromise","when","isFunction","getResolvePromises","resolves","promisesArr","isArray","invoke","$modal","modalOptions","modalResultDeferred","modalOpenedDeferred","modalRenderDeferred","rendered","templateAndResolvePromise","all","concat","tplAndVars","$close","$dismiss","ctrlInstance","ctrlLocals","resolveIter","$modalInstance","controllerAs","setNumPages","numPages","config","itemsPerPage","totalPages","calculateTotalPages","page","selectPage","ceil","totalItems","max","blur","noPrevious","noNext","boundaryLinks","directionLinks","firstText","previousText","nextText","lastText","rotate","paginationConfig","makePage","number","text","getPages","currentPage","pages","startPage","endPage","isMaxSized","maxSize","previousPageSet","nextPageSet","paginationCtrl","originalRender","align","pagerConfig","snake_case","name","regexp","separator","letter","defaultOptions","placement","popupDelay","useContentExp","triggerMap","mouseenter","click","globalOptions","setTriggers","triggers","prefix","defaultTriggerShow","getTriggers","trigger","show","hide","directiveName","startSym","startSymbol","endSym","endSymbol","tElem","tooltipLinker","tooltipCtrl","toggleTooltipBind","ttScope","hideTooltipBind","showTooltipBind","hasEnableExp","prepareTooltip","popupTimeout","reposition","transitionTimeout","contentExp","createTooltip","tooltip","$digest","positionTooltip","removeTooltip","tooltipLinkedScope","prepPopupClass","prepPlacement","prepPopupDelay","popupClass","delay","prepTriggers","unregisterTriggers","ttPosition","origScope","appendToBodyVal","$sce","elem","currentScope","previousElement","currentElement","tooltipTemplateTranscludeScope","changeCounter","cleanupLastIncludeContent","leave","parseAsResourceUrl","tooltipTemplateTransclude","src","thisChangeId","response","newScope","enter","$emit","tooltipAnimationClass","$tooltip","originScope","tooltipHtmlUnsafeSuppressDeprecated","warn","progressConfig","bars","addBar","bar","transition","percent","toFixed","removeBar","progressCtrl","stateOn","stateOff","ratingConfig","ratingStates","buildTemplateObjects","states","rate","readonly","onHover","reset","onLeave","onKeydown","test","ratingCtrl","tabs","selectedTab","tab","onDeselect","onSelect","addTab","removeTab","newActiveIndex","vertical","justified","elm","tabsetCtrl","disable","$transcludeFn","tabCtrl","isTabHeading","node","tagName","hasAttribute","tabContentTransclude","contents","headingElement","hourStep","minuteStep","showMeridian","meridians","readonlyInput","mousewheel","arrowkeys","timepickerConfig","getHoursFromTemplate","valid","meridian","getMinutesFromTemplate","pad","toString","refresh","keyboardChange","makeValid","updateTemplate","invalidHours","invalidMinutes","addMinutes","AMPMS","inputs","hoursInputEl","minutesInputEl","setupMousewheelEvents","setupArrowkeyEvents","setupInputEvents","$error","isScrollingUp","e","originalEvent","delta","wheelDelta","deltaY","detail","incrementHours","decrementHours","incrementMinutes","decrementMinutes","updateHours","updateMinutes","invalidate","setMinutes","toggleMeridian","timepickerCtrl","$transitionSuppressDeprecated","findEndEventName","endEventNames","transElement","$transition","endEventName","transitionEndHandler","isObject","document","createElement","transitionEndEventNames","WebkitTransition","MozTransition","OTransition","animationEndEventNames","transitionEndEventName","animationEndEventName","TYPEAHEAD_REGEXP","itemName","source","viewMapper","modelMapper","typeaheadParser","HOT_KEYS","originalScope","modelCtrl","hasFocus","minSearch","typeaheadMinLength","waitTime","typeaheadWaitMs","isEditable","typeaheadEditable","isLoadingSetter","typeaheadLoading","onSelectCallback","typeaheadOnSelect","inputFormatter","typeaheadInputFormatter","typeaheadAppendToBody","focusFirst","typeaheadFocusFirst","$setModelValue","parserResult","typeahead","popupId","aria-autocomplete","aria-owns","popUpEl","id","matches","query","typeaheadTemplateUrl","resetMatches","activeIdx","getMatchId","removeAttr","getMatchesAsync","inputValue","locals","onCurrentRequest","timeoutPromise","scheduleSearchWithTimeout","cancelPreviousTimeout","candidateViewValue","emptyViewValue","$model","item","$item","$label","dismissClickHandler","matchIdx","selectActive","selectMatch","tplUrl","tplContent","trim","clonedElement","replaceWith","filter","escapeRegexp","queryToEscape","matchItem","run","$templateCache","put","$$csp","prepend","exports","window","inherit","extra","prototype","merge","dst","obj","hasOwnProperty","ancestors","first","second","path","objectKeys","object","Object","array","Number","len","from","inheritParams","currentParams","newParams","$current","$to","parentParams","parents","inherited","inheritList","params","equalForKeys","k","filterByKeys","values","filtered","pick","copy","slice","omit","collection","callback","$Resolve","VISIT_IN_PROGRESS","VISIT_DONE","NOTHING","NO_DEPENDENCIES","NO_LOCALS","NO_PARENT","$$promises","$$values","study","invocables","visit","visited","cycle","plan","annotate","param","pop","isResolve","invocableKeys","wait","merged","$$inheritedValues","resolution","fail","$$failure","invocable","onfailure","invocation","proceed","waitParams","dep","promises","ii","$TemplateFactory","$http","fromConfig","fromString","fromUrl","templateProvider","fromProvider","url","cache","headers","Accept","UrlMatcher","pattern","parentMatcher","addParameter","location","paramNames","$$UMFP","Param","quoteRegExp","squash","optional","surroundPattern","matchDetails","isSearch","segment","cfg","substring","last","caseInsensitive","placeholder","searchPlaceholder","compiled","segments","$$new","ParamSet","p","exec","isOptional","lastIndex","search","sourceSearch","sourcePath","strict","$$paramNames","Type","$UrlMatcherFactory","valToString","valFromString","getDefaultConfig","isStrictMode","isCaseInsensitive","isInjectable","flushTypeQueue","typeQueue","shift","$types","injector","def","defaultSquashPolicy","enqueue","defaultTypes","encode","decode","is","int","bool","capture","valueOf","toISOString","json","toJson","fromJson","any","identity","$$getDefaultValue","strictMode","isMatcher","o","definition","definitionFn","unwrapShorthand","isShorthand","$$fn","getType","urlType","getArrayMode","arrayDefaults","arrayParamNomenclature","getSquashPolicy","getReplace","arrayMode","configuredKeys","defaultPolicy","$value","hasReplaceVal","$replace","replacement","$normalize","$asArray","dynamic","$$parent","$$keys","chain","ignore","reverse","paramset","paramValues","$$equals","paramValues1","paramValues2","equal","$$validates","rawVal","normalized","encoded","$UrlRouterProvider","$locationProvider","$urlMatcherFactory","regExpPrefix","re","interpolate","what","handleIfMatch","handler","$match","$location","$browser","appendBasePath","isHtml5","absolute","baseHref","update","check","rule","handled","lastPushedUrl","rules","otherwise","listen","listener","interceptDeferred","sync","read","urlMatcher","$$avoidResync","href","validates","html5Mode","hashPrefix","slash","port","protocol","host","redirect","handlerIsString","strategies","matcher","global","sticky","deferIntercept","$inject","$StateProvider","$urlRouterProvider","isRelative","stateName","findState","stateOrName","base","isStr","rel","pathLength","state","queueState","parentName","queue","flushQueuedChildren","queued","registerState","lastIndexOf","stateBuilder","$delegates","abstractKey","$stateParams","$state","navigable","transitionTo","isGlob","doesStateMatchGlob","glob","globSegments","l","MAX_VALUE","decorator","func","$view","$resolve","$urlRouter","handleRedirect","TransitionAborted","retry","$retry","TransitionFailed","retryTransition","TransitionSuperseded","toParams","resolveState","paramsAreFiltered","resolveViews","viewsPromises","views","view","injectables","$template","load","globals","notify","controllerProvider","injectLocals","$$controller","$$state","$$controllerAs","TransitionPrevented","root","reload","go","relative","fromParams","fromPath","toState","hash","redirectResult","toPath","keep","toLocals","reloadState","ownParams","shouldSkipReload","resolved","entering","exiting","onExit","onEnter","includes","lossy","nav","context","nonSearchParamsEqual","fromAndToState","notSearchParam","nonQueryParamKeys","nonQueryParams","nonQueryParamSet","reloadOnSearch","compositeName","charAt","abstract","$ViewProvider","$templateFactory","defaults","async","$ViewScrollProvider","useAnchorScroll","$anchorScroll","scrollIntoView","$ViewDirective","$uiViewScroll","getService","has","getRenderer","statics","cb","$animator","terminal","priority","cleanupLastView","previousEl","currentEl","renderer","updateView","firstTime","getUiViewName","previousLocals","latestLocals","autoScrollExp","onloadExp","onload","autoscroll","$ViewDirectiveFill","initial","uiView","inheritedData","parseStateRef","ref","parsed","preparsed","paramExpr","stateContext","stateData","$StateRefDirective","allowedOptions","uiSrefActive","uiSref","hrefKind","newHref","isAnchor","toUpperCase","isForm","nodeName","optionsOverride","uiSrefOpts","newVal","activeDirective","$$addStateInfo","$set","oldVal","button","metaKey","ignorePreventDefaultCount","$StateRefActiveDirective","anyMatch","isMatch","uiSrefActiveEq","newState","$IsStateFilter","isFilter","$stateful","$IncludedByStateFilter","includesFilter","defaultConfig","searchParams","decodePathArray","reverseString","str","unquoteDashes","allReversed","paramName","parameters","nTotal","nPath","paramVal","encodeDashes","encodeURIComponent","c","charCodeAt","isPathParam","isDefaultValue","nextSegment","$subPattern","sub","substr","ArrayType","bindTo","callbackName","arrayWrap","arrayUnwrap","falsey","arrayHandler","allTruthyMode","arrayEqualsHandler","val1","val2","$arrayMode","isValidDottedPath","MEMBER_NAME_REGEX","lookupDottedPath","$resourceMinErr","shallowClearAndCopy","$$minErr","stripTrailingSlashes","actions","method","save","delete","encodeUriSegment","encodeUriQuery","pctEncodeSpaces","Route","urlParams","resourceFactory","paramDefaults","extractParams","actionParams","ids","defaultResponseInterceptor","resource","Resource","route","toJSON","$promise","$resolved","action","hasBody","a1","a2","a3","a4","success","isInstanceCall","httpConfig","responseInterceptor","interceptor","responseErrorInterceptor","responseError","setUrlParams","additionalParamDefaults","actionUrl","encodedVal","_","urlParam","p1","leadingSlashes","tail","authHeader","authPrefix","tokenGetter","request","skipAuthorization","tokenPromise","token","status","urlBase64Decode","output","decodeURIComponent","escape","atob","decodeToken","parts","decoded","JSON","getTokenExpirationDate","exp","setUTCSeconds","isTokenExpired","offsetSeconds","_slugify","ch","cp","ascii","String","fromCharCode","charmap","mod"," ","¡","¢","£","¥","¦","§","¨","©","ª","«","¬","­","®","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ","Ā","ā","Ă","ă","Ą","ą","Ć","ć","Ĉ","ĉ","Ċ","ċ","Č","č","Ď","ď","Đ","đ","Ē","ē","Ĕ","ĕ","Ė","ė","Ę","ę","Ě","ě","Ĝ","ĝ","Ğ","ğ","Ġ","ġ","Ģ","ģ","Ĥ","ĥ","Ħ","ħ","Ĩ","ĩ","Ī","ī","Ĭ","ĭ","Į","į","İ","ı","Ĳ","ĳ","Ĵ","ĵ","Ķ","ķ","Ĺ","ĺ","Ļ","ļ","Ľ","ľ","Ŀ","ŀ","Ł","ł","Ń","ń","Ņ","ņ","Ň","ň","ŉ","Ō","ō","Ŏ","ŏ","Ő","ő","Œ","œ","Ŕ","ŕ","Ŗ","ŗ","Ř","ř","Ś","ś","Ŝ","ŝ","Ş","ş","Š","š","Ţ","ţ","Ť","ť","Ŧ","ŧ","Ũ","ũ","Ū","ū","Ŭ","ŭ","Ů","ů","Ű","ű","Ų","ų","Ŵ","ŵ","Ŷ","ŷ","Ÿ","Ź","ź","Ż","ż","Ž","ž","ſ","slugify","Slug","Flow","opts","support","File","Blob","FileList","webkitSlice","mozSlice","supportDirectory","navigator","userAgent","files","chunkSize","forceChunkSize","simultaneousUploads","singleFile","fileParameterName","progressCallbacksInterval","speedSmoothingFactor","withCredentials","preprocess","testMethod","uploadMethod","prioritizeFirstAndLastChunk","testChunks","generateUniqueIdentifier","maxChunkRetries","chunkRetryInterval","permanentErrors","successStatuses","onDropStopPropagation","events","$","onDrop","dataTransfer","items","webkitGetAsEntry","webkitReadDataTransfer","addFiles","preventEvent","FlowFile","flowObj","file","fileName","relativePath","webkitRelativePath","uniqueIdentifier","chunks","paused","averageSpeed","currentSpeed","_lastProgressCallback","now","_prevUploadedSize","_prevProgress","bootstrap","FlowChunk","fileObj","fileObjSize","tested","retries","pendingRetry","preprocessState","loaded","total","startByte","endByte","xhr","args","chunkEvent","progressHandler","lengthComputable","testHandler","message","uploadNextChunk","send","doneHandler","abort","retryInterval","setTimeout","arrayRemove","evalOpts","fn","each","ie10plus","msPointerEnabled","off","fire","readSuccess","entries","entry","isFile","fullPath","fileReadSuccess","readError","isDirectory","createReader","readEntries","decrement","fileError","getAsFile","custom","preventEvents","found","chunk","outstanding","isComplete","assignBrowse","domNodes","attributes","domNode","visibility","appendChild","addEventListener","assignDrop","unAssignDrop","removeEventListener","isUploading","uploading","_shouldUploadNext","num","should","upload","ret","started","resume","progress","totalDone","totalSize","addFile","fileList","getFromUniqueIdentifier","f","removeFile","getSize","sizeUploaded","timeRemaining","sizeDelta","POSITIVE_INFINITY","measureSpeed","timeSpan","smoothingFactor","uploaded","bytesLoaded","getExtension","getParams","flowChunkNumber","flowChunkSize","flowCurrentChunkSize","flowTotalSize","flowIdentifier","flowFilename","flowRelativePath","flowTotalChunks","getTarget","XMLHttpRequest","prepareXhrRequest","preprocessFinished","bytes","isTest","readyState","responseText","paramsMethod","blob","v","FormData","setRequestHeader","version","define","amd","create","flow","flowFactory","flowInit","flowObject","catchAllHandler","eventName","filesSubmitted","fileSuccess","complete","$flow","flowName","isSingleFile","inputAttrs","flowAttrs","isFileDrag","dragEvent","fileDrag","types","flowDragEnter","flowDragLeave","flowDropEnabled","capitaliseFirstLetter","fileProgress","fileAdded","filesAdded","fileRetry","uploadStart","eventArgs","funcArgs","flowImg","fileReader","FileReader","readAsDataURL","transfers","touchFix","touches","clientX","clientY","getPreviousSibling","previousElementSibling","sib","previousSibling","nodeType","insertElementBefore","newElement","prevSibl","elementMatchesSelector","selector","matchingFunction","shouldBeAfter","pointer","isGrid","x","getSortableElements","ROOTS_MAP","removeSortableElements","sortingInProgress","mapKey","svRoot","candidates","$placeholder","$helper","$original","$target","onSort","svOnSort","svOnStart","$$element","svOnStop","onStart","onStop","svGrid","$watchCollection","container","part","getPart","dict","$moveUpdate","mouse","svElement","svOriginal","svPlaceholder","originatingPart","originatingIndex","svRect","tolerance","$part","$index","$root","se","containment","rect","scrollWidth","q","targetIndex","getIndex","querySelector","pRect","pCenter","cand","$drop","afterRevert","spliced","$partTo","$partFrom","$indexTo","$indexFrom","revert","placeholderRect","helperRect","distance","sqrt","pow","duration","addToSortableElements","removeFromSortableElements","elems","$ctrl","$sortableRoot","$sortable","svPart","sortablePart","$controllers","onMousedown","onMousemove","moveExecuted","pointerOffset","containmentRect","closestElement","clientRect","helper","coords","targetLeft","targetTop","mouseup","sortableElement","handle","customHandle","customHelper","customPlaceholder","head","dde","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector","closest","parentNode","res"],"mappings":"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ACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IAkBT3N,KAAIjqC,QAAQ,OAAQ,WAChB,OACI63C,QAASnO,YAIjBO,IAAIz3C,UAAU,QAAS,OAAQ,SAASslD,MACpC,OACI3iD,SAAU,IACVxC,OACIM,GAAI,KAERmC,YAAY,EACZC,SAAS,EACTS,SAAU,4BACVpD,KAAM,SAASC,MAAOyqB,KAAMvqB,OACxB,IAAKA,MAAMk4B,KACP,KAAM,2BAEVp4B,OAAM2R,QAAQ7Q,OAAOZ,MAAMk4B,KAAM,SAASzyB,KACtC3F,MAAMM,GAAK6kD,KAAKD,QAAQv/C,YAMxC2xC,IAAI9gB,OAAO,WAAA,OAAW,SAAS2uB,MAC3B,MAAO,UAASh5C,OACZ,MAAOg5C,MAAKD,QAAQ/4C,cCpShC,SAAU+qB,OAAQjF,SAAUpqB,WAAY,YA8BtC,SAASu9C,MAAKC,MAeZ,GAVA/jD,KAAKgkD,UACe,mBAATC,OACS,mBAATC,OACa,mBAAbC,YAEHD,KAAKnuB,UAAUiC,QAAWksB,KAAKnuB,UAAUquB,cAAiBF,KAAKnuB,UAAUsuB;AAK5ErkD,KAAKgkD,QAAV,CAQAhkD,KAAKskD,iBAAmB,SAASz4B,KAAK+J,OAAO2uB,UAAUC,WAMvDxkD,KAAKykD,SAMLzkD,KAAKyqC,UACHia,UAAW,QACXC,gBAAgB,EAChBC,oBAAqB,EACrBC,YAAY,EACZC,kBAAmB,OACnBC,0BAA2B,IAC3BC,qBAAsB,GACtB1xB,SACAyH,WACAkqB,iBAAiB,EACjBC,WAAY,KACZzT,OAAQ,YACR0T,WAAY,MACZC,aAAc,OACdC,6BAA6B,EAC7BvrC,OAAQ,IACRwrC,YAAY,EACZC,yBAA0B,KAC1BC,gBAAiB,EACjBC,mBAAoB,KACpBC,iBAAkB,IAAK,IAAK,IAAK,KACjCC,iBAAkB,IAAK,IAAK,KAC5BC,uBAAuB,GAOzB5lD,KAAK+jD,QAQL/jD,KAAK6lD,SAEL,IAAIC,GAAI9lD,IAORA,MAAK+lD,OAAS,SAAUllD,OAClBilD,EAAE/B,KAAK6B,uBACT/kD,MAAMmT,kBAERnT,MAAMkT,gBACN,IAAIiyC,cAAenlD,MAAMmlD,YACrBA,cAAaC,OAASD,aAAaC,MAAM,IAC3CD,aAAaC,MAAM,GAAGC,iBACtBJ,EAAEK,uBAAuBtlD,OAEzBilD,EAAEM,SAASJ,aAAavB,MAAO5jD,QASnCb,KAAKqmD,aAAe,SAAUxlD,OAC5BA,MAAMkT,kBAQR/T,KAAK+jD,KAAOD,KAAKh+C,UAAW9F,KAAKyqC,SAAUsZ,WA2hB7C,QAASuC,UAASC,QAASC,MAMzBxmD,KAAKumD,QAAUA,QAMfvmD,KAAKwmD,KAAOA,KAMZxmD,KAAK4lB,KAAO4gC,KAAKC,UAAYD,KAAK5gC,KAMlC5lB,KAAKqS,KAAOm0C,KAAKn0C,KAMjBrS,KAAK0mD,aAAeF,KAAKE,cAAgBF,KAAKG,oBAAsB3mD,KAAK4lB,KAMzE5lB,KAAK4mD,iBAAmBL,QAAQhB,yBAAyBiB,MAMzDxmD,KAAK6mD,UAML7mD,KAAK8mD,QAAS,EAMd9mD,KAAKwR,OAAQ,EAMbxR,KAAK+mD,aAAe,EAMpB/mD,KAAKgnD,aAAe,EAOpBhnD,KAAKinD,sBAAwBn7C,KAAKo7C,MAOlClnD,KAAKmnD,kBAAoB,EAOzBnnD,KAAKonD,cAAgB,EAErBpnD,KAAKqnD,YA2QP,QAASC,WAAUf,QAASgB,QAASz6C,QAMnC9M,KAAKumD,QAAUA,QAMfvmD,KAAKunD,QAAUA,QAMfvnD,KAAKwnD,YAAcD,QAAQl1C,KAM3BrS,KAAK8M,OAASA,OAMd9M,KAAKynD,QAAS,EAMdznD,KAAK0nD,QAAU,EAMf1nD,KAAK2nD,cAAe,EAMpB3nD,KAAK4nD,gBAAkB,EAMvB5nD,KAAK6nD,OAAS,EAMd7nD,KAAK8nD,MAAQ,CAMb,IAAIpD,WAAY1kD,KAAKumD,QAAQxC,KAAKW,SAMlC1kD,MAAK+nD,UAAY/nD,KAAK8M,OAAS43C,UAM/B1kD,KAAKgoD,QAAUv3C,KAAK6F,IAAItW,KAAKwnD,aAAcxnD,KAAK8M,OAAS,GAAK43C,WAM9D1kD,KAAKioD,IAAM,KAEPjoD,KAAKwnD,YAAcxnD,KAAKgoD,QAAUtD,YACjC1kD,KAAKumD,QAAQxC,KAAKY,iBAGrB3kD,KAAKgoD,QAAUhoD,KAAKwnD,YAGtB,IAAI1B,GAAI9lD,IAQRA,MAAKa,MAAQ,SAAUA,MAAOqnD,MAC5BA,KAAOxzC,MAAMqhB,UAAUiC,MAAMnsB,KAAKmQ,WAClCksC,KAAKxuC,QAAQosC,GACbA,EAAEyB,QAAQY,WAAW1/C,MAAMq9C,EAAEyB,QAASW,OAMxCloD,KAAKooD,gBAAkB,SAASvnD,OAC1BA,MAAMwnD,mBACRvC,EAAE+B,OAAShnD,MAAMgnD,OACjB/B,EAAEgC,MAAQjnD,MAAMinD,OAElBhC,EAAEjlD,MAAM,WAAYA,QAOtBb,KAAKsoD,YAAc,SAASznD,OAC1B,GAAI6zC,QAASoR,EAAEpR,QAAO,EACP,WAAXA,QACFoR,EAAEjlD,MAAM6zC,OAAQoR,EAAEyC,WAClBzC,EAAES,QAAQiC,mBACU,YAAX9T,QACToR,EAAE2B,QAAS,EACX3B,EAAEjlD,MAAM6zC,OAAQoR,EAAEyC,WAClBzC,EAAES,QAAQiC,mBACA1C,EAAEyB,QAAQT,SAGpBhB,EAAE2B,QAAS,EACX3B,EAAE2C,SAQNzoD,KAAK0oD,YAAc,SAAS7nD,OAC1B,GAAI6zC,QAASoR,EAAEpR,QACf,IAAe,YAAXA,QAAmC,UAAXA,OAC1BoR,EAAEjlD,MAAM6zC,OAAQoR,EAAEyC,WAClBzC,EAAES,QAAQiC,sBACL,CACL1C,EAAEjlD,MAAM,QAASilD,EAAEyC,WACnBzC,EAAE6B,cAAe,EACjB7B,EAAE6C,QACF7C,EAAE4B,SACF,IAAIkB,eAAgB9C,EAAES,QAAQxC,KAAK0B,kBACb,QAAlBmD,cACFC,WAAW,WACT/C,EAAE2C,QACDG,eAEH9C,EAAE2C,SAmPV,QAASK,aAAYnyB,MAAOh1B,OAC1B,GAAIZ,OAAQ41B,MAAM31B,QAAQW,MACtBZ,OAAQ,IACV41B,MAAM11B,OAAOF,MAAO,GAUxB,QAASgoD,UAASpmD,KAAMulD,MAMtB,MALoB,kBAATvlD,QAETulD,KAAOxzC,MAAMqhB,UAAUiC,MAAMnsB,KAAKmQ,WAClCrZ,KAAOA,KAAK8F,MAAM,KAAMy/C,KAAKlwB,MAAM,KAE9Br1B,KAST,QAAS+nC,OAAMse,GAAIpf,SACjBif,WAAWG,GAAGxlD,KAAKomC,SAAU,GAW/B,QAAS9jC,QAAOmwB,IAAKpM,KAQnB,MAPAo/B,MAAKjtC,UAAW,SAASka,KACnBA,MAAQD,KACVgzB,KAAK/yB,IAAK,SAASv0B,MAAOyO,KACxB6lB,IAAI7lB,KAAOzO,UAIVs0B,IAWT,QAASgzB,MAAK/yB,IAAKiC,SAAUyR,SAC3B,GAAK1T,IAAL,CAGA,GAAI9lB,IAEJ,IAA2B,mBAAhB8lB,KAAI,QACb,IAAK9lB,IAAM,EAAGA,IAAM8lB,IAAIvxB,OAAQyL,MAC9B,GAAI+nB,SAAStsB,KAAK+9B,QAAS1T,IAAI9lB,KAAMA,QAAS,EAC5C,WAIJ,KAAKA,MAAO8lB,KACV,GAAIA,IAAIC,eAAe/lB,MAAQ+nB,SAAStsB,KAAK+9B,QAAS1T,IAAI9lB,KAAMA,QAAS,EACvE,QAr+CR,GAAI84C,UAAWtzB,OAAO2uB,UAAU4E,gBA6IhCrF,MAAK/tB,WAUHja,GAAI,SAAUjb,MAAOs3B,UACnBt3B,MAAQA,MAAM6W,cACT1X,KAAK6lD,OAAO1vB,eAAet1B,SAC9Bb,KAAK6lD,OAAOhlD,WAEdb,KAAK6lD,OAAOhlD,OAAOF,KAAKw3B,WAS1BixB,IAAK,SAAUvoD,MAAOmoD,IAChBnoD,QAAU0F,WACZ1F,MAAQA,MAAM6W,cACVsxC,KAAOziD,UACLvG,KAAK6lD,OAAO1vB,eAAet1B,QAC7BioD,YAAY9oD,KAAK6lD,OAAOhlD,OAAQmoD,UAG3BhpD,MAAK6lD,OAAOhlD,QAGrBb,KAAK6lD,WAYTwD,KAAM,SAAUxoD,MAAOqnD,MAErBA,KAAOxzC,MAAMqhB,UAAUiC,MAAMnsB,KAAKmQ,WAClCnb,MAAQA,MAAM6W,aACd,IAAI3D,iBAAiB,CAUrB,OATI/T,MAAK6lD,OAAO1vB,eAAet1B,QAC7BooD,KAAKjpD,KAAK6lD,OAAOhlD,OAAQ,SAAUs3B,UACjCpkB,eAAiBokB,SAAS1vB,MAAMzI,KAAMkoD,KAAKlwB,MAAM,OAAQ,GAASjkB,gBACjE/T,MAEQ,YAATa,QACFqnD,KAAKxuC,QAAQ,YACb3F,eAAiB/T,KAAKqpD,KAAK5gD,MAAMzI,KAAMkoD,SAAU,GAASn0C,iBAEpDA,gBAOVoyC,uBAAwB,SAAUtlD,OAiBhC,QAASyoD,aAAYC,SACnBlkB,OAASkkB,QAAQ5kD,OACjBskD,KAAKM,QAAS,SAASC,OACrB,GAAIA,MAAMC,OAAQ,CAChB,GAAIC,UAAWF,MAAME,QACrBF,OAAMhD,KAAK,SAAUA,MACnBmD,gBAAgBnD,KAAMkD,WACrBE,eACMJ,OAAMK,aACfL,MAAMM,eAAeC,YAAYT,YAAaM,aAGlDI,YAEF,QAASL,iBAAgBnD,KAAMkD,UAE7BlD,KAAKE,aAAegD,SAASztB,UAAU,GACvCwoB,MAAM9jD,KAAK6lD,MACXwD,YAEF,QAASJ,WAAUK,WACjB,KAAMA,WAER,QAASD,aACQ,KAAT3kB,OACJygB,EAAEM,SAAS3B,MAAO5jD,OAzCtB,GAAIilD,GAAI9lD,KACJqlC,MAAQxkC,MAAMmlD,aAAaC,MAAMthD,OACjC8/C,QACJwE,MAAKpoD,MAAMmlD,aAAaC,MAAO,SAAU3xB,MACvC,GAAIk1B,OAAQl1B,KAAK4xB,kBACjB,OAAKsD,YAIDA,MAAMC,OAERE,gBAAgBr1B,KAAK41B,YAAaV,MAAME,UAExCF,MAAMM,eAAeC,YAAYT,YAAaM,gBAP9CI,gBA8CNzE,yBAA0B,SAAUiB,MAClC,GAAI2D,QAASnqD,KAAK+jD,KAAKwB,wBACvB,IAAsB,kBAAX4E,QACT,MAAOA,QAAO3D,KAGhB,IAAIE,cAAeF,KAAKE,cAAgBF,KAAKG,oBAAsBH,KAAKC,UAAYD,KAAK5gC,IACzF,OAAO4gC,MAAKn0C,KAAO,IAAMq0C,aAAatlD,QAAQ,oBAAqB,KASrEonD,gBAAiB,SAAU4B,eAIzB,GAAIC,QAAQ,CACZ,IAAIrqD,KAAK+jD,KAAKsB,8BACZ4D,KAAKjpD,KAAKykD,MAAO,SAAU+B,MACzB,OAAKA,KAAKM,QAAUN,KAAKK,OAAOliD,QACF,YAA5B6hD,KAAKK,OAAO,GAAGnS,UACoB,IAAnC8R,KAAKK,OAAO,GAAGe,iBACfpB,KAAKK,OAAO,GAAG4B,OACf4B,OAAQ,GACD,IAEJ7D,KAAKM,QAAUN,KAAKK,OAAOliD,OAAS,GACU,YAAjD6hD,KAAKK,OAAOL,KAAKK,OAAOliD,OAAS,GAAG+vC,UACD,IAAnC8R,KAAKK,OAAO,GAAGe,iBACfpB,KAAKK,OAAOL,KAAKK,OAAOliD,OAAS,GAAG8jD,OACpC4B,OAAQ,GACD,GALT,SAQEA,OACF,MAAOA,MAmBX,IAdApB,KAAKjpD,KAAKykD,MAAO,SAAU+B,MAUzB,MATKA,MAAKM,QACRmC,KAAKzC,KAAKK,OAAQ,SAAUyD,OAC1B,MAAuB,YAAnBA,MAAM5V,UAAoD,IAA1B4V,MAAM1C,iBACxC0C,MAAM7B,OACN4B,OAAQ,GACD,GAHT,SAOAA,OACK,EADT,SAIEA,MACF,OAAO,CAIT,IAAIE,cAAc,CAalB,OAZAtB,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzB,MAAKA,MAAKgE,aAAV,QACED,aAAc,GACP,KAGNA,aAAgBH,eAEnB1f,MAAM,WACJ1qC,KAAKqpD,KAAK,aACTrpD,OAEE,GAeTyqD,aAAc,SAAUC,SAAUb,YAAahF,WAAY8F,YAC1B,mBAApBD,UAAS/lD,SAClB+lD,UAAYA,WAGdzB,KAAKyB,SAAU,SAAUE,SACvB,GAAI//C,MACoB,WAApB+/C,QAAQ59B,SAAwC,SAAjB49B,QAAQtoD,KACzCuI,MAAQ+/C,SAER//C,MAAQ8lB,SAASC,cAAc,SAC/B/lB,MAAMsO,aAAa,OAAQ,QAE3BrT,OAAO+E,MAAM0B,OACXs+C,WAAY,SACZj+C,SAAU,aAGZg+C,QAAQE,YAAYjgD,OAKpB+/C,QAAQG,iBAAiB,QAAS,WAChClgD,MAAMyb,UACL,IAEAtmB,KAAK+jD,KAAKc,YAAeA,YAC5Bh6C,MAAMsO,aAAa,WAAY,YAE7B0wC,aACFh/C,MAAMsO,aAAa,kBAAmB,mBAExC8vC,KAAK0B,WAAY,SAAUhpD,MAAOyO,KAChCvF,MAAMsO,aAAa/I,IAAKzO,QAG1B,IAAImkD,GAAI9lD,IACR6K,OAAMkgD,iBAAiB,SAAU,SAAU57B,GACzC22B,EAAEM,SAASj3B,EAAErV,OAAO2qC,MAAOt1B,GAC3BA,EAAErV,OAAOnY,MAAQ,KAChB,IACF3B,OAQLgrD,WAAY,SAAUN,UACW,mBAApBA,UAAS/lD,SAClB+lD,UAAYA,WAEdzB,KAAKyB,SAAU,SAAUE,SACvBA,QAAQG,iBAAiB,WAAY/qD,KAAKqmD,cAAc,GACxDuE,QAAQG,iBAAiB,YAAa/qD,KAAKqmD,cAAc,GACzDuE,QAAQG,iBAAiB,OAAQ/qD,KAAK+lD,QAAQ,IAC7C/lD,OAQLirD,aAAc,SAAUP,UACS,mBAApBA,UAAS/lD,SAClB+lD,UAAYA,WAEdzB,KAAKyB,SAAU,SAAUE,SACvBA,QAAQM,oBAAoB,WAAYlrD,KAAKqmD,cAC7CuE,QAAQM,oBAAoB,YAAalrD,KAAKqmD,cAC9CuE,QAAQM,oBAAoB,OAAQlrD,KAAK+lD,SACxC/lD,OASLmrD,YAAa,WACX,GAAIC,YAAY,CAOhB,OANAnC,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzB,MAAIA,MAAK2E,eACPC,WAAY,GACL,GAFT,SAKKA,WAQTC,kBAAmB,WACjB,GAAIC,KAAM,EACNC,QAAS,EACT3G,oBAAsB5kD,KAAK+jD,KAAKa,mBAapC,OAZAqE,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzByC,KAAKzC,KAAKK,OAAQ,SAASyD,OACzB,MAAuB,cAAnBA,MAAM5V,WACR4W,MACIA,KAAO1G,sBACT2G,QAAS,GACF,GAJX,WAUGA,QAAUD,KAOnBE,OAAQ,WAEN,GAAIC,KAAMzrD,KAAKqrD,mBACf,IAAII,OAAQ,EAAZ,CAIAzrD,KAAKqpD,KAAK,cAEV,KAAK,GADDqC,UAAU,EACLJ,IAAM,EAAGA,KAAOtrD,KAAK+jD,KAAKa,oBAAsB6G,IAAKH,MAC5DI,QAAU1rD,KAAKwoD,iBAAgB,IAASkD,OAErCA,UACHhhB,MAAM,WACJ1qC,KAAKqpD,KAAK,aACTrpD,QAQP2rD,OAAQ,WACN1C,KAAKjpD,KAAKykD,MAAO,SAAU+B,MACzBA,KAAKmF,YAQTtmD,MAAO,WACL4jD,KAAKjpD,KAAKykD,MAAO,SAAU+B,MACzBA,KAAKnhD,WAQTH,OAAQ,WACN,IAAK,GAAIR,GAAI1E,KAAKykD,MAAM9/C,OAAS,EAAGD,GAAK,EAAGA,IAC1C1E,KAAKykD,MAAM//C,GAAGQ,UAUlB0mD,SAAU,WACR,GAAIC,WAAY,EACZC,UAAY,CAMhB,OAJA7C,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzBqF,WAAarF,KAAKoF,WAAapF,KAAKn0C,KACpCy5C,WAAatF,KAAKn0C,OAEby5C,UAAY,EAAID,UAAYC,UAAY,GASjDC,QAAS,SAAUvF,KAAM3lD,OACvBb,KAAKomD,UAAUI,MAAO3lD,QASxBulD,SAAU,SAAU4F,SAAUnrD,OAC5B,GAAI4jD,SACJwE,MAAK+C,SAAU,SAAUxF,MAKvB,KAAM0C,UAAYA,UAAY1C,KAAKn0C,KAAO,KAAQm0C,KAAKn0C,KAAO,OAAS,GAAoB,MAAdm0C,KAAK5gC,MAAkC,MAAlB4gC,KAAKC,YACpGzmD,KAAKisD,wBAAwBjsD,KAAKulD,yBAAyBiB,OAAQ,CACpE,GAAI0F,GAAI,GAAI5F,UAAStmD,KAAMwmD,KACvBxmD,MAAKqpD,KAAK,YAAa6C,EAAGrrD,QAC5B4jD,MAAM9jD,KAAKurD,KAGdlsD,MACCA,KAAKqpD,KAAK,aAAc5E,MAAO5jD,QACjCooD,KAAKxE,MAAO,SAAU+B,MAChBxmD,KAAK+jD,KAAKc,YAAc7kD,KAAKykD,MAAM9/C,OAAS,GAC9C3E,KAAKmsD,WAAWnsD,KAAKykD,MAAM,IAE7BzkD,KAAKykD,MAAM9jD,KAAK6lD,OACfxmD,MAELA,KAAKqpD,KAAK,iBAAkB5E,MAAO5jD,QASrCsrD,WAAY,SAAU3F,MACpB,IAAK,GAAI9hD,GAAI1E,KAAKykD,MAAM9/C,OAAS,EAAGD,GAAK,EAAGA,IACtC1E,KAAKykD,MAAM//C,KAAO8hD,OACpBxmD,KAAKykD,MAAMxjD,OAAOyD,EAAG,GACrB8hD,KAAKmC,UAWXsD,wBAAyB,SAAUrF,kBACjC,GAAI6E,MAAM,CAMV,OALAxC,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACrBA,KAAKI,mBAAqBA,mBAC5B6E,IAAMjF,QAGHiF,KAQTW,QAAS,WACP,GAAIN,WAAY,CAIhB,OAHA7C,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzBsF,WAAatF,KAAKn0C,OAEby5C,WAQTO,aAAc,WACZ,GAAIh6C,MAAO,CAIX,OAHA42C,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACzBn0C,MAAQm0C,KAAK6F,iBAERh6C,MASTi6C,cAAe,WACb,GAAIC,WAAY,EACZxF,aAAe,CAOnB,OANAkC,MAAKjpD,KAAKykD,MAAO,SAAU+B,MACpBA,KAAKM,QAAWN,KAAKh1C,QACxB+6C,WAAa/F,KAAKn0C,KAAOm0C,KAAK6F,eAC9BtF,cAAgBP,KAAKO,gBAGrBwF,YAAcxF,aACTnwB,OAAO41B,kBAEXD,WAAcxF,aAGZt2C,KAAKC,MAAM67C,UAAYxF,cAFrB,IA8GbT,SAASvwB,WAMP02B,aAAc,WACZ,GAAIC,UAAW5gD,KAAKo7C,MAAQlnD,KAAKinD,qBACjC,IAAKyF,SAAL,CAGA,GAAIC,iBAAkB3sD,KAAKumD,QAAQxC,KAAKiB,qBACpC4H,SAAW5sD,KAAKqsD,cAEpBrsD,MAAKgnD,aAAev2C,KAAKsT,KAAK6oC,SAAW5sD,KAAKmnD,mBAAqBuF,SAAW,IAAM,GACpF1sD,KAAK+mD,aAAe4F,gBAAkB3sD,KAAKgnD,cAAgB,EAAI2F,iBAAmB3sD,KAAK+mD,aACvF/mD,KAAKmnD,kBAAoByF,WAW3BzE,WAAY,SAAUmC,MAAOzpD,MAAO0nD,SAClC,OAAQ1nD,OACN,IAAK,WACH,GAAIiL,KAAKo7C,MAAQlnD,KAAKinD,sBACpBjnD,KAAKumD,QAAQxC,KAAKgB,0BAClB,KAEF/kD,MAAKysD,eACLzsD,KAAKumD,QAAQ8C,KAAK,eAAgBrpD,KAAMsqD,OACxCtqD,KAAKumD,QAAQ8C,KAAK,YAClBrpD,KAAKinD,sBAAwBn7C,KAAKo7C,KAClC,MACF,KAAK,QACHlnD,KAAKwR,OAAQ,EACbxR,KAAK2oD,OAAM,GACX3oD,KAAKumD,QAAQ8C,KAAK,YAAarpD,KAAMuoD,QAAS+B,OAC9CtqD,KAAKumD,QAAQ8C,KAAK,QAASd,QAASvoD,KAAMsqD,MAC1C,MACF,KAAK,UACH,GAAItqD,KAAKwR,MACP,MAEFxR,MAAKysD,eACLzsD,KAAKumD,QAAQ8C,KAAK,eAAgBrpD,KAAMsqD,OACxCtqD,KAAKumD,QAAQ8C,KAAK,YAClBrpD,KAAKinD,sBAAwBn7C,KAAKo7C,MAC9BlnD,KAAKwqD,eACPxqD,KAAKgnD,aAAe,EACpBhnD,KAAK+mD,aAAe,EACpB/mD,KAAKumD,QAAQ8C,KAAK,cAAerpD,KAAMuoD,QAAS+B,OAElD,MACF,KAAK,QACHtqD,KAAKumD,QAAQ8C,KAAK,YAAarpD,KAAMsqD,SAS3CjlD,MAAO,WACLrF,KAAK8mD,QAAS,EACd9mD,KAAK2oD,SAOPgD,OAAQ,WACN3rD,KAAK8mD,QAAS,EACd9mD,KAAKumD,QAAQiF,UAOf7C,MAAO,SAAUj9B,OACf1rB,KAAKgnD,aAAe,EACpBhnD,KAAK+mD,aAAe,CACpB,IAAIF,QAAS7mD,KAAK6mD,MACdn7B,SACF1rB,KAAK6mD,WAEPoC,KAAKpC,OAAQ,SAAUhX,GACF,cAAfA,EAAE6E,WACJ7E,EAAE8Y,QACF3oD,KAAKumD,QAAQiC,oBAEdxoD,OAOLkF,OAAQ,WACNlF,KAAKumD,QAAQ4F,WAAWnsD,OAO1B8mC,MAAO,WACL9mC,KAAKqnD,YACLrnD,KAAKumD,QAAQiF,UAOfnE,UAAW,WACTrnD,KAAK2oD,OAAM,GACX3oD,KAAKwR,OAAQ,EAEbxR,KAAKonD,cAAgB,CAKrB,KAAK,GAJDjyC,OAAQnV,KAAKumD,QAAQxC,KAAKY,eAAiBl0C,KAAKoT,KAAOpT,KAAKC,MAC5Dm2C,OAASp2C,KAAKsT,IAChB5O,MAAMnV,KAAKwmD,KAAKn0C,KAAOrS,KAAKumD,QAAQxC,KAAKW,WAAY,GAE9C53C,OAAS,EAAY+5C,OAAT/5C,OAAiBA,SACpC9M,KAAK6mD,OAAOlmD,KACV,GAAI2mD,WAAUtnD,KAAKumD,QAASvmD,KAAM8M,UAUxC8+C,SAAU,WACR,GAAI5rD,KAAKwR,MACP,MAAO,EAET,IAA2B,IAAvBxR,KAAK6mD,OAAOliD,OAEd,MADA3E,MAAKonD,cAAgB32C,KAAKsT,IAAI/jB,KAAKonD,cAAepnD,KAAK6mD,OAAO,GAAG+E,YAC1D5rD,KAAKonD,aAGd,IAAIyF,aAAc,CAClB5D,MAAKjpD,KAAK6mD,OAAQ,SAAUhX,GAE1Bgd,aAAehd,EAAE+b,YAAc/b,EAAEmY,QAAUnY,EAAEkY,YAE/C,IAAIl9B,SAAUgiC,YAAc7sD,KAAKqS,IAGjC,OADArS,MAAKonD,cAAgB32C,KAAKsT,IAAI/jB,KAAKonD,cAAev8B,QAAU,MAAS,EAAIA,SAClE7qB,KAAKonD,eAQd+D,YAAa,WACX,GAAIC,YAAY,CAOhB,OANAnC,MAAKjpD,KAAK6mD,OAAQ,SAAUyD,OAC1B,MAAuB,cAAnBA,MAAM5V,UACR0W,WAAY,GACL,GAFT,SAKKA,WAQTZ,WAAY,WACV,GAAID,cAAc,CAQlB,OAPAtB,MAAKjpD,KAAK6mD,OAAQ,SAAUyD,OAC1B,GAAI5V,QAAS4V,MAAM5V,QACnB,OAAe,YAAXA,QAAmC,cAAXA,QAAoD,IAA1B4V,MAAM1C,iBAC1D2C,aAAc,GACP,GAFT,UAKMA,aAQV8B,aAAc,WACZ,GAAIh6C,MAAO,CAIX,OAHA42C,MAAKjpD,KAAK6mD,OAAQ,SAAUyD,OAC1Bj4C,MAAQi4C,MAAM+B,iBAETh6C,MASTi6C,cAAe,WACb,GAAItsD,KAAK8mD,QAAU9mD,KAAKwR,MACtB,MAAO,EAET,IAAI6d,OAAQrvB,KAAKqS,KAAOrS,KAAKqsD,cAC7B,OAAIh9B,SAAUrvB,KAAK+mD,aACVnwB,OAAO41B,kBAEXn9B,OAAUrvB,KAAK+mD,aAGbt2C,KAAKC,MAAM2e,MAAQrvB,KAAK+mD,cAFtB,GAUXrnB,QAAS,WACP,MAAO1/B,MAAKwmD,KAAKlkD,MAAQtC,KAAKwmD,KAAKlkD,KAAK8F,MAAM,KAAK,IAQrD0kD,aAAc,WACZ,MAAO9sD,MAAK4lB,KAAKwqB,UAAUpwC,KAAK4lB,KAAK6f,YAAY,OAAS,GAAK,GAAG/tB,gBAwLtE4vC,UAAUvxB,WAKRg3B,UAAW,WACT,OACEC,gBAAiBhtD,KAAK8M,OAAS,EAC/BmgD,cAAejtD,KAAKumD,QAAQxC,KAAKW,UACjCwI,qBAAsBltD,KAAKgoD,QAAUhoD,KAAK+nD,UAC1CoF,cAAentD,KAAKwnD,YACpB4F,eAAgBptD,KAAKunD,QAAQX,iBAC7ByG,aAAcrtD,KAAKunD,QAAQ3hC,KAC3B0nC,iBAAkBttD,KAAKunD,QAAQb,aAC/B6G,gBAAiBvtD,KAAKunD,QAAQV,OAAOliD,SAUzC6oD,UAAW,SAAS1zC,OAAQ0d,QAM1B,MAJE1d,SADCA,OAAO9Y,QAAQ,KAAO,EACb,IAEA,IAEL8Y,OAAS0d,OAAOhvB,KAAK,MAQ9BqjB,KAAM,WAEJ7rB,KAAKioD,IAAM,GAAIwF,gBACfztD,KAAKioD,IAAI8C,iBAAiB,OAAQ/qD,KAAKsoD,aAAa,GACpDtoD,KAAKioD,IAAI8C,iBAAiB,QAAS/qD,KAAKsoD,aAAa,EACrD,IAAInD,YAAa4D,SAAS/oD,KAAKumD,QAAQxC,KAAKoB,WAAYnlD,KAAKunD,QAASvnD,MAClE2C,KAAO3C,KAAK0tD,kBAAkBvI,YAAY,EAC9CnlD,MAAKioD,IAAIQ,KAAK9lD,OAOhBgrD,mBAAoB,WAClB3tD,KAAK4nD,gBAAkB,EACvB5nD,KAAKyoD,QAOPA,KAAM,WACJ,GAAIvD,YAAallD,KAAKumD,QAAQxC,KAAKmB,UACnC,IAA0B,kBAAfA,YACT,OAAQllD,KAAK4nD,iBACX,IAAK,GAGH,MAFA5nD,MAAK4nD,gBAAkB,MACvB1C,YAAWllD,KAEb,KAAK,GACH,OAGN,GAAIA,KAAKumD,QAAQxC,KAAKuB,aAAetlD,KAAKynD,OAExC,WADAznD,MAAK6rB,MAIP7rB,MAAK6nD,OAAS,EACd7nD,KAAK8nD,MAAQ,EACb9nD,KAAK2nD,cAAe,CAEpB,IAAInhB,MAAQxmC,KAAKunD,QAAQf,KAAKxuB,MAAQ,QACnCh4B,KAAKunD,QAAQf,KAAKnC,SAAW,WAC3BrkD,KAAKunD,QAAQf,KAAKpC,YAAc,cAC/B,QACFwJ,MAAQ5tD,KAAKunD,QAAQf,KAAKhgB,MAAMxmC,KAAK+nD,UAAW/nD,KAAKgoD,QAAShoD,KAAKunD,QAAQf,KAAKlkD,KAGpFtC,MAAKioD,IAAM,GAAIwF,gBACfztD,KAAKioD,IAAIuD,OAAOT,iBAAiB,WAAY/qD,KAAKooD,iBAAiB,GACnEpoD,KAAKioD,IAAI8C,iBAAiB,OAAQ/qD,KAAK0oD,aAAa,GACpD1oD,KAAKioD,IAAI8C,iBAAiB,QAAS/qD,KAAK0oD,aAAa,EAErD,IAAItD,cAAe2D,SAAS/oD,KAAKumD,QAAQxC,KAAKqB,aAAcplD,KAAKunD,QAASvnD,MACtE2C,KAAO3C,KAAK0tD,kBAAkBtI,cAAc,EAAOplD,KAAKumD,QAAQxC,KAAKtS,OAAQmc,MACjF5tD,MAAKioD,IAAIQ,KAAK9lD,OAOhBgmD,MAAO,WAEL,GAAIV,KAAMjoD,KAAKioD,GACfjoD,MAAKioD,IAAM,KACPA,KACFA,IAAIU,SASRjU,OAAQ,SAAUmZ,QAChB,MAAI7tD,MAAK2nD,cAAyC,IAAzB3nD,KAAK4nD,gBAGrB,YACG5nD,KAAKioD,IAENjoD,KAAKioD,IAAI6F,WAAa,EAGxB,YAEH9tD,KAAKumD,QAAQxC,KAAK4B,gBAAgB3kD,QAAQhB,KAAKioD,IAAIvT,QAAU,GAGxD,UACE10C,KAAKumD,QAAQxC,KAAK2B,gBAAgB1kD,QAAQhB,KAAKioD,IAAIvT,QAAU,KACnEmZ,QAAU7tD,KAAK0nD,SAAW1nD,KAAKumD,QAAQxC,KAAKyB,gBAExC,SAIPxlD,KAAK2oD,QACE,WAlBF,WA4BXJ,QAAS,WACP,MAAOvoD,MAAKioD,IAAMjoD,KAAKioD,IAAI8F,aAAe,IAQ5CnC,SAAU,WACR,GAAI5rD,KAAK2nD,aACP,MAAO,EAET,IAAIh9C,GAAI3K,KAAK00C,QACb,OAAU,YAAN/pC,GAAyB,UAANA,EACd,EACQ,YAANA,EACF,EAEA3K,KAAK8nD,MAAQ,EAAI9nD,KAAK6nD,OAAS7nD,KAAK8nD,MAAQ,GASvDuE,aAAc,WACZ,GAAIh6C,MAAOrS,KAAKgoD,QAAUhoD,KAAK+nD,SAK/B,OAHsB,YAAlB/nD,KAAK00C,WACPriC,KAAOrS,KAAK4rD,WAAav5C,MAEpBA,MAWTq7C,kBAAmB,SAASjc,OAAQoc,OAAQG,aAAcC,MAExD,GAAI36B,OAAQy1B,SAAS/oD,KAAKumD,QAAQxC,KAAKzwB,MAAOtzB,KAAKunD,QAASvnD,KAAM6tD,OAClEv6B,OAAQxtB,OAAO9F,KAAK+sD,YAAaz5B,MAEjC,IAAIxZ,QAASivC,SAAS/oD,KAAKumD,QAAQxC,KAAKjqC,OAAQ9Z,KAAKunD,QAASvnD,KAAM6tD,QAChElrD,KAAO,IACX,IAAe,QAAX8uC,QAAqC,UAAjBuc,aAA0B,CAEhD,GAAIx2B,UACJyxB,MAAK31B,MAAO,SAAU46B,EAAGx2B,GACvBF,OAAO72B,MAAMivC,mBAAmBlY,GAAIkY,mBAAmBse,IAAI1lD,KAAK,QAElEsR,OAAS9Z,KAAKwtD,UAAU1zC,OAAQ0d,QAChC70B,KAAOsrD,MAAQ,SAGftrD,MAAO,GAAIwrD,UACXlF,KAAK31B,MAAO,SAAU46B,EAAGx2B,GACvB/0B,KAAKR,OAAOu1B,EAAGw2B,KAEjBvrD,KAAKR,OAAOnC,KAAKumD,QAAQxC,KAAKe,kBAAmBmJ,KAAMjuD,KAAKunD,QAAQf,KAAK5gC,KAW3E,OARA5lB,MAAKioD,IAAIvtC,KAAK+2B,OAAQ33B,QAAQ,GAC9B9Z,KAAKioD,IAAIhD,gBAAkBjlD,KAAKumD,QAAQxC,KAAKkB,gBAG7CgE,KAAKF,SAAS/oD,KAAKumD,QAAQxC,KAAKhpB,QAAS/6B,KAAKunD,QAASvnD,KAAM6tD,QAAS,SAAUK,EAAGx2B,GACjF13B,KAAKioD,IAAImG,iBAAiB12B,EAAGw2B,IAC5BluD,MAEI2C,OA8BXmhD,KAAKiF,SAAWA,SA6BhBjF,KAAKh+C,OAASA,OA6Bdg+C,KAAKmF,KAAOA,KAMZnF,KAAKwC,SAAWA,SAMhBxC,KAAKwD,UAAYA,UAMjBxD,KAAKuK,QAAU,QAEQ,gBAAX/vD,SAAuBA,QAAoC,gBAAnBA,QAAOq3B,QAKzDr3B,OAAOq3B,QAAUmuB,MAGjBluB,OAAOkuB,KAAOA,KASS,kBAAXwK,SAAyBA,OAAOC,KAC1CD,OAAQ,UAAY,WAAc,MAAOxK,UAG5CluB,OAAQjF,UASXtyB,QAAQC,OAAO,oBACdgjB,SAAS,cAAe,WACvB,YAMAthB,MAAKyqC,YAQLzqC,KAAK+L,QAAU,SAAUgN,SACvB,MAAO,IAAI+qC,MAAK/qC,UASlB/Y,KAAK6lD,UASL7lD,KAAK8b,GAAK,SAAUjb,MAAOs3B,UACzBn4B,KAAK6lD,OAAOllD,MAAME,MAAOs3B,YAG3Bn4B,KAAKwhB,KAAO,WACV,GAAIwnC,IAAKhpD,KAAK+L,QACV0+B,SAAWzqC,KAAKyqC,SAChBob,OAAS7lD,KAAK6lD,MAClB,QACE2I,OAAU,SAASzK,MAEjB,GAAI0K,MAAOzF,GAAG3qD,QAAQyH,UAAW2kC,SAAUsZ,MAI3C,OAHA1lD,SAAQgC,QAAQwlD,OAAQ,SAAUhlD,OAChC4tD,KAAK3yC,GAAGjb,MAAM,GAAIA,MAAM,MAEnB4tD,UAKfpwD,QAAQC,OAAO,aAAc,kBAC1BsB,WAAW,YAAa,SAAU,SAAU,SAAU,cACvD,SAAUC,OAAQC,OAAQgQ,OAAQ4+C,aAEhC,GAAI31C,SAAU1a,QAAQyH,UAAWjG,OAAOO,MAAMN,OAAO6uD,WAGjDF,KAAQ5uD,OAAOO,MAAMN,OAAO8uD,aAAeF,YAAYF,OAAOz1C,SAE9D81C,gBAAkB,SAASC,WAC7B,GAAI5G,MAAOxzC,MAAMqhB,UAAUiC,MAAMnsB,KAAKmQ,UACtCksC,MAAKrqB,OACL,IAAIh9B,OAAQhB,OAAOma,WAAWvR,MAAM5I,QAAS,SAAWivD,UAAWL,MAAM7rC,OAAOslC,MAMhF,QAJE0D,SAAW,EAAGmD,eAAiB,EAAGC,YAAe,EAAG/E,UAAa,EAAGgF,SAAY,GAChFH,YACAjvD,OAAO+D,SAEL/C,MAAMsf,kBACD,EADT,OAKFsuC,MAAK3yC,GAAG,WAAY+yC,iBACpBhvD,OAAOe,IAAI,WAAY,WACnB6tD,KAAKrF,IAAI,WAAYyF,mBAGzBhvD,OAAOqvD,MAAQT,KAEX3uD,OAAOq2B,eAAe,cACxBrmB,OAAOhQ,OAAOqvD,UAAU/1C,OAAOvZ,OAAQ4uD,MACvC5uD,OAAOe,IAAI,WAAY,WACrBkP,OAAOhQ,OAAOqvD,UAAU/1C,OAAOvZ,cAIpCtB,UAAU,YAAa,WACtB,OACEG,OAAO,EACPkB,WAAY,eAGlBvB,QAAQC,OAAO,YAAa,cAC3BC,UAAU,WAAY,WACrB,OACE2C,SAAY,KACZxC,OAAS,EACT4C,QAAW,YACX7C,KAAQ,SAASC,MAAOC,QAASC,OAC/B,GAAIirD,aAAcjrD,MAAMu3B,eAAe,iBACnCi5B,aAAexwD,MAAMu3B,eAAe,kBACpCk5B,WAAazwD,MAAMu3B,eAAe,cAAgBz3B,MAAM0B,MAAMxB,MAAM0wD,UACxE5wD,OAAMwwD,MAAMzE,aAAa9rD,QAASkrD,YAAauF,aAAcC,iBAInEhxD,QAAQC,OAAO,mBAAoB,cAKhCC,UAAU,kBAAmB,WAC5B,OACEG,OAAS,EACTD,KAAQ,SAASC,MAAOC,QAASC,OAC/BD,QAAQ6E,KAAK,gBAAiB,SAAU3C,OACtCA,MAAMkT,uBASbxV,UAAU,iBAAkB,WAAY,SAASgE,UAChD,OACE7D,OAAS,EACTD,KAAQ,SAASC,MAAOC,QAASC,OAsB/B,QAAS2wD,YAAWC,WAClB,GAAIC,WAAW,EACXzJ,aAAewJ,UAAUxJ,cAAgBwJ,UAAUpgC,cAAc42B,YAMrE,OALA3nD,SAAQgC,QAAQ2lD,cAAgBA,aAAa0J,MAAO,SAASrrD,KAC/C,UAARA,MACForD,UAAW,KAGRA,SA7BT,GAAIvxC,SACA+L,OAAQ,CACZtrB,SAAQ6E,KAAK,WAAY,SAAU3C,OAC5B0uD,WAAW1uD,SAGXopB,QACHvrB,MAAMkF,OAAOhF,MAAM+wD,eACnB1lC,OAAQ,GAEV1nB,SAAS2C,OAAOgZ,SAChBrd,MAAMkT,oBAERpV,QAAQ6E,KAAK,iBAAkB,SAAU3C,OACvC0B,SAAS2C,OAAOgZ,SAChBA,QAAU3b,SAAS,WACjB7D,MAAM0B,MAAMxB,MAAMgxD,eAClB1xC,QAAU,KACV+L,OAAQ,GACP,YAgBb5rB,QAAQC,OAAO,aAAc,cAC5BC,UAAU,WAAY,WACrB,OACEG,OAAS,EACT4C,QAAW,YACX7C,KAAQ,SAASC,MAAOC,QAASC,OAY/B,QAASosD,cACPtsD,MAAMwwD,MAAMlE,WAAWrsD,SAEzB,QAASssD,gBACPvsD,MAAMwwD,MAAMjE,aAAatsD,SAfvBC,MAAMixD,gBACRnxD,MAAMc,OAAOZ,MAAMixD,gBAAiB,SAAUluD,OACxCA,MACFqpD,aAEAC,iBAIJD,kBAYP,SAAU3sD,SAAU,YA6CnB,SAASyxD,uBAAsBt4C,QAC7B,MAAOA,QAAO6yB,OAAO,GAAGmD,cAAgBh2B,OAAOwgB,MAAM,GA7CvD,GAAI15B,QAASD,QAAQC,OAAO,eAAgB,cACxCunD,QACFmJ,aAAc,QAAS,YACvBe,cAAe,SACfC,WAAY,QAAS,UACrBC,YAAa,SAAU,UACvBlB,gBAAiB,SAAU,UAC3BmB,WAAY,SACZjG,WAAY,QAAS,YACrBkG,eACAlB,YACArD,YACAp6C,OAAQ,WAAY,SAGtBnT,SAAQgC,QAAQwlD,OAAQ,SAAUuK,UAAWtB,WAC3C,GAAIlpC,MAAO,OAASkqC,sBAAsBhB,UAC9B,oBAARlpC,OACFA,KAAO,qBAETtnB,OAAOC,UAAUqnB,MAAO,WACtB,OACEtkB,QAAS,YACT1B,YAAa,SAAU,SAAU,SAAUC,OAAQC,QACjDD,OAAOe,IAAI,SAAWkuD,UAAW,WAC/B,GAAIuB,UAAW37C,MAAMqhB,UAAUiC,MAAMnsB,KAAKmQ,WACtCnb,MAAQwvD,SAASxyB,OAErB,IAAIh+B,OAAOqvD,QAAUmB,SAASxyB,QAA9B,CAGA,GAAIqqB,QACJ7pD,SAAQgC,QAAQ+vD,UAAW,SAASzuD,MAAOyO,KACzC83C,KAAKvmD,OAAS0uD,SAASjgD,OAErBvQ,OAAOO,MAAMN,OAAO8lB,MAAOsiC,SAAU,GACvCrnD,MAAMkT,6BAWlB1V,SACFA,QAAQC,OAAO,YAAa,cAC3BC,UAAU,WAAY,WACrB,OACEG,OAAS,EACT4C,QAAW,YACX7C,KAAQ,SAASC,MAAOC,QAASC,OAC/B,GAAI4nD,MAAO5nD,MAAM0xD,OACjB5xD,OAAMc,OAAOgnD,KAAM,SAAUA,MAC3B,GAAKA,KAAL,CAGA,GAAI+J,YAAa,GAAIC,WACrBD,YAAWE,cAAcjK,KAAKA,MAC9B+J,WAAWnkB,OAAS,SAAUvrC,OAC5BnC,MAAMkF,OAAO,WACXhF,MAAMovC,KAAK,MAAOntC,MAAMiZ,OAAOmH,mBAO3C5iB,QAAQC,OAAO,kBAAmB,cACjCC,UAAU,iBAAkB,WAC3B,OACEG,OAAS,EACT4C,QAAW,YACX7C,KAAQ,SAASC,OACfA,MAAMgyD,UAAYhyD,MAAMwwD,MAAMzK,WAIpCpmD,QAAQC,OAAO,QAAS,gBAAiB,YAAa,cAAe,WACnE,YAAa,iBAAkB,WAAY,oBCnzD5C,SAAUs3B,OAAQv3B,SAClB,YA2hBA,SAASsyD,UAASxhC,GACjB,KAAK,WAAaA,IAAQ,WAAaA,IAAI,CAC1C,GAAIyhC,SAAUzhC,EAAEyhC,SAAWzhC,EAAEC,cAAcwhC,OACxCA,UAAWA,QAAQjsD,SACrBwqB,EAAE0hC,QAAUD,QAAQ,GAAGC,QACvB1hC,EAAE2hC,QAAUF,QAAQ,GAAGE,SAExB3hC,EAAEpb,kBAIJ,QAASg9C,oBAAmBpyD,SAE3B,GADAA,QAAUA,QAAQ,GACfA,QAAQqyD,uBACV,MAAO3yD,SAAQM,QAAQA,QAAQqyD,uBAG/B,KADA,GAAIC,KAAMtyD,QAAQuyD,gBACL,MAAPD,KAA+B,GAAhBA,IAAIE,UACxBF,IAAMA,IAAIC,eACX,OAAO7yD,SAAQM,QAAQsyD,KAIzB,QAASG,qBAAoBzyD,QAAS0yD,YACrC,GAAIC,UAAWP,mBAAmBpyD,QAC/B2yD,UAAS3sD,OAAS,EACpB2sD,SAASh3C,MAAM+2C,YAGf1yD,QAAQ6I,SAASkuB,QAAQ27B,YAgB3B,QAASE,wBAAuB5yD,QAAS6yD,UAExC,MADG7yD,mBAAmBN,SAAQM,UAASA,QAAUA,QAAQ,IACjC,OAArB8yD,iBACK9yD,QAAQ8yD,kBAAkBD,UADlC,OArkBD,GAAIlzD,QAASD,QAAQC,OAAO,2BAC5BA,QAAOC,UAAU,UAAW,WAC3B,QAASmzD,eAAcvoC,KAAMwoC,QAASC,QACrC,MAAOA,QAASzoC,KAAK0oC,EAAIF,QAAQE,EAAI,EAAI1oC,KAAKhgB,EAAIwoD,QAAQxoD,EAAI,EAE/D,QAAS2oD,qBAAoB1hD,KAC5B,MAAO2hD,WAAU3hD,KAElB,QAAS4hD,wBAAuB5hD,WACxB2hD,WAAU3hD,KAGlB,GAAI6hD,mBACAF,UAAYr7B,OAAO83B,OAAO,KAG9B,QACCttD,SAAU,IACVtB,YAAa,SAAU,SAAU,eAAgB,SAAU,SAASC,OAAQC,OAAQiQ,aAAcD,QACjG,GAAIoiD,QAASniD,aAAajQ,OAAOqyD,QAAQtyD,SAAWA,OAAO2Q,GACvDuhD,WAAUG,UAASH,UAAUG,WAEjC,IACIE,YACAC,aACAt5C,QACAu5C,QACAC,UACAC,QACAZ,QAAe,EACfa,OAAe3iD,OAAOhQ,OAAO4yD,SAGjC5yD,QAAO6yD,UAAY7yD,OAAO8yD,UAAU,GAAGjI,WAAW,eAClD7qD,OAAO6yD,UAAY7yD,OAAO6yD,WAAa7yD,OAAO6yD,UAAUhxD,MAExD7B,OAAO+yD,SAAW/yD,OAAO8yD,UAAU,GAAGjI,WAAW,cACjD7qD,OAAO+yD,SAAW/yD,OAAO+yD,UAAY/yD,OAAO+yD,SAASlxD,KAGrD,IAAImxD,SAAUhjD,OAAOhQ,OAAO6yD,WACxBI,OAASjjD,OAAOhQ,OAAO+yD,SAM3B,IAJA7yD,KAAKiyD,kBAAoB,WACxB,MAAOA,oBAGLnyD,OAAOkzD,QAET,GADApB,OAA2B,SAAlB9xD,OAAOkzD,QAAoB,EAAyB,UAAlBlzD,OAAOkzD,QAAqB,EAAQ,KACjE,OAAXpB,OACF,KAAM,yCAIP/xD,QAAOozD,iBAAiB,WACvB,MAAOnB,qBAAoBI,SACzB,SAASh6B,YACX05B,QAAS,CACT,IAAIj7B,OAAQuB,WAAWhD,OAAO,SAASZ,MACtC,OAAQA,KAAK4+B,YACXhrD,IAAI,SAASosB,MACf,OACC6+B,KAAM7+B,KAAK8+B,UAAUhgC,GACrBjqB,EAAGmrB,KAAK31B,QAAQ,GAAG6O,wBAAwBR,OAGzCqmD,KAAO38B,OAAO83B,OAAO,KACzB73B,OAAMt2B,QAAQ,SAASi0B,MACnB++B,KAAK/+B,KAAK6+B,MACZE,KAAK/+B,KAAK6+B,MAAMxyD,KAAK2zB,KAAKnrB,GAE1BkqD,KAAK/+B,KAAK6+B,OAAS7+B,KAAKnrB,KAE1ButB,OAAO7jB,KAAKwgD,MAAMhzD,QAAQ,SAAS+P,KAClCijD,KAAKjjD,KAAKpJ,OACVqsD,KAAKjjD,KAAK/P,QAAQ,SAASi0B,KAAMvzB,OAC7BA,MAAQsyD,KAAKjjD,KAAKzL,OAAS,GAC1B2vB,KAAO,GAAKA,OAAS++B,KAAKjjD,KAAKrP,MAAQ,KACzC6wD,QAAS,QAQf5xD,MAAKszD,YAAc,SAASvP,KAAMwP,MAAOC,UAAWC,WAAYC,cAAeC,gBAAiBC,kBAC/F,GAAIC,QAASL,UAAU,GAAGhmD,uBACJ,aAAnBu2C,KAAK+P,YACPP,OACC1B,KAAMgC,OAAO5mD,KAAO4mD,OAAOpmD,MAAM,GACjCtE,KAAM0qD,OAAO7mD,IAAM6mD,OAAO50D,OAAO,KAGnCgzD,mBAAoB,EACpBG,cACIC,eACAqB,eACFrB,aAAeqB,cAAcj1C,QAC7B4zC,aAAavzD,YAAY,aAGzBuzD,aAAeoB,WAAWh1C,QAC1B4zC,aAAatzD,SAAS,wBACtBszD,aAAatzD,SAAS,kBACtBszD,aAAahzD,KACZJ,OAAU40D,OAAO50D,OAAS,KAC1BwO,MAASomD,OAAOpmD,MAAQ,QAI1BgmD,WAAWn5C,MAAM+3C,cACjBoB,WAAW10D,SAAS,WAGpBwzD,UAAYkB,WACZ16C,QAAUgrC,KACVuO,QAAUkB,UAEVV,QAAQjzD,QACPyyD,QAASA,QACTyB,MAAOJ,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OAC7Cs1D,OAAQJ,iBACRr/B,MAAOo/B,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OAAOk1D,oBAErD/zD,OAAOo0D,OAASp0D,OAAOo0D,MAAM94C,SAAWtb,OAAO+D,UAIhD0uD,QAAQ,GAAGvqC,YACV8pC,EAAG0B,MAAM1B,EAAIlhC,SAASzR,KAAK5R,WAAaimD,MAAMzmD,OAAO+kD,EAAEgC,OAAOpmD,MAC9DtE,EAAGoqD,MAAMpqD,EAAIwnB,SAASzR,KAAK9R,UAAYmmD,MAAMzmD,OAAO3D,EAAE0qD,OAAO50D,SAI9D6yD,oBAAoBI,QAAQ7xD,QAAQ,SAAS6zD,GAAInzD,OAChD,GAAuB,MAApBgjD,KAAKoQ,aAGL5C,uBAAuB2C,GAAGv1D,QAASolD,KAAKoQ,cACxC5C,uBAAuB2C,GAAGv1D,QAASolD,KAAKoQ,YAAc,MAJzD,CAOA,GAAIC,MAAOF,GAAGv1D,QAAQ,GAAG6O,wBACrBmB,QACHkjD,KAAMuC,KAAKnnD,KAAOmnD,KAAK3mD,MAAM,GAC7BtE,KAAMirD,KAAKpnD,IAAMonD,KAAKn1D,OAAO,GAE1Bi1D,IAAGhB,YACLgB,GAAGv1D,QAAQ,GAAGO,eAAgBg1D,GAAGv1D,QAAQ,GAAG01D,aAC7CjC,WAAWzxD,MACVhC,QAASu1D,GAAGv1D,QACZ21D,GAAI3lD,OAAOkjD,EAAI0B,MAAM1B,IAAIljD,OAAOkjD,EAAI0B,MAAM1B,IAAMljD,OAAOxF,EAAIoqD,MAAMpqD,IAAIwF,OAAOxF,EAAIoqD,MAAMpqD,GACtFs+B,KAAMysB,GAAGd,UACTmB,YAAaL,GAAGM,WAChBl6C,MAAOo3C,cAAc/iD,OAAQ4kD,MAAO3B,UAGnCsC,GAAGhB,YAAcgB,GAAGv1D,QAAQ,GAAG81D,cAAc,sDAC/CrC,WAAWzxD,MACVhC,QAASu1D,GAAGv1D,QACZ21D,GAAI3lD,OAAOkjD,EAAI0B,MAAM1B,IAAIljD,OAAOkjD,EAAI0B,MAAM1B,IAAMljD,OAAOxF,EAAIoqD,MAAMpqD,IAAIwF,OAAOxF,EAAIoqD,MAAMpqD,GACtFs+B,KAAMysB,GAAGd,UACTmB,YAAa,EACbrB,WAAW,MAId,IAAIwB,OAAQrC,aAAa,GAAG7kD,wBACxBmnD,SACH9C,KAAM6C,MAAMznD,KAAOynD,MAAMjnD,MAAM,GAC/BtE,KAAMurD,MAAM1nD,IAAM0nD,MAAMz1D,OAAO,GAEhCmzD,YAAWzxD,MACV2zD,GAAIK,QAAQ9C,EAAI0B,MAAM1B,IAAI8C,QAAQ9C,EAAI0B,MAAM1B,IAAM8C,QAAQxrD,EAAIoqD,MAAMpqD,IAAIwrD,QAAQxrD,EAAIoqD,MAAMpqD,GAC1FxK,QAAS0zD,aACTj2B,aAAa,IAEdg2B,WAAWprD,KAAK,SAASC,EAAGC,GAC3B,MAAOD,GAAEqtD,EAAIptD,EAAEotD,IAGhBlC,WAAW/xD,QAAQ,SAASu0D,KAAM7zD,OACpB,IAAVA,OAAgB6zD,KAAKx4B,aAAgBw4B,KAAK1B,UAQ3B,IAAVnyD,OAAe6zD,KAAK1B,WAC3BV,QAAUoC,KACVA,KAAKj2D,QAAQwD,OAAOkwD,eAGpBuC,KAAKj2D,QAAQG,YAAY,iBAZzB0zD,QAAUoC,KACVA,KAAKj2D,QAAQI,SAAS,gBACnB61D,KAAKt6C,MACPs6C,KAAKj2D,QAAQ2b,MAAM+3C,cAEnBjB,oBAAoBwD,KAAKj2D,QAAS0zD,kBAWtCryD,KAAK60D,MAAQ,SAASlB,gBAAiB5yD,MAAOgY,SA2B7C,QAAS+7C,eAmBR,GAlBA7C,mBAAoB,EACpBI,aAAaj4C,SACbk4C,QAAQl4C,SACRm4C,UAAUzzD,YAAY,WAEtBszD,WAAa,OACbC,aAAe,OACft5C,QAAU,OACVu5C,QAAU,OACVC,UAAY,OAGZQ,OAAOlzD,QACNk0D,MAAOJ,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OAC7Cs1D,OAAQjzD,MACRwzB,MAAOo/B,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OAAOqC,SAGlDyxD,QAAQ,CACVA,QAAQ7zD,QAAQG,YAAY,eAC5B,IAAIi2D,SAAUpB,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OAAOuC,OAAOF,MAAO,GACrEwzD,YAAc/B,QAAQ+B,WACvB/B,SAAQ/qB,OAASksB,iBAAmBnB,QAAQ+B,YAAcxzD,OAC5DwzD,cACE/B,QAAQl4C,OACVi6C,cACD/B,QAAQ/qB,KAAK71B,MAAM4gD,QAAQ/qB,KAAK/oC,OAAOuC,OAAOszD,YAAa,EAAGQ,QAAQ,KAGnEvC,QAAQ/qB,OAASksB,iBAAmB5yD,QAAUwzD,cAChD9B,OAAO5yD,QACNm1D,QAASxC,QAAQ/qB,KAAK71B,MAAM4gD,QAAQ/qB,KAAK/oC,OACzCu2D,UAAWtB,gBAAgB/hD,MAAM+hD,gBAAgBj1D,OACjD61B,MAAOwgC,QAAQ,GACfG,SAAUX,YACVY,WAAYp0D,QAIfyxD,QAAU,OAEV3yD,OAAOo0D,OAASp0D,OAAOo0D,MAAM94C,SAAWtb,OAAO+D,SApEhD,GAAIyuD,aAEJ,GAAGt5C,QAAQq8C,OAAO,CACjB,GAAIC,iBAAkBhD,aAAa,GAAG7kD,wBAClC8nD,WAAahD,QAAQ,GAAG9kD,wBACxB+nD,SAAW9kD,KAAK+kD,KACnB/kD,KAAKglD,IAAIH,WAAWtoD,IAAMqoD,gBAAgBroD,IAAK,GAC/CyD,KAAKglD,IAAIH,WAAWroD,KAAOooD,gBAAgBpoD,KAAM,IAG9CyoD,UAAY38C,QAAQq8C,OAAOG,SAAS,GACxCG,UAAWjlD,KAAK6F,IAAIo/C,UAAW38C,QAAQq8C,SAEtC,WAAY,QAAS,OAAQ,MAAO,IAAI/0D,QAAQ,SAASqmB,QACH,mBAA5C4rC,SAAQ,GAAG/lD,MAAMma,OAAS,gBACnC4rC,QAAQ,GAAG/lD,MAAMma,OAAS,cAAgB,OAASgvC,SAAW,aAEhE7M,WAAWiM,YAAaY,UACxBpD,QAAQjzD,KACP2N,IAAOqoD,gBAAgBroD,IAAM2jB,SAASzR,KAAK9R,UAAY,KACvDH,KAAQooD,gBAAgBpoD,KAAO0jB,SAASzR,KAAK5R,WAAa,WAI3DwnD,gBAgDF90D,KAAK21D,sBAAwB,SAASzB,IACrCpC,oBAAoBI,QAAQvxD,KAAKuzD,KAElCl0D,KAAK41D,2BAA6B,SAAS1B,IAC1C,GAAI2B,OAAQ/D,oBAAoBI,QAC5BnxD,MAAQ80D,MAAM70D,QAAQkzD,GACvBnzD,OAAQ,KACV80D,MAAM50D,OAAOF,MAAO,GACA,IAAjB80D,MAAMlxD,QACRqtD,uBAAuBE,gBAO7B5zD,OAAOC,UAAU,UAAW,SAAU,SAASuR,QAC9C,OACC5O,SAAU,IACVI,QAAS,UACT1B,YAAa,SAAU,SAASC,QAC/BA,OAAOi2D,MAAQ91D,KACfA,KAAKozD,QAAU,WACd,MAAOvzD,QAAOszD,MAEfnzD,KAAK60D,MAAQ,SAAS9zD,MAAOgY,SAC5BlZ,OAAOk2D,cAAclB,MAAMh1D,OAAOszD,KAAMpyD,MAAOgY,YAGjDra,OAAO,EACPD,KAAM,SAASoB,OAAQqG,SAAUpG,OAAQk2D,WACxC,IAAIl2D,OAAOm2D,OAAQ,KAAM,IAAIz9C,OAAM,oBACnC,IAAI5G,OAAQ9B,OAAOhQ,OAAOm2D,OAC1B,KAAIrkD,MAAMwH,OAAQ,KAAM,IAAIZ,OAAM,uBAElC3Y,QAAOszD,MACN//B,GAAIvzB,OAAO2Q,IACX7R,QAASuH,SACT0L,MAAOA,MACPlT,MAAOmB,QAERA,OAAOk2D,cAAgBC,SAEvB,IAAIE,eACHv3D,QAASuH,SACTktD,QAASvzD,OAAOi2D,MAAM1C,QACtBF,WAAW,EAEZ8C,WAAUL,sBAAsBO,cAChCr2D,OAAOe,IAAI,WAAY,WACtBo1D,UAAUJ,2BAA2BM,qBAMzC53D,OAAOC,UAAU,aAAc,SAAU,SAASuR,QACjD,OACC5O,SAAU,IACVI,SAAU,UAAW,WACrB1B,YAAa,SAAU,SAASC,QAC/BA,OAAOi2D,MAAQ91D,OAEhBvB,KAAM,SAASoB,OAAQqG,SAAUpG,OAAQq2D,cA0CxC,QAASC,aAAYjnC,GA8EpB,QAASknC,aAAYlnC,GACpBwhC,SAASxhC,GACLmnC,eACHpwD,SAASsB,SAASkuB,QAAQjX,OAC1B63C,cAAe,GAEhBH,aAAa,GAAG7C,YAAYvP,MAC3B8N,EAAG1iC,EAAE0hC,QACL1nD,EAAGgmB,EAAE2hC,QACLhkD,OAAQypD,eACN93C,MAAOvY,SAAUk2B,YAAa+5B,aAAa,GAAG/C,UAAWvzD,OAAOm0D,QArFpE,GAFArD,SAASxhC,IAENgnC,aAAa,GAAGlE,sBACJ,GAAZ9iC,EAAE+e,QAA0B,cAAX/e,EAAE7sB,MAAtB,CAEAg0D,cAAe,CACf,IAAIvS,MAAOj0C,OAAOhQ,OAAO0zD,WAAW3zD,OAMpC,IALAkkD,KAAO1lD,QAAQyH,WACdguD,UAAW,UACXsB,OAAQ,IACRjB,YAAa,QACXpQ,MACAA,KAAKoQ,YACP,GAAIqC,iBAAkBC,eAAe5qD,KAAK3F,SAAU69C,KAAKoQ,aAAa,GAAG3mD,uBAG1E,IAEIiR,OAFA3E,OAAS5T,SACTwwD,WAAaxwD,SAAS,GAAGsH,uBAGzBmpD,UAAQA,OAASR,aAAa,GAAGQ,QACjCv6B,cAAaA,YAAc+5B,aAAa,GAAG/5B,aAC5Cu6B,QACFl4C,MAAQk4C,OAAOl4C,QACfA,MAAM3f,YAAY,WAClB2f,MAAMpf,KACL4N,KAAQypD,WAAWzpD,KAAO0jB,SAASzR,KAAK5R,WAAa,KACrDN,IAAO0pD,WAAW1pD,IAAM2jB,SAASzR,KAAK9R,UAAY,OAEnD0M,OAAO/a,SAAS,0BAGhB0f,MAAQ3E,OAAO2E,QACfA,MAAM1f,SAAS,aAAaM,KAC3B4N,KAAQypD,WAAWzpD,KAAO0jB,SAASzR,KAAK5R,WAAa,KACrDN,IAAO0pD,WAAW1pD,IAAM2jB,SAASzR,KAAK9R,UAAY,KAClDK,MAASipD,WAAWjpD,MAAQ,QAI9BgR,MAAM,GAAGsJ,WAAa,SAAS6uC,QAC9B,GAAIC,YAAaD,OAAO/E,EACpBiF,UAAYF,OAAOztD,EACnBmsD,WAAa72C,MAAM,GAAGjR,wBAEtB0R,KAAOyR,SAASzR,IAEjBs3C,mBACCM,UAAYN,gBAAgBxpD,IAAMkS,KAAK9R,YACzC0pD,UAAYN,gBAAgBxpD,IAAMkS,KAAK9R,WACrC0pD,UAAYxB,WAAWr2D,OAASu3D,gBAAgBxpD,IAAMkS,KAAK9R,UAAYopD,gBAAgBv3D,SACzF63D,UAAYN,gBAAgBxpD,IAAMkS,KAAK9R,UAAYopD,gBAAgBv3D,OAASq2D,WAAWr2D,QACrF43D,WAAaL,gBAAgBvpD,KAAOiS,KAAK5R,aAC3CupD,WAAaL,gBAAgBvpD,KAAOiS,KAAK5R,YACvCupD,WAAavB,WAAW7nD,MAAQ+oD,gBAAgBvpD,KAAOiS,KAAK5R,WAAakpD,gBAAgB/oD,QAC3FopD,WAAaL,gBAAgBvpD,KAAOiS,KAAK5R,WAAakpD,gBAAgB/oD,MAAQ6nD,WAAW7nD;AAE3FzN,KAAKuM,MAAMU,KAAO4pD,WAAa33C,KAAK5R,WAAa,KACjDtN,KAAKuM,MAAMS,IAAM8pD,UAAY53C,KAAK9R,UAAY,KAG/C,IAAImpD,gBACH1E,GAAI1iC,EAAE0hC,QAAU6F,WAAWzpD,MAAMypD,WAAWjpD,MAC5CtE,GAAIgmB,EAAE2hC,QAAU4F,WAAW1pD,KAAK0pD,WAAWz3D,OAE5CiD,MAAKnD,SAAS,0BACdmD,KAAK4Z,GAAG,sBAAuBu6C,aAAav6C,GAAG,+BAAgC,QAASi7C,SAAQ5nC,GAC/FjtB,KAAKknD,IAAI,sBAAuBiN,aAChCn0D,KAAKknD,IAAI,mBAAoB2N,SAC7B70D,KAAKpD,YAAY,0BACdw3D,aACFH,aAAa,GAAGtB,MAAMh1D,OAAOm0D,OAAQjQ,MAErC79C,SAASpH,YAAY,2BAnHxB,GAAIk4D,kBACHr4D,QAASuH,SACTktD,QAAS+C,aAAa,GAAG/C,QACzBoB,SAAU,WACT,MAAO30D,QAAOm0D,QAGhBmC,cAAa,GAAGR,sBAAsBqB,iBACtCn3D,OAAOe,IAAI,WAAY,WACtBu1D,aAAa,GAAGP,2BAA2BoB,kBAG5C,IAAIC,QAAS/wD,QACb+wD,QAAOn7C,GAAG,uBAAwBs6C,aAClCv2D,OAAOL,OAAO,eAAgB,SAAS03D,cACnCA,eACFD,OAAO7N,IAAI,uBAAwBgN,aACnCa,OAASC,aACTD,OAAOn7C,GAAG,uBAAwBs6C,eAIpC,IAAIO,OACJ92D,QAAOL,OAAO,eAAgB,SAAS23D,cACnCA,eACFR,OAASQ,eAIX,IAAI/6B,YACJv8B,QAAOL,OAAO,oBAAqB,SAAS43D,mBACxCA,oBACFh7B,YAAcg7B,oBAIhB,IAGId,cAFAp0D,MADO7D,QAAQM,QAAQgyB,SAASzR,MACzB7gB,QAAQM,QAAQgyB,SAAS/iB,uBAmGvCtP,OAAOC,UAAU,WAAY,WAC5B,OACC+C,QAAS,cACT7C,KAAM,SAASoB,OAAQqG,SAAUpG,OAAQg2D,OACrCA,QACFA,MAAMmB,OAAS/wD,SAAS0W,IAAIk5C,MAAMmB,aAKtC34D,OAAOC,UAAU,WAAY,WAC5B,OACC+C,SAAU,WAAY,eACtB7C,KAAM,SAASoB,OAAQqG,SAAUpG,OAAQg2D,OACxC5vD,SAASnH,SAAS,aAAaA,SAAS,WACrC+2D,MAAM,GACRA,MAAM,GAAGa,OAASzwD,SACX4vD,MAAM,KACbA,MAAM,GAAGa,OAASzwD,cAKtB5H,OAAOC,UAAU,gBAAiB,WACjC,OACC+C,SAAU,WAAY,eACtB7C,KAAM,SAASoB,OAAQqG,SAAUpG,OAAQg2D,OACxC5vD,SAASnH,SAAS,kBAAkBA,SAAS,WAC1C+2D,MAAM,GACRA,MAAM,GAAG15B,YAAcl2B,SAChB4vD,MAAM,KACbA,MAAM,GAAG15B,YAAcl2B,cAK3B7H,QAAQM,QAAQgyB,SAAS0mC,MAAMl1D,QAC9B,2TAsBCqG,KAAK,IAmCP,IAAI8uD,KAAM3mC,SAAS/iB,gBACnB6jD,iBAAmB6F,IAAIjkC,QAAU,UAC5BikC,IAAIC,gBAAkB,kBACtBD,IAAIE,cAAgB,gBACpBF,IAAIG,sBAAwB,wBAC5BH,IAAII,UAAY,YAChBJ,IAAIK,kBAAoB,oBACxBL,IAAIM,WAAa,aACjBN,IAAIO,mBAAqB,qBAAuB,IACrD,IAAuB,MAApBpG,iBACF,KAAM,6DAQP,IAAIgF,gBAAiBp4D,QAAQM,QAAQo3B,UAAU+hC,SAAW,SAAUtG,UAEnE,IADA,GAAIrlD,IAAKnM,KAAK,GAAG+3D,WACX5rD,KAAOwkB,SAAS/iB,kBAAoBzB,GAAGslD,kBAAkBD,WAC9DrlD,GAAKA,GAAG4rD,UAET,OAAG5rD,IAAGslD,kBAAkBD,UAChBnzD,QAAQM,QAAQwN,IAEhB9N,QAAQM,UAM2B,mBAAlCN,SAAQM,QAAQo3B,UAAUnZ,MACnCve,QAAQM,QAAQo3B,UAAUnZ,IAAM,SAASuM,MACxC,GAAIzkB,GAAGszD,IAAM35D,QAAQM,SAErB,KADAwqB,KAAO9qB,QAAQM,QAAQwqB,MACnBzkB,EAAE,EAAEA,EAAE1E,KAAK2E,OAAOD,IACrBszD,IAAIr3D,KAAKX,KAAK0E,GAEf,KAAIA,EAAE,EAAEA,EAAEykB,KAAKxkB,OAAOD,IACrBszD,IAAIr3D,KAAKwoB,KAAKzkB,GAEf,OAAOszD,QAIPpiC,OAAQA,OAAOv3B","file":"vendors.min.js","sourcesContent":["/*\n * angular-ui-bootstrap\n * http://angular-ui.github.io/bootstrap/\n\n * Version: 0.13.0 - 2015-05-02\n * License: MIT\n */\nangular.module(\"ui.bootstrap\", [\"ui.bootstrap.tpls\", \"ui.bootstrap.collapse\",\"ui.bootstrap.accordion\",\"ui.bootstrap.alert\",\"ui.bootstrap.bindHtml\",\"ui.bootstrap.buttons\",\"ui.bootstrap.carousel\",\"ui.bootstrap.dateparser\",\"ui.bootstrap.position\",\"ui.bootstrap.datepicker\",\"ui.bootstrap.dropdown\",\"ui.bootstrap.modal\",\"ui.bootstrap.pagination\",\"ui.bootstrap.tooltip\",\"ui.bootstrap.popover\",\"ui.bootstrap.progressbar\",\"ui.bootstrap.rating\",\"ui.bootstrap.tabs\",\"ui.bootstrap.timepicker\",\"ui.bootstrap.transition\",\"ui.bootstrap.typeahead\"]);\nangular.module(\"ui.bootstrap.tpls\", [\"template/accordion/accordion-group.html\",\"template/accordion/accordion.html\",\"template/alert/alert.html\",\"template/carousel/carousel.html\",\"template/carousel/slide.html\",\"template/datepicker/datepicker.html\",\"template/datepicker/day.html\",\"template/datepicker/month.html\",\"template/datepicker/popup.html\",\"template/datepicker/year.html\",\"template/modal/backdrop.html\",\"template/modal/window.html\",\"template/pagination/pager.html\",\"template/pagination/pagination.html\",\"template/tooltip/tooltip-html-popup.html\",\"template/tooltip/tooltip-html-unsafe-popup.html\",\"template/tooltip/tooltip-popup.html\",\"template/tooltip/tooltip-template-popup.html\",\"template/popover/popover-template.html\",\"template/popover/popover.html\",\"template/progressbar/bar.html\",\"template/progressbar/progress.html\",\"template/progressbar/progressbar.html\",\"template/rating/rating.html\",\"template/tabs/tab.html\",\"template/tabs/tabset.html\",\"template/timepicker/timepicker.html\",\"template/typeahead/typeahead-match.html\",\"template/typeahead/typeahead-popup.html\"]);\nangular.module('ui.bootstrap.collapse', [])\n\n  .directive('collapse', ['$animate', function ($animate) {\n\n    return {\n      link: function (scope, element, attrs) {\n        function expand() {\n          element.removeClass('collapse').addClass('collapsing');\n          $animate.addClass(element, 'in', {\n            to: { height: element[0].scrollHeight + 'px' }\n          }).then(expandDone);\n        }\n\n        function expandDone() {\n          element.removeClass('collapsing');\n          element.css({height: 'auto'});\n        }\n\n        function collapse() {\n          element\n            // IMPORTANT: The height must be set before adding \"collapsing\" class.\n            // Otherwise, the browser attempts to animate from height 0 (in\n            // collapsing class) to the given height here.\n            .css({height: element[0].scrollHeight + 'px'})\n            // initially all panel collapse have the collapse class, this removal\n            // prevents the animation from jumping to collapsed state\n            .removeClass('collapse')\n            .addClass('collapsing');\n\n          $animate.removeClass(element, 'in', {\n            to: {height: '0'}\n          }).then(collapseDone);\n        }\n\n        function collapseDone() {\n          element.css({height: '0'}); // Required so that collapse works when animation is disabled\n          element.removeClass('collapsing');\n          element.addClass('collapse');\n        }\n\n        scope.$watch(attrs.collapse, function (shouldCollapse) {\n          if (shouldCollapse) {\n            collapse();\n          } else {\n            expand();\n          }\n        });\n      }\n    };\n  }]);\n\nangular.module('ui.bootstrap.accordion', ['ui.bootstrap.collapse'])\n\n.constant('accordionConfig', {\n  closeOthers: true\n})\n\n.controller('AccordionController', ['$scope', '$attrs', 'accordionConfig', function ($scope, $attrs, accordionConfig) {\n\n  // This array keeps track of the accordion groups\n  this.groups = [];\n\n  // Ensure that all the groups in this accordion are closed, unless close-others explicitly says not to\n  this.closeOthers = function(openGroup) {\n    var closeOthers = angular.isDefined($attrs.closeOthers) ? $scope.$eval($attrs.closeOthers) : accordionConfig.closeOthers;\n    if ( closeOthers ) {\n      angular.forEach(this.groups, function (group) {\n        if ( group !== openGroup ) {\n          group.isOpen = false;\n        }\n      });\n    }\n  };\n\n  // This is called from the accordion-group directive to add itself to the accordion\n  this.addGroup = function(groupScope) {\n    var that = this;\n    this.groups.push(groupScope);\n\n    groupScope.$on('$destroy', function (event) {\n      that.removeGroup(groupScope);\n    });\n  };\n\n  // This is called from the accordion-group directive when to remove itself\n  this.removeGroup = function(group) {\n    var index = this.groups.indexOf(group);\n    if ( index !== -1 ) {\n      this.groups.splice(index, 1);\n    }\n  };\n\n}])\n\n// The accordion directive simply sets up the directive controller\n// and adds an accordion CSS class to itself element.\n.directive('accordion', function () {\n  return {\n    restrict:'EA',\n    controller:'AccordionController',\n    transclude: true,\n    replace: false,\n    templateUrl: 'template/accordion/accordion.html'\n  };\n})\n\n// The accordion-group directive indicates a block of html that will expand and collapse in an accordion\n.directive('accordionGroup', function() {\n  return {\n    require:'^accordion',         // We need this directive to be inside an accordion\n    restrict:'EA',\n    transclude:true,              // It transcludes the contents of the directive into the template\n    replace: true,                // The element containing the directive will be replaced with the template\n    templateUrl:'template/accordion/accordion-group.html',\n    scope: {\n      heading: '@',               // Interpolate the heading attribute onto this scope\n      isOpen: '=?',\n      isDisabled: '=?'\n    },\n    controller: function() {\n      this.setHeading = function(element) {\n        this.heading = element;\n      };\n    },\n    link: function(scope, element, attrs, accordionCtrl) {\n      accordionCtrl.addGroup(scope);\n\n      scope.$watch('isOpen', function(value) {\n        if ( value ) {\n          accordionCtrl.closeOthers(scope);\n        }\n      });\n\n      scope.toggleOpen = function() {\n        if ( !scope.isDisabled ) {\n          scope.isOpen = !scope.isOpen;\n        }\n      };\n    }\n  };\n})\n\n// Use accordion-heading below an accordion-group to provide a heading containing HTML\n// <accordion-group>\n//   <accordion-heading>Heading containing HTML - <img src=\"...\"></accordion-heading>\n// </accordion-group>\n.directive('accordionHeading', function() {\n  return {\n    restrict: 'EA',\n    transclude: true,   // Grab the contents to be used as the heading\n    template: '',       // In effect remove this element!\n    replace: true,\n    require: '^accordionGroup',\n    link: function(scope, element, attr, accordionGroupCtrl, transclude) {\n      // Pass the heading to the accordion-group controller\n      // so that it can be transcluded into the right place in the template\n      // [The second parameter to transclude causes the elements to be cloned so that they work in ng-repeat]\n      accordionGroupCtrl.setHeading(transclude(scope, angular.noop));\n    }\n  };\n})\n\n// Use in the accordion-group template to indicate where you want the heading to be transcluded\n// You must provide the property on the accordion-group controller that will hold the transcluded element\n// <div class=\"accordion-group\">\n//   <div class=\"accordion-heading\" ><a ... accordion-transclude=\"heading\">...</a></div>\n//   ...\n// </div>\n.directive('accordionTransclude', function() {\n  return {\n    require: '^accordionGroup',\n    link: function(scope, element, attr, controller) {\n      scope.$watch(function() { return controller[attr.accordionTransclude]; }, function(heading) {\n        if ( heading ) {\n          element.html('');\n          element.append(heading);\n        }\n      });\n    }\n  };\n})\n\n;\n\nangular.module('ui.bootstrap.alert', [])\n\n.controller('AlertController', ['$scope', '$attrs', function ($scope, $attrs) {\n  $scope.closeable = 'close' in $attrs;\n  this.close = $scope.close;\n}])\n\n.directive('alert', function () {\n  return {\n    restrict:'EA',\n    controller:'AlertController',\n    templateUrl:'template/alert/alert.html',\n    transclude:true,\n    replace:true,\n    scope: {\n      type: '@',\n      close: '&'\n    }\n  };\n})\n\n.directive('dismissOnTimeout', ['$timeout', function($timeout) {\n  return {\n    require: 'alert',\n    link: function(scope, element, attrs, alertCtrl) {\n      $timeout(function(){\n        alertCtrl.close();\n      }, parseInt(attrs.dismissOnTimeout, 10));\n    }\n  };\n}]);\n\nangular.module('ui.bootstrap.bindHtml', [])\n\n  .directive('bindHtmlUnsafe', function () {\n    return function (scope, element, attr) {\n      element.addClass('ng-binding').data('$binding', attr.bindHtmlUnsafe);\n      scope.$watch(attr.bindHtmlUnsafe, function bindHtmlUnsafeWatchAction(value) {\n        element.html(value || '');\n      });\n    };\n  });\nangular.module('ui.bootstrap.buttons', [])\n\n.constant('buttonConfig', {\n  activeClass: 'active',\n  toggleEvent: 'click'\n})\n\n.controller('ButtonsController', ['buttonConfig', function(buttonConfig) {\n  this.activeClass = buttonConfig.activeClass || 'active';\n  this.toggleEvent = buttonConfig.toggleEvent || 'click';\n}])\n\n.directive('btnRadio', function () {\n  return {\n    require: ['btnRadio', 'ngModel'],\n    controller: 'ButtonsController',\n    link: function (scope, element, attrs, ctrls) {\n      var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      //model -> UI\n      ngModelCtrl.$render = function () {\n        element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));\n      };\n\n      //ui->model\n      element.bind(buttonsCtrl.toggleEvent, function () {\n        var isActive = element.hasClass(buttonsCtrl.activeClass);\n\n        if (!isActive || angular.isDefined(attrs.uncheckable)) {\n          scope.$apply(function () {\n            ngModelCtrl.$setViewValue(isActive ? null : scope.$eval(attrs.btnRadio));\n            ngModelCtrl.$render();\n          });\n        }\n      });\n    }\n  };\n})\n\n.directive('btnCheckbox', function () {\n  return {\n    require: ['btnCheckbox', 'ngModel'],\n    controller: 'ButtonsController',\n    link: function (scope, element, attrs, ctrls) {\n      var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      function getTrueValue() {\n        return getCheckboxValue(attrs.btnCheckboxTrue, true);\n      }\n\n      function getFalseValue() {\n        return getCheckboxValue(attrs.btnCheckboxFalse, false);\n      }\n\n      function getCheckboxValue(attributeValue, defaultValue) {\n        var val = scope.$eval(attributeValue);\n        return angular.isDefined(val) ? val : defaultValue;\n      }\n\n      //model -> UI\n      ngModelCtrl.$render = function () {\n        element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));\n      };\n\n      //ui->model\n      element.bind(buttonsCtrl.toggleEvent, function () {\n        scope.$apply(function () {\n          ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass) ? getFalseValue() : getTrueValue());\n          ngModelCtrl.$render();\n        });\n      });\n    }\n  };\n});\n\n/**\n* @ngdoc overview\n* @name ui.bootstrap.carousel\n*\n* @description\n* AngularJS version of an image carousel.\n*\n*/\nangular.module('ui.bootstrap.carousel', [])\n.controller('CarouselController', ['$scope', '$interval', '$animate', function ($scope, $interval, $animate) {\n  var self = this,\n    slides = self.slides = $scope.slides = [],\n    currentIndex = -1,\n    currentInterval, isPlaying;\n  self.currentSlide = null;\n\n  var destroyed = false;\n  /* direction: \"prev\" or \"next\" */\n  self.select = $scope.select = function(nextSlide, direction) {\n    var nextIndex = self.indexOfSlide(nextSlide);\n    //Decide direction if it's not given\n    if (direction === undefined) {\n      direction = nextIndex > self.getCurrentIndex() ? 'next' : 'prev';\n    }\n    if (nextSlide && nextSlide !== self.currentSlide) {\n      goNext();\n    }\n    function goNext() {\n      // Scope has been destroyed, stop here.\n      if (destroyed) { return; }\n\n      angular.extend(nextSlide, {direction: direction, active: true});\n      angular.extend(self.currentSlide || {}, {direction: direction, active: false});\n      if ($animate.enabled() && !$scope.noTransition && nextSlide.$element) {\n        $scope.$currentTransition = true;\n        nextSlide.$element.one('$animate:close', function closeFn() {\n          $scope.$currentTransition = null;\n        });\n      }\n\n      self.currentSlide = nextSlide;\n      currentIndex = nextIndex;\n      //every time you change slides, reset the timer\n      restartTimer();\n    }\n  };\n  $scope.$on('$destroy', function () {\n    destroyed = true;\n  });\n\n  function getSlideByIndex(index) {\n    if (angular.isUndefined(slides[index].index)) {\n      return slides[index];\n    }\n    var i, len = slides.length;\n    for (i = 0; i < slides.length; ++i) {\n      if (slides[i].index == index) {\n        return slides[i];\n      }\n    }\n  }\n\n  self.getCurrentIndex = function() {\n    if (self.currentSlide && angular.isDefined(self.currentSlide.index)) {\n      return +self.currentSlide.index;\n    }\n    return currentIndex;\n  };\n\n  /* Allow outside people to call indexOf on slides array */\n  self.indexOfSlide = function(slide) {\n    return angular.isDefined(slide.index) ? +slide.index : slides.indexOf(slide);\n  };\n\n  $scope.next = function() {\n    var newIndex = (self.getCurrentIndex() + 1) % slides.length;\n\n    //Prevent this user-triggered transition from occurring if there is already one in progress\n    if (!$scope.$currentTransition) {\n      return self.select(getSlideByIndex(newIndex), 'next');\n    }\n  };\n\n  $scope.prev = function() {\n    var newIndex = self.getCurrentIndex() - 1 < 0 ? slides.length - 1 : self.getCurrentIndex() - 1;\n\n    //Prevent this user-triggered transition from occurring if there is already one in progress\n    if (!$scope.$currentTransition) {\n      return self.select(getSlideByIndex(newIndex), 'prev');\n    }\n  };\n\n  $scope.isActive = function(slide) {\n     return self.currentSlide === slide;\n  };\n\n  $scope.$watch('interval', restartTimer);\n  $scope.$on('$destroy', resetTimer);\n\n  function restartTimer() {\n    resetTimer();\n    var interval = +$scope.interval;\n    if (!isNaN(interval) && interval > 0) {\n      currentInterval = $interval(timerFn, interval);\n    }\n  }\n\n  function resetTimer() {\n    if (currentInterval) {\n      $interval.cancel(currentInterval);\n      currentInterval = null;\n    }\n  }\n\n  function timerFn() {\n    var interval = +$scope.interval;\n    if (isPlaying && !isNaN(interval) && interval > 0) {\n      $scope.next();\n    } else {\n      $scope.pause();\n    }\n  }\n\n  $scope.play = function() {\n    if (!isPlaying) {\n      isPlaying = true;\n      restartTimer();\n    }\n  };\n  $scope.pause = function() {\n    if (!$scope.noPause) {\n      isPlaying = false;\n      resetTimer();\n    }\n  };\n\n  self.addSlide = function(slide, element) {\n    slide.$element = element;\n    slides.push(slide);\n    //if this is the first slide or the slide is set to active, select it\n    if(slides.length === 1 || slide.active) {\n      self.select(slides[slides.length-1]);\n      if (slides.length == 1) {\n        $scope.play();\n      }\n    } else {\n      slide.active = false;\n    }\n  };\n\n  self.removeSlide = function(slide) {\n    if (angular.isDefined(slide.index)) {\n      slides.sort(function(a, b) {\n        return +a.index > +b.index;\n      });\n    }\n    //get the index of the slide inside the carousel\n    var index = slides.indexOf(slide);\n    slides.splice(index, 1);\n    if (slides.length > 0 && slide.active) {\n      if (index >= slides.length) {\n        self.select(slides[index-1]);\n      } else {\n        self.select(slides[index]);\n      }\n    } else if (currentIndex > index) {\n      currentIndex--;\n    }\n  };\n\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.carousel.directive:carousel\n * @restrict EA\n *\n * @description\n * Carousel is the outer container for a set of image 'slides' to showcase.\n *\n * @param {number=} interval The time, in milliseconds, that it will take the carousel to go to the next slide.\n * @param {boolean=} noTransition Whether to disable transitions on the carousel.\n * @param {boolean=} noPause Whether to disable pausing on the carousel (by default, the carousel interval pauses on hover).\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <carousel>\n      <slide>\n        <img src=\"http://placekitten.com/150/150\" style=\"margin:auto;\">\n        <div class=\"carousel-caption\">\n          <p>Beautiful!</p>\n        </div>\n      </slide>\n      <slide>\n        <img src=\"http://placekitten.com/100/150\" style=\"margin:auto;\">\n        <div class=\"carousel-caption\">\n          <p>D'aww!</p>\n        </div>\n      </slide>\n    </carousel>\n  </file>\n  <file name=\"demo.css\">\n    .carousel-indicators {\n      top: auto;\n      bottom: 15px;\n    }\n  </file>\n</example>\n */\n.directive('carousel', [function() {\n  return {\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    controller: 'CarouselController',\n    require: 'carousel',\n    templateUrl: 'template/carousel/carousel.html',\n    scope: {\n      interval: '=',\n      noTransition: '=',\n      noPause: '='\n    }\n  };\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.carousel.directive:slide\n * @restrict EA\n *\n * @description\n * Creates a slide inside a {@link ui.bootstrap.carousel.directive:carousel carousel}.  Must be placed as a child of a carousel element.\n *\n * @param {boolean=} active Model binding, whether or not this slide is currently active.\n * @param {number=} index The index of the slide. The slides will be sorted by this parameter.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n<div ng-controller=\"CarouselDemoCtrl\">\n  <carousel>\n    <slide ng-repeat=\"slide in slides\" active=\"slide.active\" index=\"$index\">\n      <img ng-src=\"{{slide.image}}\" style=\"margin:auto;\">\n      <div class=\"carousel-caption\">\n        <h4>Slide {{$index}}</h4>\n        <p>{{slide.text}}</p>\n      </div>\n    </slide>\n  </carousel>\n  Interval, in milliseconds: <input type=\"number\" ng-model=\"myInterval\">\n  <br />Enter a negative number to stop the interval.\n</div>\n  </file>\n  <file name=\"script.js\">\nfunction CarouselDemoCtrl($scope) {\n  $scope.myInterval = 5000;\n}\n  </file>\n  <file name=\"demo.css\">\n    .carousel-indicators {\n      top: auto;\n      bottom: 15px;\n    }\n  </file>\n</example>\n*/\n\n.directive('slide', function() {\n  return {\n    require: '^carousel',\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    templateUrl: 'template/carousel/slide.html',\n    scope: {\n      active: '=?',\n      index: '=?'\n    },\n    link: function (scope, element, attrs, carouselCtrl) {\n      carouselCtrl.addSlide(scope, element);\n      //when the scope is destroyed then remove the slide from the current slides array\n      scope.$on('$destroy', function() {\n        carouselCtrl.removeSlide(scope);\n      });\n\n      scope.$watch('active', function(active) {\n        if (active) {\n          carouselCtrl.select(scope);\n        }\n      });\n    }\n  };\n})\n\n.animation('.item', [\n         '$animate',\nfunction ($animate) {\n  return {\n    beforeAddClass: function (element, className, done) {\n      // Due to transclusion, noTransition property is on parent's scope\n      if (className == 'active' && element.parent() &&\n          !element.parent().scope().noTransition) {\n        var stopped = false;\n        var direction = element.isolateScope().direction;\n        var directionClass = direction == 'next' ? 'left' : 'right';\n        element.addClass(direction);\n        $animate.addClass(element, directionClass).then(function () {\n          if (!stopped) {\n            element.removeClass(directionClass + ' ' + direction);\n          }\n          done();\n        });\n\n        return function () {\n          stopped = true;\n        };\n      }\n      done();\n    },\n    beforeRemoveClass: function (element, className, done) {\n      // Due to transclusion, noTransition property is on parent's scope\n      if (className == 'active' && element.parent() &&\n          !element.parent().scope().noTransition) {\n        var stopped = false;\n        var direction = element.isolateScope().direction;\n        var directionClass = direction == 'next' ? 'left' : 'right';\n        $animate.addClass(element, directionClass).then(function () {\n          if (!stopped) {\n            element.removeClass(directionClass);\n          }\n          done();\n        });\n        return function () {\n          stopped = true;\n        };\n      }\n      done();\n    }\n  };\n\n}])\n\n\n;\n\nangular.module('ui.bootstrap.dateparser', [])\n\n.service('dateParser', ['$locale', 'orderByFilter', function($locale, orderByFilter) {\n  // Pulled from https://github.com/mbostock/d3/blob/master/src/format/requote.js\n  var SPECIAL_CHARACTERS_REGEXP = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n\n  this.parsers = {};\n\n  var formatCodeToRegex = {\n    'yyyy': {\n      regex: '\\\\d{4}',\n      apply: function(value) { this.year = +value; }\n    },\n    'yy': {\n      regex: '\\\\d{2}',\n      apply: function(value) { this.year = +value + 2000; }\n    },\n    'y': {\n      regex: '\\\\d{1,4}',\n      apply: function(value) { this.year = +value; }\n    },\n    'MMMM': {\n      regex: $locale.DATETIME_FORMATS.MONTH.join('|'),\n      apply: function(value) { this.month = $locale.DATETIME_FORMATS.MONTH.indexOf(value); }\n    },\n    'MMM': {\n      regex: $locale.DATETIME_FORMATS.SHORTMONTH.join('|'),\n      apply: function(value) { this.month = $locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value); }\n    },\n    'MM': {\n      regex: '0[1-9]|1[0-2]',\n      apply: function(value) { this.month = value - 1; }\n    },\n    'M': {\n      regex: '[1-9]|1[0-2]',\n      apply: function(value) { this.month = value - 1; }\n    },\n    'dd': {\n      regex: '[0-2][0-9]{1}|3[0-1]{1}',\n      apply: function(value) { this.date = +value; }\n    },\n    'd': {\n      regex: '[1-2]?[0-9]{1}|3[0-1]{1}',\n      apply: function(value) { this.date = +value; }\n    },\n    'EEEE': {\n      regex: $locale.DATETIME_FORMATS.DAY.join('|')\n    },\n    'EEE': {\n      regex: $locale.DATETIME_FORMATS.SHORTDAY.join('|')\n    },\n    'HH': {\n      regex: '(?:0|1)[0-9]|2[0-3]',\n      apply: function(value) { this.hours = +value; }\n    },\n    'H': {\n      regex: '1?[0-9]|2[0-3]',\n      apply: function(value) { this.hours = +value; }\n    },\n    'mm': {\n      regex: '[0-5][0-9]',\n      apply: function(value) { this.minutes = +value; }\n    },\n    'm': {\n      regex: '[0-9]|[1-5][0-9]',\n      apply: function(value) { this.minutes = +value; }\n    },\n    'sss': {\n      regex: '[0-9][0-9][0-9]',\n      apply: function(value) { this.milliseconds = +value; }\n    },\n    'ss': {\n      regex: '[0-5][0-9]',\n      apply: function(value) { this.seconds = +value; }\n    },\n    's': {\n      regex: '[0-9]|[1-5][0-9]',\n      apply: function(value) { this.seconds = +value; }\n    }\n  };\n\n  function createParser(format) {\n    var map = [], regex = format.split('');\n\n    angular.forEach(formatCodeToRegex, function(data, code) {\n      var index = format.indexOf(code);\n\n      if (index > -1) {\n        format = format.split('');\n\n        regex[index] = '(' + data.regex + ')';\n        format[index] = '$'; // Custom symbol to define consumed part of format\n        for (var i = index + 1, n = index + code.length; i < n; i++) {\n          regex[i] = '';\n          format[i] = '$';\n        }\n        format = format.join('');\n\n        map.push({ index: index, apply: data.apply });\n      }\n    });\n\n    return {\n      regex: new RegExp('^' + regex.join('') + '$'),\n      map: orderByFilter(map, 'index')\n    };\n  }\n\n  this.parse = function(input, format, baseDate) {\n    if ( !angular.isString(input) || !format ) {\n      return input;\n    }\n\n    format = $locale.DATETIME_FORMATS[format] || format;\n    format = format.replace(SPECIAL_CHARACTERS_REGEXP, '\\\\$&');\n\n    if ( !this.parsers[format] ) {\n      this.parsers[format] = createParser(format);\n    }\n\n    var parser = this.parsers[format],\n        regex = parser.regex,\n        map = parser.map,\n        results = input.match(regex);\n\n    if ( results && results.length ) {\n      var fields, dt;\n      if (baseDate) {\n        fields = {\n          year: baseDate.getFullYear(),\n          month: baseDate.getMonth(),\n          date: baseDate.getDate(),\n          hours: baseDate.getHours(),\n          minutes: baseDate.getMinutes(),\n          seconds: baseDate.getSeconds(),\n          milliseconds: baseDate.getMilliseconds()\n        };\n      } else {\n        fields = { year: 1900, month: 0, date: 1, hours: 0, minutes: 0, seconds: 0, milliseconds: 0 };\n      }\n\n      for( var i = 1, n = results.length; i < n; i++ ) {\n        var mapper = map[i-1];\n        if ( mapper.apply ) {\n          mapper.apply.call(fields, results[i]);\n        }\n      }\n\n      if ( isValid(fields.year, fields.month, fields.date) ) {\n        dt = new Date(fields.year, fields.month, fields.date, fields.hours, fields.minutes, fields.seconds,\n          fields.milliseconds || 0);\n      }\n\n      return dt;\n    }\n  };\n\n  // Check if date is valid for specific month (and year for February).\n  // Month: 0 = Jan, 1 = Feb, etc\n  function isValid(year, month, date) {\n    if (date < 1) {\n      return false;\n    }\n\n    if ( month === 1 && date > 28) {\n        return date === 29 && ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0);\n    }\n\n    if ( month === 3 || month === 5 || month === 8 || month === 10) {\n        return date < 31;\n    }\n\n    return true;\n  }\n}]);\n\nangular.module('ui.bootstrap.position', [])\n\n/**\n * A set of utility methods that can be use to retrieve position of DOM elements.\n * It is meant to be used where we need to absolute-position DOM elements in\n * relation to other, existing elements (this is the case for tooltips, popovers,\n * typeahead suggestions etc.).\n */\n  .factory('$position', ['$document', '$window', function ($document, $window) {\n\n    function getStyle(el, cssprop) {\n      if (el.currentStyle) { //IE\n        return el.currentStyle[cssprop];\n      } else if ($window.getComputedStyle) {\n        return $window.getComputedStyle(el)[cssprop];\n      }\n      // finally try and get inline style\n      return el.style[cssprop];\n    }\n\n    /**\n     * Checks if a given element is statically positioned\n     * @param element - raw DOM element\n     */\n    function isStaticPositioned(element) {\n      return (getStyle(element, 'position') || 'static' ) === 'static';\n    }\n\n    /**\n     * returns the closest, non-statically positioned parentOffset of a given element\n     * @param element\n     */\n    var parentOffsetEl = function (element) {\n      var docDomEl = $document[0];\n      var offsetParent = element.offsetParent || docDomEl;\n      while (offsetParent && offsetParent !== docDomEl && isStaticPositioned(offsetParent) ) {\n        offsetParent = offsetParent.offsetParent;\n      }\n      return offsetParent || docDomEl;\n    };\n\n    return {\n      /**\n       * Provides read-only equivalent of jQuery's position function:\n       * http://api.jquery.com/position/\n       */\n      position: function (element) {\n        var elBCR = this.offset(element);\n        var offsetParentBCR = { top: 0, left: 0 };\n        var offsetParentEl = parentOffsetEl(element[0]);\n        if (offsetParentEl != $document[0]) {\n          offsetParentBCR = this.offset(angular.element(offsetParentEl));\n          offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;\n          offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;\n        }\n\n        var boundingClientRect = element[0].getBoundingClientRect();\n        return {\n          width: boundingClientRect.width || element.prop('offsetWidth'),\n          height: boundingClientRect.height || element.prop('offsetHeight'),\n          top: elBCR.top - offsetParentBCR.top,\n          left: elBCR.left - offsetParentBCR.left\n        };\n      },\n\n      /**\n       * Provides read-only equivalent of jQuery's offset function:\n       * http://api.jquery.com/offset/\n       */\n      offset: function (element) {\n        var boundingClientRect = element[0].getBoundingClientRect();\n        return {\n          width: boundingClientRect.width || element.prop('offsetWidth'),\n          height: boundingClientRect.height || element.prop('offsetHeight'),\n          top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),\n          left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)\n        };\n      },\n\n      /**\n       * Provides coordinates for the targetEl in relation to hostEl\n       */\n      positionElements: function (hostEl, targetEl, positionStr, appendToBody) {\n\n        var positionStrParts = positionStr.split('-');\n        var pos0 = positionStrParts[0], pos1 = positionStrParts[1] || 'center';\n\n        var hostElPos,\n          targetElWidth,\n          targetElHeight,\n          targetElPos;\n\n        hostElPos = appendToBody ? this.offset(hostEl) : this.position(hostEl);\n\n        targetElWidth = targetEl.prop('offsetWidth');\n        targetElHeight = targetEl.prop('offsetHeight');\n\n        var shiftWidth = {\n          center: function () {\n            return hostElPos.left + hostElPos.width / 2 - targetElWidth / 2;\n          },\n          left: function () {\n            return hostElPos.left;\n          },\n          right: function () {\n            return hostElPos.left + hostElPos.width;\n          }\n        };\n\n        var shiftHeight = {\n          center: function () {\n            return hostElPos.top + hostElPos.height / 2 - targetElHeight / 2;\n          },\n          top: function () {\n            return hostElPos.top;\n          },\n          bottom: function () {\n            return hostElPos.top + hostElPos.height;\n          }\n        };\n\n        switch (pos0) {\n          case 'right':\n            targetElPos = {\n              top: shiftHeight[pos1](),\n              left: shiftWidth[pos0]()\n            };\n            break;\n          case 'left':\n            targetElPos = {\n              top: shiftHeight[pos1](),\n              left: hostElPos.left - targetElWidth\n            };\n            break;\n          case 'bottom':\n            targetElPos = {\n              top: shiftHeight[pos0](),\n              left: shiftWidth[pos1]()\n            };\n            break;\n          default:\n            targetElPos = {\n              top: hostElPos.top - targetElHeight,\n              left: shiftWidth[pos1]()\n            };\n            break;\n        }\n\n        return targetElPos;\n      }\n    };\n  }]);\n\nangular.module('ui.bootstrap.datepicker', ['ui.bootstrap.dateparser', 'ui.bootstrap.position'])\n\n.constant('datepickerConfig', {\n  formatDay: 'dd',\n  formatMonth: 'MMMM',\n  formatYear: 'yyyy',\n  formatDayHeader: 'EEE',\n  formatDayTitle: 'MMMM yyyy',\n  formatMonthTitle: 'yyyy',\n  datepickerMode: 'day',\n  minMode: 'day',\n  maxMode: 'year',\n  showWeeks: true,\n  startingDay: 0,\n  yearRange: 20,\n  minDate: null,\n  maxDate: null,\n  shortcutPropagation: false\n})\n\n.controller('DatepickerController', ['$scope', '$attrs', '$parse', '$interpolate', '$timeout', '$log', 'dateFilter', 'datepickerConfig', function($scope, $attrs, $parse, $interpolate, $timeout, $log, dateFilter, datepickerConfig) {\n  var self = this,\n      ngModelCtrl = { $setViewValue: angular.noop }; // nullModelCtrl;\n\n  // Modes chain\n  this.modes = ['day', 'month', 'year'];\n\n  // Configuration attributes\n  angular.forEach(['formatDay', 'formatMonth', 'formatYear', 'formatDayHeader', 'formatDayTitle', 'formatMonthTitle',\n                   'minMode', 'maxMode', 'showWeeks', 'startingDay', 'yearRange', 'shortcutPropagation'], function( key, index ) {\n    self[key] = angular.isDefined($attrs[key]) ? (index < 8 ? $interpolate($attrs[key])($scope.$parent) : $scope.$parent.$eval($attrs[key])) : datepickerConfig[key];\n  });\n\n  // Watchable date attributes\n  angular.forEach(['minDate', 'maxDate'], function( key ) {\n    if ( $attrs[key] ) {\n      $scope.$parent.$watch($parse($attrs[key]), function(value) {\n        self[key] = value ? new Date(value) : null;\n        self.refreshView();\n      });\n    } else {\n      self[key] = datepickerConfig[key] ? new Date(datepickerConfig[key]) : null;\n    }\n  });\n\n  $scope.datepickerMode = $scope.datepickerMode || datepickerConfig.datepickerMode;\n  $scope.maxMode = self.maxMode;\n  $scope.uniqueId = 'datepicker-' + $scope.$id + '-' + Math.floor(Math.random() * 10000);\n\n  if(angular.isDefined($attrs.initDate)) {\n    this.activeDate = $scope.$parent.$eval($attrs.initDate) || new Date();\n    $scope.$parent.$watch($attrs.initDate, function(initDate){\n      if(initDate && (ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue) || ngModelCtrl.$invalid)){\n        self.activeDate = initDate;\n        self.refreshView();\n      }\n    });\n  } else {\n    this.activeDate =  new Date();\n  }\n\n  $scope.isActive = function(dateObject) {\n    if (self.compare(dateObject.date, self.activeDate) === 0) {\n      $scope.activeDateId = dateObject.uid;\n      return true;\n    }\n    return false;\n  };\n\n  this.init = function( ngModelCtrl_ ) {\n    ngModelCtrl = ngModelCtrl_;\n\n    ngModelCtrl.$render = function() {\n      self.render();\n    };\n  };\n\n  this.render = function() {\n    if ( ngModelCtrl.$viewValue ) {\n      var date = new Date( ngModelCtrl.$viewValue ),\n          isValid = !isNaN(date);\n\n      if ( isValid ) {\n        this.activeDate = date;\n      } else {\n        $log.error('Datepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');\n      }\n      ngModelCtrl.$setValidity('date', isValid);\n    }\n    this.refreshView();\n  };\n\n  this.refreshView = function() {\n    if ( this.element ) {\n      this._refreshView();\n\n      var date = ngModelCtrl.$viewValue ? new Date(ngModelCtrl.$viewValue) : null;\n      ngModelCtrl.$setValidity('date-disabled', !date || (this.element && !this.isDisabled(date)));\n    }\n  };\n\n  this.createDateObject = function(date, format) {\n    var model = ngModelCtrl.$viewValue ? new Date(ngModelCtrl.$viewValue) : null;\n    return {\n      date: date,\n      label: dateFilter(date, format),\n      selected: model && this.compare(date, model) === 0,\n      disabled: this.isDisabled(date),\n      current: this.compare(date, new Date()) === 0,\n      customClass: this.customClass(date)\n    };\n  };\n\n  this.isDisabled = function( date ) {\n    return ((this.minDate && this.compare(date, this.minDate) < 0) || (this.maxDate && this.compare(date, this.maxDate) > 0) || ($attrs.dateDisabled && $scope.dateDisabled({date: date, mode: $scope.datepickerMode})));\n  };\n\n    this.customClass = function( date ) {\n      return $scope.customClass({date: date, mode: $scope.datepickerMode});\n    };\n\n  // Split array into smaller arrays\n  this.split = function(arr, size) {\n    var arrays = [];\n    while (arr.length > 0) {\n      arrays.push(arr.splice(0, size));\n    }\n    return arrays;\n  };\n\n  $scope.select = function( date ) {\n    if ( $scope.datepickerMode === self.minMode ) {\n      var dt = ngModelCtrl.$viewValue ? new Date( ngModelCtrl.$viewValue ) : new Date(0, 0, 0, 0, 0, 0, 0);\n      dt.setFullYear( date.getFullYear(), date.getMonth(), date.getDate() );\n      ngModelCtrl.$setViewValue( dt );\n      ngModelCtrl.$render();\n    } else {\n      self.activeDate = date;\n      $scope.datepickerMode = self.modes[ self.modes.indexOf( $scope.datepickerMode ) - 1 ];\n    }\n  };\n\n  $scope.move = function( direction ) {\n    var year = self.activeDate.getFullYear() + direction * (self.step.years || 0),\n        month = self.activeDate.getMonth() + direction * (self.step.months || 0);\n    self.activeDate.setFullYear(year, month, 1);\n    self.refreshView();\n  };\n\n  $scope.toggleMode = function( direction ) {\n    direction = direction || 1;\n\n    if (($scope.datepickerMode === self.maxMode && direction === 1) || ($scope.datepickerMode === self.minMode && direction === -1)) {\n      return;\n    }\n\n    $scope.datepickerMode = self.modes[ self.modes.indexOf( $scope.datepickerMode ) + direction ];\n  };\n\n  // Key event mapper\n  $scope.keys = { 13:'enter', 32:'space', 33:'pageup', 34:'pagedown', 35:'end', 36:'home', 37:'left', 38:'up', 39:'right', 40:'down' };\n\n  var focusElement = function() {\n    $timeout(function() {\n      self.element[0].focus();\n    }, 0 , false);\n  };\n\n  // Listen for focus requests from popup directive\n  $scope.$on('datepicker.focus', focusElement);\n\n  $scope.keydown = function( evt ) {\n    var key = $scope.keys[evt.which];\n\n    if ( !key || evt.shiftKey || evt.altKey ) {\n      return;\n    }\n\n    evt.preventDefault();\n    if(!self.shortcutPropagation){\n        evt.stopPropagation();\n    }\n\n    if (key === 'enter' || key === 'space') {\n      if ( self.isDisabled(self.activeDate)) {\n        return; // do nothing\n      }\n      $scope.select(self.activeDate);\n      focusElement();\n    } else if (evt.ctrlKey && (key === 'up' || key === 'down')) {\n      $scope.toggleMode(key === 'up' ? 1 : -1);\n      focusElement();\n    } else {\n      self.handleKeyDown(key, evt);\n      self.refreshView();\n    }\n  };\n}])\n\n.directive( 'datepicker', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/datepicker/datepicker.html',\n    scope: {\n      datepickerMode: '=?',\n      dateDisabled: '&',\n      customClass: '&',\n      shortcutPropagation: '&?'\n    },\n    require: ['datepicker', '?^ngModel'],\n    controller: 'DatepickerController',\n    link: function(scope, element, attrs, ctrls) {\n      var datepickerCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      if ( ngModelCtrl ) {\n        datepickerCtrl.init( ngModelCtrl );\n      }\n    }\n  };\n})\n\n.directive('daypicker', ['dateFilter', function (dateFilter) {\n  return {\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/datepicker/day.html',\n    require: '^datepicker',\n    link: function(scope, element, attrs, ctrl) {\n      scope.showWeeks = ctrl.showWeeks;\n\n      ctrl.step = { months: 1 };\n      ctrl.element = element;\n\n      var DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n      function getDaysInMonth( year, month ) {\n        return ((month === 1) && (year % 4 === 0) && ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\n      }\n\n      function getDates(startDate, n) {\n        var dates = new Array(n), current = new Date(startDate), i = 0;\n        current.setHours(12); // Prevent repeated dates because of timezone bug\n        while ( i < n ) {\n          dates[i++] = new Date(current);\n          current.setDate( current.getDate() + 1 );\n        }\n        return dates;\n      }\n\n      ctrl._refreshView = function() {\n        var year = ctrl.activeDate.getFullYear(),\n          month = ctrl.activeDate.getMonth(),\n          firstDayOfMonth = new Date(year, month, 1),\n          difference = ctrl.startingDay - firstDayOfMonth.getDay(),\n          numDisplayedFromPreviousMonth = (difference > 0) ? 7 - difference : - difference,\n          firstDate = new Date(firstDayOfMonth);\n\n        if ( numDisplayedFromPreviousMonth > 0 ) {\n          firstDate.setDate( - numDisplayedFromPreviousMonth + 1 );\n        }\n\n        // 42 is the number of days on a six-month calendar\n        var days = getDates(firstDate, 42);\n        for (var i = 0; i < 42; i ++) {\n          days[i] = angular.extend(ctrl.createDateObject(days[i], ctrl.formatDay), {\n            secondary: days[i].getMonth() !== month,\n            uid: scope.uniqueId + '-' + i\n          });\n        }\n\n        scope.labels = new Array(7);\n        for (var j = 0; j < 7; j++) {\n          scope.labels[j] = {\n            abbr: dateFilter(days[j].date, ctrl.formatDayHeader),\n            full: dateFilter(days[j].date, 'EEEE')\n          };\n        }\n\n        scope.title = dateFilter(ctrl.activeDate, ctrl.formatDayTitle);\n        scope.rows = ctrl.split(days, 7);\n\n        if ( scope.showWeeks ) {\n          scope.weekNumbers = [];\n          var thursdayIndex = (4 + 7 - ctrl.startingDay) % 7,\n              numWeeks = scope.rows.length;\n          for (var curWeek = 0; curWeek < numWeeks; curWeek++) {\n            scope.weekNumbers.push(\n              getISO8601WeekNumber( scope.rows[curWeek][thursdayIndex].date ));\n          }\n        }\n      };\n\n      ctrl.compare = function(date1, date2) {\n        return (new Date( date1.getFullYear(), date1.getMonth(), date1.getDate() ) - new Date( date2.getFullYear(), date2.getMonth(), date2.getDate() ) );\n      };\n\n      function getISO8601WeekNumber(date) {\n        var checkDate = new Date(date);\n        checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7)); // Thursday\n        var time = checkDate.getTime();\n        checkDate.setMonth(0); // Compare with Jan 1\n        checkDate.setDate(1);\n        return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\n      }\n\n      ctrl.handleKeyDown = function( key, evt ) {\n        var date = ctrl.activeDate.getDate();\n\n        if (key === 'left') {\n          date = date - 1;   // up\n        } else if (key === 'up') {\n          date = date - 7;   // down\n        } else if (key === 'right') {\n          date = date + 1;   // down\n        } else if (key === 'down') {\n          date = date + 7;\n        } else if (key === 'pageup' || key === 'pagedown') {\n          var month = ctrl.activeDate.getMonth() + (key === 'pageup' ? - 1 : 1);\n          ctrl.activeDate.setMonth(month, 1);\n          date = Math.min(getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth()), date);\n        } else if (key === 'home') {\n          date = 1;\n        } else if (key === 'end') {\n          date = getDaysInMonth(ctrl.activeDate.getFullYear(), ctrl.activeDate.getMonth());\n        }\n        ctrl.activeDate.setDate(date);\n      };\n\n      ctrl.refreshView();\n    }\n  };\n}])\n\n.directive('monthpicker', ['dateFilter', function (dateFilter) {\n  return {\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/datepicker/month.html',\n    require: '^datepicker',\n    link: function(scope, element, attrs, ctrl) {\n      ctrl.step = { years: 1 };\n      ctrl.element = element;\n\n      ctrl._refreshView = function() {\n        var months = new Array(12),\n            year = ctrl.activeDate.getFullYear();\n\n        for ( var i = 0; i < 12; i++ ) {\n          months[i] = angular.extend(ctrl.createDateObject(new Date(year, i, 1), ctrl.formatMonth), {\n            uid: scope.uniqueId + '-' + i\n          });\n        }\n\n        scope.title = dateFilter(ctrl.activeDate, ctrl.formatMonthTitle);\n        scope.rows = ctrl.split(months, 3);\n      };\n\n      ctrl.compare = function(date1, date2) {\n        return new Date( date1.getFullYear(), date1.getMonth() ) - new Date( date2.getFullYear(), date2.getMonth() );\n      };\n\n      ctrl.handleKeyDown = function( key, evt ) {\n        var date = ctrl.activeDate.getMonth();\n\n        if (key === 'left') {\n          date = date - 1;   // up\n        } else if (key === 'up') {\n          date = date - 3;   // down\n        } else if (key === 'right') {\n          date = date + 1;   // down\n        } else if (key === 'down') {\n          date = date + 3;\n        } else if (key === 'pageup' || key === 'pagedown') {\n          var year = ctrl.activeDate.getFullYear() + (key === 'pageup' ? - 1 : 1);\n          ctrl.activeDate.setFullYear(year);\n        } else if (key === 'home') {\n          date = 0;\n        } else if (key === 'end') {\n          date = 11;\n        }\n        ctrl.activeDate.setMonth(date);\n      };\n\n      ctrl.refreshView();\n    }\n  };\n}])\n\n.directive('yearpicker', ['dateFilter', function (dateFilter) {\n  return {\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/datepicker/year.html',\n    require: '^datepicker',\n    link: function(scope, element, attrs, ctrl) {\n      var range = ctrl.yearRange;\n\n      ctrl.step = { years: range };\n      ctrl.element = element;\n\n      function getStartingYear( year ) {\n        return parseInt((year - 1) / range, 10) * range + 1;\n      }\n\n      ctrl._refreshView = function() {\n        var years = new Array(range);\n\n        for ( var i = 0, start = getStartingYear(ctrl.activeDate.getFullYear()); i < range; i++ ) {\n          years[i] = angular.extend(ctrl.createDateObject(new Date(start + i, 0, 1), ctrl.formatYear), {\n            uid: scope.uniqueId + '-' + i\n          });\n        }\n\n        scope.title = [years[0].label, years[range - 1].label].join(' - ');\n        scope.rows = ctrl.split(years, 5);\n      };\n\n      ctrl.compare = function(date1, date2) {\n        return date1.getFullYear() - date2.getFullYear();\n      };\n\n      ctrl.handleKeyDown = function( key, evt ) {\n        var date = ctrl.activeDate.getFullYear();\n\n        if (key === 'left') {\n          date = date - 1;   // up\n        } else if (key === 'up') {\n          date = date - 5;   // down\n        } else if (key === 'right') {\n          date = date + 1;   // down\n        } else if (key === 'down') {\n          date = date + 5;\n        } else if (key === 'pageup' || key === 'pagedown') {\n          date += (key === 'pageup' ? - 1 : 1) * ctrl.step.years;\n        } else if (key === 'home') {\n          date = getStartingYear( ctrl.activeDate.getFullYear() );\n        } else if (key === 'end') {\n          date = getStartingYear( ctrl.activeDate.getFullYear() ) + range - 1;\n        }\n        ctrl.activeDate.setFullYear(date);\n      };\n\n      ctrl.refreshView();\n    }\n  };\n}])\n\n.constant('datepickerPopupConfig', {\n  datepickerPopup: 'yyyy-MM-dd',\n  html5Types: {\n    date: 'yyyy-MM-dd',\n    'datetime-local': 'yyyy-MM-ddTHH:mm:ss.sss',\n    'month': 'yyyy-MM'\n  },\n  currentText: 'Today',\n  clearText: 'Clear',\n  closeText: 'Done',\n  closeOnDateSelection: true,\n  appendToBody: false,\n  showButtonBar: true\n})\n\n.directive('datepickerPopup', ['$compile', '$parse', '$document', '$position', 'dateFilter', 'dateParser', 'datepickerPopupConfig',\nfunction ($compile, $parse, $document, $position, dateFilter, dateParser, datepickerPopupConfig) {\n  return {\n    restrict: 'EA',\n    require: 'ngModel',\n    scope: {\n      isOpen: '=?',\n      currentText: '@',\n      clearText: '@',\n      closeText: '@',\n      dateDisabled: '&',\n      customClass: '&'\n    },\n    link: function(scope, element, attrs, ngModel) {\n      var dateFormat,\n          closeOnDateSelection = angular.isDefined(attrs.closeOnDateSelection) ? scope.$parent.$eval(attrs.closeOnDateSelection) : datepickerPopupConfig.closeOnDateSelection,\n          appendToBody = angular.isDefined(attrs.datepickerAppendToBody) ? scope.$parent.$eval(attrs.datepickerAppendToBody) : datepickerPopupConfig.appendToBody;\n\n      scope.showButtonBar = angular.isDefined(attrs.showButtonBar) ? scope.$parent.$eval(attrs.showButtonBar) : datepickerPopupConfig.showButtonBar;\n\n      scope.getText = function( key ) {\n        return scope[key + 'Text'] || datepickerPopupConfig[key + 'Text'];\n      };\n\n      var isHtml5DateInput = false;\n      if (datepickerPopupConfig.html5Types[attrs.type]) {\n        dateFormat = datepickerPopupConfig.html5Types[attrs.type];\n        isHtml5DateInput = true;\n      } else {\n        dateFormat = attrs.datepickerPopup || datepickerPopupConfig.datepickerPopup;\n        attrs.$observe('datepickerPopup', function(value, oldValue) {\n            var newDateFormat = value || datepickerPopupConfig.datepickerPopup;\n            // Invalidate the $modelValue to ensure that formatters re-run\n            // FIXME: Refactor when PR is merged: https://github.com/angular/angular.js/pull/10764\n            if (newDateFormat !== dateFormat) {\n              dateFormat = newDateFormat;\n              ngModel.$modelValue = null;\n\n              if (!dateFormat) {\n                throw new Error('datepickerPopup must have a date format specified.');\n              }\n            }\n        });\n      }\n\n      if (!dateFormat) {\n        throw new Error('datepickerPopup must have a date format specified.');\n      }\n\n      if (isHtml5DateInput && attrs.datepickerPopup) {\n        throw new Error('HTML5 date input types do not support custom formats.');\n      }\n\n      // popup element used to display calendar\n      var popupEl = angular.element('<div datepicker-popup-wrap><div datepicker></div></div>');\n      popupEl.attr({\n        'ng-model': 'date',\n        'ng-change': 'dateSelection()'\n      });\n\n      function cameltoDash( string ){\n        return string.replace(/([A-Z])/g, function($1) { return '-' + $1.toLowerCase(); });\n      }\n\n      // datepicker element\n      var datepickerEl = angular.element(popupEl.children()[0]);\n      if (isHtml5DateInput) {\n        if (attrs.type == 'month') {\n          datepickerEl.attr('datepicker-mode', '\"month\"');\n          datepickerEl.attr('min-mode', 'month');\n        }\n      }\n\n      if ( attrs.datepickerOptions ) {\n        var options = scope.$parent.$eval(attrs.datepickerOptions);\n        if(options.initDate) {\n          scope.initDate = options.initDate;\n          datepickerEl.attr( 'init-date', 'initDate' );\n          delete options.initDate;\n        }\n        angular.forEach(options, function( value, option ) {\n          datepickerEl.attr( cameltoDash(option), value );\n        });\n      }\n\n      scope.watchData = {};\n      angular.forEach(['minDate', 'maxDate', 'datepickerMode', 'initDate', 'shortcutPropagation'], function( key ) {\n        if ( attrs[key] ) {\n          var getAttribute = $parse(attrs[key]);\n          scope.$parent.$watch(getAttribute, function(value){\n            scope.watchData[key] = value;\n          });\n          datepickerEl.attr(cameltoDash(key), 'watchData.' + key);\n\n          // Propagate changes from datepicker to outside\n          if ( key === 'datepickerMode' ) {\n            var setAttribute = getAttribute.assign;\n            scope.$watch('watchData.' + key, function(value, oldvalue) {\n              if ( value !== oldvalue ) {\n                setAttribute(scope.$parent, value);\n              }\n            });\n          }\n        }\n      });\n      if (attrs.dateDisabled) {\n        datepickerEl.attr('date-disabled', 'dateDisabled({ date: date, mode: mode })');\n      }\n\n      if (attrs.showWeeks) {\n        datepickerEl.attr('show-weeks', attrs.showWeeks);\n      }\n\n      if (attrs.customClass){\n        datepickerEl.attr('custom-class', 'customClass({ date: date, mode: mode })');\n      }\n\n      function parseDate(viewValue) {\n        if (angular.isNumber(viewValue)) {\n          // presumably timestamp to date object\n          viewValue = new Date(viewValue);\n        }\n\n        if (!viewValue) {\n          return null;\n        } else if (angular.isDate(viewValue) && !isNaN(viewValue)) {\n          return viewValue;\n        } else if (angular.isString(viewValue)) {\n          var date = dateParser.parse(viewValue, dateFormat, scope.date) || new Date(viewValue);\n          if (isNaN(date)) {\n            return undefined;\n          } else {\n            return date;\n          }\n        } else {\n          return undefined;\n        }\n      }\n\n      function validator(modelValue, viewValue) {\n        var value = modelValue || viewValue;\n        if (angular.isNumber(value)) {\n          value = new Date(value);\n        }\n        if (!value) {\n          return true;\n        } else if (angular.isDate(value) && !isNaN(value)) {\n          return true;\n        } else if (angular.isString(value)) {\n          var date = dateParser.parse(value, dateFormat) || new Date(value);\n          return !isNaN(date);\n        } else {\n          return false;\n        }\n      }\n\n      if (!isHtml5DateInput) {\n        // Internal API to maintain the correct ng-invalid-[key] class\n        ngModel.$$parserName = 'date';\n        ngModel.$validators.date = validator;\n        ngModel.$parsers.unshift(parseDate);\n        ngModel.$formatters.push(function (value) {\n          scope.date = value;\n          return ngModel.$isEmpty(value) ? value : dateFilter(value, dateFormat);\n        });\n      }\n      else {\n        ngModel.$formatters.push(function (value) {\n          scope.date = value;\n          return value;\n        });\n      }\n\n      // Inner change\n      scope.dateSelection = function(dt) {\n        if (angular.isDefined(dt)) {\n          scope.date = dt;\n        }\n        var date = scope.date ? dateFilter(scope.date, dateFormat) : '';\n        element.val(date);\n        ngModel.$setViewValue(date);\n\n        if ( closeOnDateSelection ) {\n          scope.isOpen = false;\n          element[0].focus();\n        }\n      };\n\n      // Detect changes in the view from the text box\n      ngModel.$viewChangeListeners.push(function () {\n        scope.date = dateParser.parse(ngModel.$viewValue, dateFormat, scope.date) || new Date(ngModel.$viewValue);\n      });\n\n      var documentClickBind = function(event) {\n        if (scope.isOpen && event.target !== element[0]) {\n          scope.$apply(function() {\n            scope.isOpen = false;\n          });\n        }\n      };\n\n      var keydown = function(evt, noApply) {\n        scope.keydown(evt);\n      };\n      element.bind('keydown', keydown);\n\n      scope.keydown = function(evt) {\n        if (evt.which === 27) {\n          evt.preventDefault();\n          if (scope.isOpen) {\n            evt.stopPropagation();\n          }\n          scope.close();\n        } else if (evt.which === 40 && !scope.isOpen) {\n          scope.isOpen = true;\n        }\n      };\n\n      scope.$watch('isOpen', function(value) {\n        if (value) {\n          scope.$broadcast('datepicker.focus');\n          scope.position = appendToBody ? $position.offset(element) : $position.position(element);\n          scope.position.top = scope.position.top + element.prop('offsetHeight');\n\n          $document.bind('click', documentClickBind);\n        } else {\n          $document.unbind('click', documentClickBind);\n        }\n      });\n\n      scope.select = function( date ) {\n        if (date === 'today') {\n          var today = new Date();\n          if (angular.isDate(scope.date)) {\n            date = new Date(scope.date);\n            date.setFullYear(today.getFullYear(), today.getMonth(), today.getDate());\n          } else {\n            date = new Date(today.setHours(0, 0, 0, 0));\n          }\n        }\n        scope.dateSelection( date );\n      };\n\n      scope.close = function() {\n        scope.isOpen = false;\n        element[0].focus();\n      };\n\n      var $popup = $compile(popupEl)(scope);\n      // Prevent jQuery cache memory leak (template is now redundant after linking)\n      popupEl.remove();\n\n      if ( appendToBody ) {\n        $document.find('body').append($popup);\n      } else {\n        element.after($popup);\n      }\n\n      scope.$on('$destroy', function() {\n        $popup.remove();\n        element.unbind('keydown', keydown);\n        $document.unbind('click', documentClickBind);\n      });\n    }\n  };\n}])\n\n.directive('datepickerPopupWrap', function() {\n  return {\n    restrict:'EA',\n    replace: true,\n    transclude: true,\n    templateUrl: 'template/datepicker/popup.html',\n    link:function (scope, element, attrs) {\n      element.bind('click', function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    }\n  };\n});\n\nangular.module('ui.bootstrap.dropdown', ['ui.bootstrap.position'])\n\n.constant('dropdownConfig', {\n  openClass: 'open'\n})\n\n.service('dropdownService', ['$document', '$rootScope', function($document, $rootScope) {\n  var openScope = null;\n\n  this.open = function( dropdownScope ) {\n    if ( !openScope ) {\n      $document.bind('click', closeDropdown);\n      $document.bind('keydown', escapeKeyBind);\n    }\n\n    if ( openScope && openScope !== dropdownScope ) {\n        openScope.isOpen = false;\n    }\n\n    openScope = dropdownScope;\n  };\n\n  this.close = function( dropdownScope ) {\n    if ( openScope === dropdownScope ) {\n      openScope = null;\n      $document.unbind('click', closeDropdown);\n      $document.unbind('keydown', escapeKeyBind);\n    }\n  };\n\n  var closeDropdown = function( evt ) {\n    // This method may still be called during the same mouse event that\n    // unbound this event handler. So check openScope before proceeding.\n    if (!openScope) { return; }\n\n    if( evt && openScope.getAutoClose() === 'disabled' )  { return ; }\n\n    var toggleElement = openScope.getToggleElement();\n    if ( evt && toggleElement && toggleElement[0].contains(evt.target) ) {\n        return;\n    }\n\n    var $element = openScope.getElement();\n    if( evt && openScope.getAutoClose() === 'outsideClick' && $element && $element[0].contains(evt.target) ) {\n      return;\n    }\n\n    openScope.isOpen = false;\n\n    if (!$rootScope.$$phase) {\n      openScope.$apply();\n    }\n  };\n\n  var escapeKeyBind = function( evt ) {\n    if ( evt.which === 27 ) {\n      openScope.focusToggleElement();\n      closeDropdown();\n    }\n  };\n}])\n\n.controller('DropdownController', ['$scope', '$attrs', '$parse', 'dropdownConfig', 'dropdownService', '$animate', '$position', '$document', function($scope, $attrs, $parse, dropdownConfig, dropdownService, $animate, $position, $document) {\n  var self = this,\n      scope = $scope.$new(), // create a child scope so we are not polluting original one\n      openClass = dropdownConfig.openClass,\n      getIsOpen,\n      setIsOpen = angular.noop,\n      toggleInvoker = $attrs.onToggle ? $parse($attrs.onToggle) : angular.noop,\n      appendToBody = false;\n\n  this.init = function( element ) {\n    self.$element = element;\n\n    if ( $attrs.isOpen ) {\n      getIsOpen = $parse($attrs.isOpen);\n      setIsOpen = getIsOpen.assign;\n\n      $scope.$watch(getIsOpen, function(value) {\n        scope.isOpen = !!value;\n      });\n    }\n\n    appendToBody = angular.isDefined($attrs.dropdownAppendToBody);\n\n    if ( appendToBody && self.dropdownMenu ) {\n      $document.find('body').append( self.dropdownMenu );\n      element.on('$destroy', function handleDestroyEvent() {\n        self.dropdownMenu.remove();\n      });\n    }\n  };\n\n  this.toggle = function( open ) {\n    return scope.isOpen = arguments.length ? !!open : !scope.isOpen;\n  };\n\n  // Allow other directives to watch status\n  this.isOpen = function() {\n    return scope.isOpen;\n  };\n\n  scope.getToggleElement = function() {\n    return self.toggleElement;\n  };\n\n  scope.getAutoClose = function() {\n    return $attrs.autoClose || 'always'; //or 'outsideClick' or 'disabled'\n  };\n\n  scope.getElement = function() {\n    return self.$element;\n  };\n\n  scope.focusToggleElement = function() {\n    if ( self.toggleElement ) {\n      self.toggleElement[0].focus();\n    }\n  };\n\n  scope.$watch('isOpen', function( isOpen, wasOpen ) {\n    if ( appendToBody && self.dropdownMenu ) {\n      var pos = $position.positionElements(self.$element, self.dropdownMenu, 'bottom-left', true);\n      self.dropdownMenu.css({\n        top: pos.top + 'px',\n        left: pos.left + 'px',\n        display: isOpen ? 'block' : 'none'\n      });\n    }\n\n    $animate[isOpen ? 'addClass' : 'removeClass'](self.$element, openClass);\n\n    if ( isOpen ) {\n      scope.focusToggleElement();\n      dropdownService.open( scope );\n    } else {\n      dropdownService.close( scope );\n    }\n\n    setIsOpen($scope, isOpen);\n    if (angular.isDefined(isOpen) && isOpen !== wasOpen) {\n      toggleInvoker($scope, { open: !!isOpen });\n    }\n  });\n\n  $scope.$on('$locationChangeSuccess', function() {\n    scope.isOpen = false;\n  });\n\n  $scope.$on('$destroy', function() {\n    scope.$destroy();\n  });\n}])\n\n.directive('dropdown', function() {\n  return {\n    controller: 'DropdownController',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      dropdownCtrl.init( element );\n    }\n  };\n})\n\n.directive('dropdownMenu', function() {\n  return {\n    restrict: 'AC',\n    require: '?^dropdown',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      if ( !dropdownCtrl ) {\n        return;\n      }\n      dropdownCtrl.dropdownMenu = element;\n    }\n  };\n})\n\n.directive('dropdownToggle', function() {\n  return {\n    require: '?^dropdown',\n    link: function(scope, element, attrs, dropdownCtrl) {\n      if ( !dropdownCtrl ) {\n        return;\n      }\n\n      dropdownCtrl.toggleElement = element;\n\n      var toggleDropdown = function(event) {\n        event.preventDefault();\n\n        if ( !element.hasClass('disabled') && !attrs.disabled ) {\n          scope.$apply(function() {\n            dropdownCtrl.toggle();\n          });\n        }\n      };\n\n      element.bind('click', toggleDropdown);\n\n      // WAI-ARIA\n      element.attr({ 'aria-haspopup': true, 'aria-expanded': false });\n      scope.$watch(dropdownCtrl.isOpen, function( isOpen ) {\n        element.attr('aria-expanded', !!isOpen);\n      });\n\n      scope.$on('$destroy', function() {\n        element.unbind('click', toggleDropdown);\n      });\n    }\n  };\n});\n\nangular.module('ui.bootstrap.modal', [])\n\n/**\n * A helper, internal data structure that acts as a map but also allows getting / removing\n * elements in the LIFO order\n */\n  .factory('$$stackedMap', function () {\n    return {\n      createNew: function () {\n        var stack = [];\n\n        return {\n          add: function (key, value) {\n            stack.push({\n              key: key,\n              value: value\n            });\n          },\n          get: function (key) {\n            for (var i = 0; i < stack.length; i++) {\n              if (key == stack[i].key) {\n                return stack[i];\n              }\n            }\n          },\n          keys: function() {\n            var keys = [];\n            for (var i = 0; i < stack.length; i++) {\n              keys.push(stack[i].key);\n            }\n            return keys;\n          },\n          top: function () {\n            return stack[stack.length - 1];\n          },\n          remove: function (key) {\n            var idx = -1;\n            for (var i = 0; i < stack.length; i++) {\n              if (key == stack[i].key) {\n                idx = i;\n                break;\n              }\n            }\n            return stack.splice(idx, 1)[0];\n          },\n          removeTop: function () {\n            return stack.splice(stack.length - 1, 1)[0];\n          },\n          length: function () {\n            return stack.length;\n          }\n        };\n      }\n    };\n  })\n\n/**\n * A helper directive for the $modal service. It creates a backdrop element.\n */\n  .directive('modalBackdrop', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'EA',\n      replace: true,\n      templateUrl: 'template/modal/backdrop.html',\n      compile: function (tElement, tAttrs) {\n        tElement.addClass(tAttrs.backdropClass);\n        return linkFn;\n      }\n    };\n\n    function linkFn(scope, element, attrs) {\n      scope.animate = false;\n\n      //trigger CSS transitions\n      $timeout(function () {\n        scope.animate = true;\n      });\n    }\n  }])\n\n  .directive('modalWindow', ['$modalStack', '$q', function ($modalStack, $q) {\n    return {\n      restrict: 'EA',\n      scope: {\n        index: '@',\n        animate: '='\n      },\n      replace: true,\n      transclude: true,\n      templateUrl: function(tElement, tAttrs) {\n        return tAttrs.templateUrl || 'template/modal/window.html';\n      },\n      link: function (scope, element, attrs) {\n        element.addClass(attrs.windowClass || '');\n        scope.size = attrs.size;\n\n        scope.close = function (evt) {\n          var modal = $modalStack.getTop();\n          if (modal && modal.value.backdrop && modal.value.backdrop != 'static' && (evt.target === evt.currentTarget)) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            $modalStack.dismiss(modal.key, 'backdrop click');\n          }\n        };\n\n        // This property is only added to the scope for the purpose of detecting when this directive is rendered.\n        // We can detect that by using this property in the template associated with this directive and then use\n        // {@link Attribute#$observe} on it. For more details please see {@link TableColumnResize}.\n        scope.$isRendered = true;\n\n        // Deferred object that will be resolved when this modal is render.\n        var modalRenderDeferObj = $q.defer();\n        // Observe function will be called on next digest cycle after compilation, ensuring that the DOM is ready.\n        // In order to use this way of finding whether DOM is ready, we need to observe a scope property used in modal's template.\n        attrs.$observe('modalRender', function (value) {\n          if (value == 'true') {\n            modalRenderDeferObj.resolve();\n          }\n        });\n\n        modalRenderDeferObj.promise.then(function () {\n          // trigger CSS transitions\n          scope.animate = true;\n\n          var inputsWithAutofocus = element[0].querySelectorAll('[autofocus]');\n          /**\n           * Auto-focusing of a freshly-opened modal element causes any child elements\n           * with the autofocus attribute to lose focus. This is an issue on touch\n           * based devices which will show and then hide the onscreen keyboard.\n           * Attempts to refocus the autofocus element via JavaScript will not reopen\n           * the onscreen keyboard. Fixed by updated the focusing logic to only autofocus\n           * the modal element if the modal does not contain an autofocus element.\n           */\n          if (inputsWithAutofocus.length) {\n            inputsWithAutofocus[0].focus();\n          } else {\n            element[0].focus();\n          }\n\n          // Notify {@link $modalStack} that modal is rendered.\n          var modal = $modalStack.getTop();\n          if (modal) {\n            $modalStack.modalRendered(modal.key);\n          }\n        });\n      }\n    };\n  }])\n\n  .directive('modalAnimationClass', [\n    function () {\n      return {\n        compile: function (tElement, tAttrs) {\n          if (tAttrs.modalAnimation) {\n            tElement.addClass(tAttrs.modalAnimationClass);\n          }\n        }\n      };\n    }])\n\n  .directive('modalTransclude', function () {\n    return {\n      link: function($scope, $element, $attrs, controller, $transclude) {\n        $transclude($scope.$parent, function(clone) {\n          $element.empty();\n          $element.append(clone);\n        });\n      }\n    };\n  })\n\n  .factory('$modalStack', ['$animate', '$timeout', '$document', '$compile', '$rootScope', '$$stackedMap',\n    function ($animate, $timeout, $document, $compile, $rootScope, $$stackedMap) {\n\n      var OPENED_MODAL_CLASS = 'modal-open';\n\n      var backdropDomEl, backdropScope;\n      var openedWindows = $$stackedMap.createNew();\n      var $modalStack = {};\n\n      function backdropIndex() {\n        var topBackdropIndex = -1;\n        var opened = openedWindows.keys();\n        for (var i = 0; i < opened.length; i++) {\n          if (openedWindows.get(opened[i]).value.backdrop) {\n            topBackdropIndex = i;\n          }\n        }\n        return topBackdropIndex;\n      }\n\n      $rootScope.$watch(backdropIndex, function(newBackdropIndex){\n        if (backdropScope) {\n          backdropScope.index = newBackdropIndex;\n        }\n      });\n\n      function removeModalWindow(modalInstance) {\n\n        var body = $document.find('body').eq(0);\n        var modalWindow = openedWindows.get(modalInstance).value;\n\n        //clean up the stack\n        openedWindows.remove(modalInstance);\n\n        //remove window DOM element\n        removeAfterAnimate(modalWindow.modalDomEl, modalWindow.modalScope, function() {\n          body.toggleClass(OPENED_MODAL_CLASS, openedWindows.length() > 0);\n          checkRemoveBackdrop();\n        });\n      }\n\n      function checkRemoveBackdrop() {\n          //remove backdrop if no longer needed\n          if (backdropDomEl && backdropIndex() == -1) {\n            var backdropScopeRef = backdropScope;\n            removeAfterAnimate(backdropDomEl, backdropScope, function () {\n              backdropScopeRef = null;\n            });\n            backdropDomEl = undefined;\n            backdropScope = undefined;\n          }\n      }\n\n      function removeAfterAnimate(domEl, scope, done) {\n        // Closing animation\n        scope.animate = false;\n\n        if (domEl.attr('modal-animation') && $animate.enabled()) {\n          // transition out\n          domEl.one('$animate:close', function closeFn() {\n            $rootScope.$evalAsync(afterAnimating);\n          });\n        } else {\n          // Ensure this call is async\n          $timeout(afterAnimating);\n        }\n\n        function afterAnimating() {\n          if (afterAnimating.done) {\n            return;\n          }\n          afterAnimating.done = true;\n\n          domEl.remove();\n          scope.$destroy();\n          if (done) {\n            done();\n          }\n        }\n      }\n\n      $document.bind('keydown', function (evt) {\n        var modal;\n\n        if (evt.which === 27) {\n          modal = openedWindows.top();\n          if (modal && modal.value.keyboard) {\n            evt.preventDefault();\n            $rootScope.$apply(function () {\n              $modalStack.dismiss(modal.key, 'escape key press');\n            });\n          }\n        }\n      });\n\n      $modalStack.open = function (modalInstance, modal) {\n\n        var modalOpener = $document[0].activeElement;\n\n        openedWindows.add(modalInstance, {\n          deferred: modal.deferred,\n          renderDeferred: modal.renderDeferred,\n          modalScope: modal.scope,\n          backdrop: modal.backdrop,\n          keyboard: modal.keyboard\n        });\n\n        var body = $document.find('body').eq(0),\n            currBackdropIndex = backdropIndex();\n\n        if (currBackdropIndex >= 0 && !backdropDomEl) {\n          backdropScope = $rootScope.$new(true);\n          backdropScope.index = currBackdropIndex;\n          var angularBackgroundDomEl = angular.element('<div modal-backdrop=\"modal-backdrop\"></div>');\n          angularBackgroundDomEl.attr('backdrop-class', modal.backdropClass);\n          if (modal.animation) {\n            angularBackgroundDomEl.attr('modal-animation', 'true');\n          }\n          backdropDomEl = $compile(angularBackgroundDomEl)(backdropScope);\n          body.append(backdropDomEl);\n        }\n\n        var angularDomEl = angular.element('<div modal-window=\"modal-window\"></div>');\n        angularDomEl.attr({\n          'template-url': modal.windowTemplateUrl,\n          'window-class': modal.windowClass,\n          'size': modal.size,\n          'index': openedWindows.length() - 1,\n          'animate': 'animate'\n        }).html(modal.content);\n        if (modal.animation) {\n          angularDomEl.attr('modal-animation', 'true');\n        }\n\n        var modalDomEl = $compile(angularDomEl)(modal.scope);\n        openedWindows.top().value.modalDomEl = modalDomEl;\n        openedWindows.top().value.modalOpener = modalOpener;\n        body.append(modalDomEl);\n        body.addClass(OPENED_MODAL_CLASS);\n      };\n\n      function broadcastClosing(modalWindow, resultOrReason, closing) {\n          return !modalWindow.value.modalScope.$broadcast('modal.closing', resultOrReason, closing).defaultPrevented;\n      }\n\n      $modalStack.close = function (modalInstance, result) {\n        var modalWindow = openedWindows.get(modalInstance);\n        if (modalWindow && broadcastClosing(modalWindow, result, true)) {\n          modalWindow.value.deferred.resolve(result);\n          removeModalWindow(modalInstance);\n          modalWindow.value.modalOpener.focus();\n          return true;\n        }\n        return !modalWindow;\n      };\n\n      $modalStack.dismiss = function (modalInstance, reason) {\n        var modalWindow = openedWindows.get(modalInstance);\n        if (modalWindow && broadcastClosing(modalWindow, reason, false)) {\n          modalWindow.value.deferred.reject(reason);\n          removeModalWindow(modalInstance);\n          modalWindow.value.modalOpener.focus();\n          return true;\n        }\n        return !modalWindow;\n      };\n\n      $modalStack.dismissAll = function (reason) {\n        var topModal = this.getTop();\n        while (topModal && this.dismiss(topModal.key, reason)) {\n          topModal = this.getTop();\n        }\n      };\n\n      $modalStack.getTop = function () {\n        return openedWindows.top();\n      };\n\n      $modalStack.modalRendered = function (modalInstance) {\n        var modalWindow = openedWindows.get(modalInstance);\n        if (modalWindow) {\n          modalWindow.value.renderDeferred.resolve();\n        }\n      };\n\n      return $modalStack;\n    }])\n\n  .provider('$modal', function () {\n\n    var $modalProvider = {\n      options: {\n        animation: true,\n        backdrop: true, //can also be false or 'static'\n        keyboard: true\n      },\n      $get: ['$injector', '$rootScope', '$q', '$templateRequest', '$controller', '$modalStack',\n        function ($injector, $rootScope, $q, $templateRequest, $controller, $modalStack) {\n\n          var $modal = {};\n\n          function getTemplatePromise(options) {\n            return options.template ? $q.when(options.template) :\n              $templateRequest(angular.isFunction(options.templateUrl) ? (options.templateUrl)() : options.templateUrl);\n          }\n\n          function getResolvePromises(resolves) {\n            var promisesArr = [];\n            angular.forEach(resolves, function (value) {\n              if (angular.isFunction(value) || angular.isArray(value)) {\n                promisesArr.push($q.when($injector.invoke(value)));\n              }\n            });\n            return promisesArr;\n          }\n\n          $modal.open = function (modalOptions) {\n\n            var modalResultDeferred = $q.defer();\n            var modalOpenedDeferred = $q.defer();\n            var modalRenderDeferred = $q.defer();\n\n            //prepare an instance of a modal to be injected into controllers and returned to a caller\n            var modalInstance = {\n              result: modalResultDeferred.promise,\n              opened: modalOpenedDeferred.promise,\n              rendered: modalRenderDeferred.promise,\n              close: function (result) {\n                return $modalStack.close(modalInstance, result);\n              },\n              dismiss: function (reason) {\n                return $modalStack.dismiss(modalInstance, reason);\n              }\n            };\n\n            //merge and clean up options\n            modalOptions = angular.extend({}, $modalProvider.options, modalOptions);\n            modalOptions.resolve = modalOptions.resolve || {};\n\n            //verify options\n            if (!modalOptions.template && !modalOptions.templateUrl) {\n              throw new Error('One of template or templateUrl options is required.');\n            }\n\n            var templateAndResolvePromise =\n              $q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));\n\n\n            templateAndResolvePromise.then(function resolveSuccess(tplAndVars) {\n\n              var modalScope = (modalOptions.scope || $rootScope).$new();\n              modalScope.$close = modalInstance.close;\n              modalScope.$dismiss = modalInstance.dismiss;\n\n              var ctrlInstance, ctrlLocals = {};\n              var resolveIter = 1;\n\n              //controllers\n              if (modalOptions.controller) {\n                ctrlLocals.$scope = modalScope;\n                ctrlLocals.$modalInstance = modalInstance;\n                angular.forEach(modalOptions.resolve, function (value, key) {\n                  ctrlLocals[key] = tplAndVars[resolveIter++];\n                });\n\n                ctrlInstance = $controller(modalOptions.controller, ctrlLocals);\n                if (modalOptions.controllerAs) {\n                  modalScope[modalOptions.controllerAs] = ctrlInstance;\n                }\n              }\n\n              $modalStack.open(modalInstance, {\n                scope: modalScope,\n                deferred: modalResultDeferred,\n                renderDeferred: modalRenderDeferred,\n                content: tplAndVars[0],\n                animation: modalOptions.animation,\n                backdrop: modalOptions.backdrop,\n                keyboard: modalOptions.keyboard,\n                backdropClass: modalOptions.backdropClass,\n                windowClass: modalOptions.windowClass,\n                windowTemplateUrl: modalOptions.windowTemplateUrl,\n                size: modalOptions.size\n              });\n\n            }, function resolveError(reason) {\n              modalResultDeferred.reject(reason);\n            });\n\n            templateAndResolvePromise.then(function () {\n              modalOpenedDeferred.resolve(true);\n            }, function (reason) {\n              modalOpenedDeferred.reject(reason);\n            });\n\n            return modalInstance;\n          };\n\n          return $modal;\n        }]\n    };\n\n    return $modalProvider;\n  });\n\nangular.module('ui.bootstrap.pagination', [])\n\n.controller('PaginationController', ['$scope', '$attrs', '$parse', function ($scope, $attrs, $parse) {\n  var self = this,\n      ngModelCtrl = { $setViewValue: angular.noop }, // nullModelCtrl\n      setNumPages = $attrs.numPages ? $parse($attrs.numPages).assign : angular.noop;\n\n  this.init = function(ngModelCtrl_, config) {\n    ngModelCtrl = ngModelCtrl_;\n    this.config = config;\n\n    ngModelCtrl.$render = function() {\n      self.render();\n    };\n\n    if ($attrs.itemsPerPage) {\n      $scope.$parent.$watch($parse($attrs.itemsPerPage), function(value) {\n        self.itemsPerPage = parseInt(value, 10);\n        $scope.totalPages = self.calculateTotalPages();\n      });\n    } else {\n      this.itemsPerPage = config.itemsPerPage;\n    }\n\n    $scope.$watch('totalItems', function() {\n      $scope.totalPages = self.calculateTotalPages();\n    });\n\n    $scope.$watch('totalPages', function(value) {\n      setNumPages($scope.$parent, value); // Readonly variable\n\n      if ( $scope.page > value ) {\n        $scope.selectPage(value);\n      } else {\n        ngModelCtrl.$render();\n      }\n    });\n  };\n\n  this.calculateTotalPages = function() {\n    var totalPages = this.itemsPerPage < 1 ? 1 : Math.ceil($scope.totalItems / this.itemsPerPage);\n    return Math.max(totalPages || 0, 1);\n  };\n\n  this.render = function() {\n    $scope.page = parseInt(ngModelCtrl.$viewValue, 10) || 1;\n  };\n\n  $scope.selectPage = function(page, evt) {\n    if ( $scope.page !== page && page > 0 && page <= $scope.totalPages) {\n      if (evt && evt.target) {\n        evt.target.blur();\n      }\n      ngModelCtrl.$setViewValue(page);\n      ngModelCtrl.$render();\n    }\n  };\n\n  $scope.getText = function( key ) {\n    return $scope[key + 'Text'] || self.config[key + 'Text'];\n  };\n  $scope.noPrevious = function() {\n    return $scope.page === 1;\n  };\n  $scope.noNext = function() {\n    return $scope.page === $scope.totalPages;\n  };\n}])\n\n.constant('paginationConfig', {\n  itemsPerPage: 10,\n  boundaryLinks: false,\n  directionLinks: true,\n  firstText: 'First',\n  previousText: 'Previous',\n  nextText: 'Next',\n  lastText: 'Last',\n  rotate: true\n})\n\n.directive('pagination', ['$parse', 'paginationConfig', function($parse, paginationConfig) {\n  return {\n    restrict: 'EA',\n    scope: {\n      totalItems: '=',\n      firstText: '@',\n      previousText: '@',\n      nextText: '@',\n      lastText: '@'\n    },\n    require: ['pagination', '?ngModel'],\n    controller: 'PaginationController',\n    templateUrl: 'template/pagination/pagination.html',\n    replace: true,\n    link: function(scope, element, attrs, ctrls) {\n      var paginationCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      if (!ngModelCtrl) {\n         return; // do nothing if no ng-model\n      }\n\n      // Setup configuration parameters\n      var maxSize = angular.isDefined(attrs.maxSize) ? scope.$parent.$eval(attrs.maxSize) : paginationConfig.maxSize,\n          rotate = angular.isDefined(attrs.rotate) ? scope.$parent.$eval(attrs.rotate) : paginationConfig.rotate;\n      scope.boundaryLinks = angular.isDefined(attrs.boundaryLinks) ? scope.$parent.$eval(attrs.boundaryLinks) : paginationConfig.boundaryLinks;\n      scope.directionLinks = angular.isDefined(attrs.directionLinks) ? scope.$parent.$eval(attrs.directionLinks) : paginationConfig.directionLinks;\n\n      paginationCtrl.init(ngModelCtrl, paginationConfig);\n\n      if (attrs.maxSize) {\n        scope.$parent.$watch($parse(attrs.maxSize), function(value) {\n          maxSize = parseInt(value, 10);\n          paginationCtrl.render();\n        });\n      }\n\n      // Create page object used in template\n      function makePage(number, text, isActive) {\n        return {\n          number: number,\n          text: text,\n          active: isActive\n        };\n      }\n\n      function getPages(currentPage, totalPages) {\n        var pages = [];\n\n        // Default page limits\n        var startPage = 1, endPage = totalPages;\n        var isMaxSized = ( angular.isDefined(maxSize) && maxSize < totalPages );\n\n        // recompute if maxSize\n        if ( isMaxSized ) {\n          if ( rotate ) {\n            // Current page is displayed in the middle of the visible ones\n            startPage = Math.max(currentPage - Math.floor(maxSize/2), 1);\n            endPage   = startPage + maxSize - 1;\n\n            // Adjust if limit is exceeded\n            if (endPage > totalPages) {\n              endPage   = totalPages;\n              startPage = endPage - maxSize + 1;\n            }\n          } else {\n            // Visible pages are paginated with maxSize\n            startPage = ((Math.ceil(currentPage / maxSize) - 1) * maxSize) + 1;\n\n            // Adjust last page if limit is exceeded\n            endPage = Math.min(startPage + maxSize - 1, totalPages);\n          }\n        }\n\n        // Add page number links\n        for (var number = startPage; number <= endPage; number++) {\n          var page = makePage(number, number, number === currentPage);\n          pages.push(page);\n        }\n\n        // Add links to move between page sets\n        if ( isMaxSized && ! rotate ) {\n          if ( startPage > 1 ) {\n            var previousPageSet = makePage(startPage - 1, '...', false);\n            pages.unshift(previousPageSet);\n          }\n\n          if ( endPage < totalPages ) {\n            var nextPageSet = makePage(endPage + 1, '...', false);\n            pages.push(nextPageSet);\n          }\n        }\n\n        return pages;\n      }\n\n      var originalRender = paginationCtrl.render;\n      paginationCtrl.render = function() {\n        originalRender();\n        if (scope.page > 0 && scope.page <= scope.totalPages) {\n          scope.pages = getPages(scope.page, scope.totalPages);\n        }\n      };\n    }\n  };\n}])\n\n.constant('pagerConfig', {\n  itemsPerPage: 10,\n  previousText: '« Previous',\n  nextText: 'Next »',\n  align: true\n})\n\n.directive('pager', ['pagerConfig', function(pagerConfig) {\n  return {\n    restrict: 'EA',\n    scope: {\n      totalItems: '=',\n      previousText: '@',\n      nextText: '@'\n    },\n    require: ['pager', '?ngModel'],\n    controller: 'PaginationController',\n    templateUrl: 'template/pagination/pager.html',\n    replace: true,\n    link: function(scope, element, attrs, ctrls) {\n      var paginationCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      if (!ngModelCtrl) {\n         return; // do nothing if no ng-model\n      }\n\n      scope.align = angular.isDefined(attrs.align) ? scope.$parent.$eval(attrs.align) : pagerConfig.align;\n      paginationCtrl.init(ngModelCtrl, pagerConfig);\n    }\n  };\n}]);\n\n/**\n * The following features are still outstanding: animation as a\n * function, placement as a function, inside, support for more triggers than\n * just mouse enter/leave, html tooltips, and selector delegation.\n */\nangular.module( 'ui.bootstrap.tooltip', [ 'ui.bootstrap.position', 'ui.bootstrap.bindHtml' ] )\n\n/**\n * The $tooltip service creates tooltip- and popover-like directives as well as\n * houses global options for them.\n */\n.provider( '$tooltip', function () {\n  // The default options tooltip and popover.\n  var defaultOptions = {\n    placement: 'top',\n    animation: true,\n    popupDelay: 0,\n    useContentExp: false\n  };\n\n  // Default hide triggers for each show trigger\n  var triggerMap = {\n    'mouseenter': 'mouseleave',\n    'click': 'click',\n    'focus': 'blur'\n  };\n\n  // The options specified to the provider globally.\n  var globalOptions = {};\n\n  /**\n   * `options({})` allows global configuration of all tooltips in the\n   * application.\n   *\n   *   var app = angular.module( 'App', ['ui.bootstrap.tooltip'], function( $tooltipProvider ) {\n   *     // place tooltips left instead of top by default\n   *     $tooltipProvider.options( { placement: 'left' } );\n   *   });\n   */\n\tthis.options = function( value ) {\n\t\tangular.extend( globalOptions, value );\n\t};\n\n  /**\n   * This allows you to extend the set of trigger mappings available. E.g.:\n   *\n   *   $tooltipProvider.setTriggers( 'openTrigger': 'closeTrigger' );\n   */\n  this.setTriggers = function setTriggers ( triggers ) {\n    angular.extend( triggerMap, triggers );\n  };\n\n  /**\n   * This is a helper function for translating camel-case to snake-case.\n   */\n  function snake_case(name){\n    var regexp = /[A-Z]/g;\n    var separator = '-';\n    return name.replace(regexp, function(letter, pos) {\n      return (pos ? separator : '') + letter.toLowerCase();\n    });\n  }\n\n  /**\n   * Returns the actual instance of the $tooltip service.\n   * TODO support multiple triggers\n   */\n  this.$get = [ '$window', '$compile', '$timeout', '$document', '$position', '$interpolate', function ( $window, $compile, $timeout, $document, $position, $interpolate ) {\n    return function $tooltip ( type, prefix, defaultTriggerShow, options ) {\n      options = angular.extend( {}, defaultOptions, globalOptions, options );\n\n      /**\n       * Returns an object of show and hide triggers.\n       *\n       * If a trigger is supplied,\n       * it is used to show the tooltip; otherwise, it will use the `trigger`\n       * option passed to the `$tooltipProvider.options` method; else it will\n       * default to the trigger supplied to this directive factory.\n       *\n       * The hide trigger is based on the show trigger. If the `trigger` option\n       * was passed to the `$tooltipProvider.options` method, it will use the\n       * mapped trigger from `triggerMap` or the passed trigger if the map is\n       * undefined; otherwise, it uses the `triggerMap` value of the show\n       * trigger; else it will just use the show trigger.\n       */\n      function getTriggers ( trigger ) {\n        var show = trigger || options.trigger || defaultTriggerShow;\n        var hide = triggerMap[show] || show;\n        return {\n          show: show,\n          hide: hide\n        };\n      }\n\n      var directiveName = snake_case( type );\n\n      var startSym = $interpolate.startSymbol();\n      var endSym = $interpolate.endSymbol();\n      var template =\n        '<div '+ directiveName +'-popup '+\n          'title=\"'+startSym+'title'+endSym+'\" '+\n          (options.useContentExp ?\n            'content-exp=\"contentExp()\" ' :\n            'content=\"'+startSym+'content'+endSym+'\" ') +\n          'placement=\"'+startSym+'placement'+endSym+'\" '+\n          'popup-class=\"'+startSym+'popupClass'+endSym+'\" '+\n          'animation=\"animation\" '+\n          'is-open=\"isOpen\"'+\n          'origin-scope=\"origScope\" '+\n          '>'+\n        '</div>';\n\n      return {\n        restrict: 'EA',\n        compile: function (tElem, tAttrs) {\n          var tooltipLinker = $compile( template );\n\n          return function link ( scope, element, attrs, tooltipCtrl ) {\n            var tooltip;\n            var tooltipLinkedScope;\n            var transitionTimeout;\n            var popupTimeout;\n            var appendToBody = angular.isDefined( options.appendToBody ) ? options.appendToBody : false;\n            var triggers = getTriggers( undefined );\n            var hasEnableExp = angular.isDefined(attrs[prefix+'Enable']);\n            var ttScope = scope.$new(true);\n\n            var positionTooltip = function () {\n              if (!tooltip) { return; }\n\n              var ttPosition = $position.positionElements(element, tooltip, ttScope.placement, appendToBody);\n              ttPosition.top += 'px';\n              ttPosition.left += 'px';\n\n              // Now set the calculated positioning.\n              tooltip.css( ttPosition );\n            };\n\n            // Set up the correct scope to allow transclusion later\n            ttScope.origScope = scope;\n\n            // By default, the tooltip is not open.\n            // TODO add ability to start tooltip opened\n            ttScope.isOpen = false;\n\n            function toggleTooltipBind () {\n              if ( ! ttScope.isOpen ) {\n                showTooltipBind();\n              } else {\n                hideTooltipBind();\n              }\n            }\n\n            // Show the tooltip with delay if specified, otherwise show it immediately\n            function showTooltipBind() {\n              if(hasEnableExp && !scope.$eval(attrs[prefix+'Enable'])) {\n                return;\n              }\n\n              prepareTooltip();\n\n              if ( ttScope.popupDelay ) {\n                // Do nothing if the tooltip was already scheduled to pop-up.\n                // This happens if show is triggered multiple times before any hide is triggered.\n                if (!popupTimeout) {\n                  popupTimeout = $timeout( show, ttScope.popupDelay, false );\n                  popupTimeout.then(function(reposition){reposition();});\n                }\n              } else {\n                show()();\n              }\n            }\n\n            function hideTooltipBind () {\n              scope.$apply(function () {\n                hide();\n              });\n            }\n\n            // Show the tooltip popup element.\n            function show() {\n\n              popupTimeout = null;\n\n              // If there is a pending remove transition, we must cancel it, lest the\n              // tooltip be mysteriously removed.\n              if ( transitionTimeout ) {\n                $timeout.cancel( transitionTimeout );\n                transitionTimeout = null;\n              }\n\n              // Don't show empty tooltips.\n              if ( !(options.useContentExp ? ttScope.contentExp() : ttScope.content) ) {\n                return angular.noop;\n              }\n\n              createTooltip();\n\n              // Set the initial positioning.\n              tooltip.css({ top: 0, left: 0, display: 'block' });\n              ttScope.$digest();\n\n              positionTooltip();\n\n              // And show the tooltip.\n              ttScope.isOpen = true;\n              ttScope.$apply(); // digest required as $apply is not called\n\n              // Return positioning function as promise callback for correct\n              // positioning after draw.\n              return positionTooltip;\n            }\n\n            // Hide the tooltip popup element.\n            function hide() {\n              // First things first: we don't show it anymore.\n              ttScope.isOpen = false;\n\n              //if tooltip is going to be shown after delay, we must cancel this\n              $timeout.cancel( popupTimeout );\n              popupTimeout = null;\n\n              // And now we remove it from the DOM. However, if we have animation, we\n              // need to wait for it to expire beforehand.\n              // FIXME: this is a placeholder for a port of the transitions library.\n              if ( ttScope.animation ) {\n                if (!transitionTimeout) {\n                  transitionTimeout = $timeout(removeTooltip, 500);\n                }\n              } else {\n                removeTooltip();\n              }\n            }\n\n            function createTooltip() {\n              // There can only be one tooltip element per directive shown at once.\n              if (tooltip) {\n                removeTooltip();\n              }\n              tooltipLinkedScope = ttScope.$new();\n              tooltip = tooltipLinker(tooltipLinkedScope, function (tooltip) {\n                if ( appendToBody ) {\n                  $document.find( 'body' ).append( tooltip );\n                } else {\n                  element.after( tooltip );\n                }\n              });\n\n              tooltipLinkedScope.$watch(function () {\n                $timeout(positionTooltip, 0, false);\n              });\n\n              if (options.useContentExp) {\n                tooltipLinkedScope.$watch('contentExp()', function (val) {\n                  if (!val && ttScope.isOpen ) {\n                    hide();\n                  }\n                });\n              }\n            }\n\n            function removeTooltip() {\n              transitionTimeout = null;\n              if (tooltip) {\n                tooltip.remove();\n                tooltip = null;\n              }\n              if (tooltipLinkedScope) {\n                tooltipLinkedScope.$destroy();\n                tooltipLinkedScope = null;\n              }\n            }\n\n            function prepareTooltip() {\n              prepPopupClass();\n              prepPlacement();\n              prepPopupDelay();\n            }\n\n            ttScope.contentExp = function () {\n              return scope.$eval(attrs[type]);\n            };\n\n            /**\n             * Observe the relevant attributes.\n             */\n            if (!options.useContentExp) {\n              attrs.$observe( type, function ( val ) {\n                ttScope.content = val;\n\n                if (!val && ttScope.isOpen ) {\n                  hide();\n                }\n              });\n            }\n\n            attrs.$observe( 'disabled', function ( val ) {\n              if (val && ttScope.isOpen ) {\n                hide();\n              }\n            });\n\n            attrs.$observe( prefix+'Title', function ( val ) {\n              ttScope.title = val;\n            });\n\n            function prepPopupClass() {\n              ttScope.popupClass = attrs[prefix + 'Class'];\n            }\n\n            function prepPlacement() {\n              var val = attrs[ prefix + 'Placement' ];\n              ttScope.placement = angular.isDefined( val ) ? val : options.placement;\n            }\n\n            function prepPopupDelay() {\n              var val = attrs[ prefix + 'PopupDelay' ];\n              var delay = parseInt( val, 10 );\n              ttScope.popupDelay = ! isNaN(delay) ? delay : options.popupDelay;\n            }\n\n            var unregisterTriggers = function () {\n              element.unbind(triggers.show, showTooltipBind);\n              element.unbind(triggers.hide, hideTooltipBind);\n            };\n\n            function prepTriggers() {\n              var val = attrs[ prefix + 'Trigger' ];\n              unregisterTriggers();\n\n              triggers = getTriggers( val );\n\n              if ( triggers.show === triggers.hide ) {\n                element.bind( triggers.show, toggleTooltipBind );\n              } else {\n                element.bind( triggers.show, showTooltipBind );\n                element.bind( triggers.hide, hideTooltipBind );\n              }\n            }\n            prepTriggers();\n\n            var animation = scope.$eval(attrs[prefix + 'Animation']);\n            ttScope.animation = angular.isDefined(animation) ? !!animation : options.animation;\n\n            var appendToBodyVal = scope.$eval(attrs[prefix + 'AppendToBody']);\n            appendToBody = angular.isDefined(appendToBodyVal) ? appendToBodyVal : appendToBody;\n\n            // if a tooltip is attached to <body> we need to remove it on\n            // location change as its parent scope will probably not be destroyed\n            // by the change.\n            if ( appendToBody ) {\n              scope.$on('$locationChangeSuccess', function closeTooltipOnLocationChangeSuccess () {\n              if ( ttScope.isOpen ) {\n                hide();\n              }\n            });\n            }\n\n            // Make sure tooltip is destroyed and removed.\n            scope.$on('$destroy', function onDestroyTooltip() {\n              $timeout.cancel( transitionTimeout );\n              $timeout.cancel( popupTimeout );\n              unregisterTriggers();\n              removeTooltip();\n              ttScope = null;\n            });\n          };\n        }\n      };\n    };\n  }];\n})\n\n// This is mostly ngInclude code but with a custom scope\n.directive( 'tooltipTemplateTransclude', [\n         '$animate', '$sce', '$compile', '$templateRequest',\nfunction ($animate ,  $sce ,  $compile ,  $templateRequest) {\n  return {\n    link: function ( scope, elem, attrs ) {\n      var origScope = scope.$eval(attrs.tooltipTemplateTranscludeScope);\n\n      var changeCounter = 0,\n        currentScope,\n        previousElement,\n        currentElement;\n\n      var cleanupLastIncludeContent = function() {\n        if (previousElement) {\n          previousElement.remove();\n          previousElement = null;\n        }\n        if (currentScope) {\n          currentScope.$destroy();\n          currentScope = null;\n        }\n        if (currentElement) {\n          $animate.leave(currentElement).then(function() {\n            previousElement = null;\n          });\n          previousElement = currentElement;\n          currentElement = null;\n        }\n      };\n\n      scope.$watch($sce.parseAsResourceUrl(attrs.tooltipTemplateTransclude), function (src) {\n        var thisChangeId = ++changeCounter;\n\n        if (src) {\n          //set the 2nd param to true to ignore the template request error so that the inner\n          //contents and scope can be cleaned up.\n          $templateRequest(src, true).then(function(response) {\n            if (thisChangeId !== changeCounter) { return; }\n            var newScope = origScope.$new();\n            var template = response;\n\n            var clone = $compile(template)(newScope, function(clone) {\n              cleanupLastIncludeContent();\n              $animate.enter(clone, elem);\n            });\n\n            currentScope = newScope;\n            currentElement = clone;\n\n            currentScope.$emit('$includeContentLoaded', src);\n          }, function() {\n            if (thisChangeId === changeCounter) {\n              cleanupLastIncludeContent();\n              scope.$emit('$includeContentError', src);\n            }\n          });\n          scope.$emit('$includeContentRequested', src);\n        } else {\n          cleanupLastIncludeContent();\n        }\n      });\n\n      scope.$on('$destroy', cleanupLastIncludeContent);\n    }\n  };\n}])\n\n/**\n * Note that it's intentional that these classes are *not* applied through $animate.\n * They must not be animated as they're expected to be present on the tooltip on\n * initialization.\n */\n.directive('tooltipClasses', function () {\n  return {\n    restrict: 'A',\n    link: function (scope, element, attrs) {\n      if (scope.placement) {\n        element.addClass(scope.placement);\n      }\n      if (scope.popupClass) {\n        element.addClass(scope.popupClass);\n      }\n      if (scope.animation()) {\n        element.addClass(attrs.tooltipAnimationClass);\n      }\n    }\n  };\n})\n\n.directive( 'tooltipPopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { content: '@', placement: '@', popupClass: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/tooltip/tooltip-popup.html'\n  };\n})\n\n.directive( 'tooltip', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip( 'tooltip', 'tooltip', 'mouseenter' );\n}])\n\n.directive( 'tooltipTemplatePopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { contentExp: '&', placement: '@', popupClass: '@', animation: '&', isOpen: '&',\n      originScope: '&' },\n    templateUrl: 'template/tooltip/tooltip-template-popup.html'\n  };\n})\n\n.directive( 'tooltipTemplate', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip('tooltipTemplate', 'tooltip', 'mouseenter', {\n    useContentExp: true\n  });\n}])\n\n.directive( 'tooltipHtmlPopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { contentExp: '&', placement: '@', popupClass: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/tooltip/tooltip-html-popup.html'\n  };\n})\n\n.directive( 'tooltipHtml', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip('tooltipHtml', 'tooltip', 'mouseenter', {\n    useContentExp: true\n  });\n}])\n\n/*\nDeprecated\n*/\n.directive( 'tooltipHtmlUnsafePopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { content: '@', placement: '@', popupClass: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/tooltip/tooltip-html-unsafe-popup.html'\n  };\n})\n\n.value('tooltipHtmlUnsafeSuppressDeprecated', false)\n.directive( 'tooltipHtmlUnsafe', [\n          '$tooltip', 'tooltipHtmlUnsafeSuppressDeprecated', '$log',\nfunction ( $tooltip ,  tooltipHtmlUnsafeSuppressDeprecated ,  $log) {\n  if (!tooltipHtmlUnsafeSuppressDeprecated) {\n    $log.warn('tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead.');\n  }\n  return $tooltip( 'tooltipHtmlUnsafe', 'tooltip', 'mouseenter' );\n}]);\n\n/**\n * The following features are still outstanding: popup delay, animation as a\n * function, placement as a function, inside, support for more triggers than\n * just mouse enter/leave, html popovers, and selector delegatation.\n */\nangular.module( 'ui.bootstrap.popover', [ 'ui.bootstrap.tooltip' ] )\n\n.directive( 'popoverTemplatePopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { title: '@', contentExp: '&', placement: '@', popupClass: '@', animation: '&', isOpen: '&',\n      originScope: '&' },\n    templateUrl: 'template/popover/popover-template.html'\n  };\n})\n\n.directive( 'popoverTemplate', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip( 'popoverTemplate', 'popover', 'click', {\n    useContentExp: true\n  } );\n}])\n\n.directive( 'popoverPopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { title: '@', content: '@', placement: '@', popupClass: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/popover/popover.html'\n  };\n})\n\n.directive( 'popover', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip( 'popover', 'popover', 'click' );\n}]);\n\nangular.module('ui.bootstrap.progressbar', [])\n\n.constant('progressConfig', {\n  animate: true,\n  max: 100\n})\n\n.controller('ProgressController', ['$scope', '$attrs', 'progressConfig', function($scope, $attrs, progressConfig) {\n    var self = this,\n        animate = angular.isDefined($attrs.animate) ? $scope.$parent.$eval($attrs.animate) : progressConfig.animate;\n\n    this.bars = [];\n    $scope.max = angular.isDefined($scope.max) ? $scope.max : progressConfig.max;\n\n    this.addBar = function(bar, element) {\n        if ( !animate ) {\n            element.css({'transition': 'none'});\n        }\n\n        this.bars.push(bar);\n\n        bar.$watch('value', function( value ) {\n            bar.percent = +(100 * value / $scope.max).toFixed(2);\n        });\n\n        bar.$on('$destroy', function() {\n            element = null;\n            self.removeBar(bar);\n        });\n    };\n\n    this.removeBar = function(bar) {\n        this.bars.splice(this.bars.indexOf(bar), 1);\n    };\n}])\n\n.directive('progress', function() {\n    return {\n        restrict: 'EA',\n        replace: true,\n        transclude: true,\n        controller: 'ProgressController',\n        require: 'progress',\n        scope: {},\n        templateUrl: 'template/progressbar/progress.html'\n    };\n})\n\n.directive('bar', function() {\n    return {\n        restrict: 'EA',\n        replace: true,\n        transclude: true,\n        require: '^progress',\n        scope: {\n            value: '=',\n            max: '=?',\n            type: '@'\n        },\n        templateUrl: 'template/progressbar/bar.html',\n        link: function(scope, element, attrs, progressCtrl) {\n            progressCtrl.addBar(scope, element);\n        }\n    };\n})\n\n.directive('progressbar', function() {\n    return {\n        restrict: 'EA',\n        replace: true,\n        transclude: true,\n        controller: 'ProgressController',\n        scope: {\n            value: '=',\n            max: '=?',\n            type: '@'\n        },\n        templateUrl: 'template/progressbar/progressbar.html',\n        link: function(scope, element, attrs, progressCtrl) {\n            progressCtrl.addBar(scope, angular.element(element.children()[0]));\n        }\n    };\n});\n\nangular.module('ui.bootstrap.rating', [])\n\n.constant('ratingConfig', {\n  max: 5,\n  stateOn: null,\n  stateOff: null\n})\n\n.controller('RatingController', ['$scope', '$attrs', 'ratingConfig', function($scope, $attrs, ratingConfig) {\n  var ngModelCtrl  = { $setViewValue: angular.noop };\n\n  this.init = function(ngModelCtrl_) {\n    ngModelCtrl = ngModelCtrl_;\n    ngModelCtrl.$render = this.render;\n\n    ngModelCtrl.$formatters.push(function(value) {\n      if (angular.isNumber(value) && value << 0 !== value) {\n        value = Math.round(value);\n      }\n      return value;\n    });\n\n    this.stateOn = angular.isDefined($attrs.stateOn) ? $scope.$parent.$eval($attrs.stateOn) : ratingConfig.stateOn;\n    this.stateOff = angular.isDefined($attrs.stateOff) ? $scope.$parent.$eval($attrs.stateOff) : ratingConfig.stateOff;\n\n    var ratingStates = angular.isDefined($attrs.ratingStates) ? $scope.$parent.$eval($attrs.ratingStates) :\n                        new Array( angular.isDefined($attrs.max) ? $scope.$parent.$eval($attrs.max) : ratingConfig.max );\n    $scope.range = this.buildTemplateObjects(ratingStates);\n  };\n\n  this.buildTemplateObjects = function(states) {\n    for (var i = 0, n = states.length; i < n; i++) {\n      states[i] = angular.extend({ index: i }, { stateOn: this.stateOn, stateOff: this.stateOff }, states[i]);\n    }\n    return states;\n  };\n\n  $scope.rate = function(value) {\n    if ( !$scope.readonly && value >= 0 && value <= $scope.range.length ) {\n      ngModelCtrl.$setViewValue(value);\n      ngModelCtrl.$render();\n    }\n  };\n\n  $scope.enter = function(value) {\n    if ( !$scope.readonly ) {\n      $scope.value = value;\n    }\n    $scope.onHover({value: value});\n  };\n\n  $scope.reset = function() {\n    $scope.value = ngModelCtrl.$viewValue;\n    $scope.onLeave();\n  };\n\n  $scope.onKeydown = function(evt) {\n    if (/(37|38|39|40)/.test(evt.which)) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      $scope.rate( $scope.value + (evt.which === 38 || evt.which === 39 ? 1 : -1) );\n    }\n  };\n\n  this.render = function() {\n    $scope.value = ngModelCtrl.$viewValue;\n  };\n}])\n\n.directive('rating', function() {\n  return {\n    restrict: 'EA',\n    require: ['rating', 'ngModel'],\n    scope: {\n      readonly: '=?',\n      onHover: '&',\n      onLeave: '&'\n    },\n    controller: 'RatingController',\n    templateUrl: 'template/rating/rating.html',\n    replace: true,\n    link: function(scope, element, attrs, ctrls) {\n      var ratingCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n      ratingCtrl.init( ngModelCtrl );\n    }\n  };\n});\n\n/**\n * @ngdoc overview\n * @name ui.bootstrap.tabs\n *\n * @description\n * AngularJS version of the tabs directive.\n */\n\nangular.module('ui.bootstrap.tabs', [])\n\n.controller('TabsetController', ['$scope', function TabsetCtrl($scope) {\n  var ctrl = this,\n      tabs = ctrl.tabs = $scope.tabs = [];\n\n  ctrl.select = function(selectedTab) {\n    angular.forEach(tabs, function(tab) {\n      if (tab.active && tab !== selectedTab) {\n        tab.active = false;\n        tab.onDeselect();\n      }\n    });\n    selectedTab.active = true;\n    selectedTab.onSelect();\n  };\n\n  ctrl.addTab = function addTab(tab) {\n    tabs.push(tab);\n    // we can't run the select function on the first tab\n    // since that would select it twice\n    if (tabs.length === 1 && tab.active !== false) {\n      tab.active = true;\n    } else if (tab.active) {\n      ctrl.select(tab);\n    }\n    else {\n      tab.active = false;\n    }\n  };\n\n  ctrl.removeTab = function removeTab(tab) {\n    var index = tabs.indexOf(tab);\n    //Select a new tab if the tab to be removed is selected and not destroyed\n    if (tab.active && tabs.length > 1 && !destroyed) {\n      //If this is the last tab, select the previous tab. else, the next tab.\n      var newActiveIndex = index == tabs.length - 1 ? index - 1 : index + 1;\n      ctrl.select(tabs[newActiveIndex]);\n    }\n    tabs.splice(index, 1);\n  };\n\n  var destroyed;\n  $scope.$on('$destroy', function() {\n    destroyed = true;\n  });\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tabset\n * @restrict EA\n *\n * @description\n * Tabset is the outer container for the tabs directive\n *\n * @param {boolean=} vertical Whether or not to use vertical styling for the tabs.\n * @param {boolean=} justified Whether or not to use justified styling for the tabs.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <tabset>\n      <tab heading=\"Tab 1\"><b>First</b> Content!</tab>\n      <tab heading=\"Tab 2\"><i>Second</i> Content!</tab>\n    </tabset>\n    <hr />\n    <tabset vertical=\"true\">\n      <tab heading=\"Vertical Tab 1\"><b>First</b> Vertical Content!</tab>\n      <tab heading=\"Vertical Tab 2\"><i>Second</i> Vertical Content!</tab>\n    </tabset>\n    <tabset justified=\"true\">\n      <tab heading=\"Justified Tab 1\"><b>First</b> Justified Content!</tab>\n      <tab heading=\"Justified Tab 2\"><i>Second</i> Justified Content!</tab>\n    </tabset>\n  </file>\n</example>\n */\n.directive('tabset', function() {\n  return {\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    scope: {\n      type: '@'\n    },\n    controller: 'TabsetController',\n    templateUrl: 'template/tabs/tabset.html',\n    link: function(scope, element, attrs) {\n      scope.vertical = angular.isDefined(attrs.vertical) ? scope.$parent.$eval(attrs.vertical) : false;\n      scope.justified = angular.isDefined(attrs.justified) ? scope.$parent.$eval(attrs.justified) : false;\n    }\n  };\n})\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tab\n * @restrict EA\n *\n * @param {string=} heading The visible heading, or title, of the tab. Set HTML headings with {@link ui.bootstrap.tabs.directive:tabHeading tabHeading}.\n * @param {string=} select An expression to evaluate when the tab is selected.\n * @param {boolean=} active A binding, telling whether or not this tab is selected.\n * @param {boolean=} disabled A binding, telling whether or not this tab is disabled.\n *\n * @description\n * Creates a tab with a heading and content. Must be placed within a {@link ui.bootstrap.tabs.directive:tabset tabset}.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <div ng-controller=\"TabsDemoCtrl\">\n      <button class=\"btn btn-small\" ng-click=\"items[0].active = true\">\n        Select item 1, using active binding\n      </button>\n      <button class=\"btn btn-small\" ng-click=\"items[1].disabled = !items[1].disabled\">\n        Enable/disable item 2, using disabled binding\n      </button>\n      <br />\n      <tabset>\n        <tab heading=\"Tab 1\">First Tab</tab>\n        <tab select=\"alertMe()\">\n          <tab-heading><i class=\"icon-bell\"></i> Alert me!</tab-heading>\n          Second Tab, with alert callback and html heading!\n        </tab>\n        <tab ng-repeat=\"item in items\"\n          heading=\"{{item.title}}\"\n          disabled=\"item.disabled\"\n          active=\"item.active\">\n          {{item.content}}\n        </tab>\n      </tabset>\n    </div>\n  </file>\n  <file name=\"script.js\">\n    function TabsDemoCtrl($scope) {\n      $scope.items = [\n        { title:\"Dynamic Title 1\", content:\"Dynamic Item 0\" },\n        { title:\"Dynamic Title 2\", content:\"Dynamic Item 1\", disabled: true }\n      ];\n\n      $scope.alertMe = function() {\n        setTimeout(function() {\n          alert(\"You've selected the alert tab!\");\n        });\n      };\n    };\n  </file>\n</example>\n */\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tabHeading\n * @restrict EA\n *\n * @description\n * Creates an HTML heading for a {@link ui.bootstrap.tabs.directive:tab tab}. Must be placed as a child of a tab element.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <tabset>\n      <tab>\n        <tab-heading><b>HTML</b> in my titles?!</tab-heading>\n        And some content, too!\n      </tab>\n      <tab>\n        <tab-heading><i class=\"icon-heart\"></i> Icon heading?!?</tab-heading>\n        That's right.\n      </tab>\n    </tabset>\n  </file>\n</example>\n */\n.directive('tab', ['$parse', '$log', function($parse, $log) {\n  return {\n    require: '^tabset',\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/tabs/tab.html',\n    transclude: true,\n    scope: {\n      active: '=?',\n      heading: '@',\n      onSelect: '&select', //This callback is called in contentHeadingTransclude\n                          //once it inserts the tab's content into the dom\n      onDeselect: '&deselect'\n    },\n    controller: function() {\n      //Empty controller so other directives can require being 'under' a tab\n    },\n    compile: function(elm, attrs, transclude) {\n      return function postLink(scope, elm, attrs, tabsetCtrl) {\n        scope.$watch('active', function(active) {\n          if (active) {\n            tabsetCtrl.select(scope);\n          }\n        });\n\n        scope.disabled = false;\n        if ( attrs.disable ) {\n          scope.$parent.$watch($parse(attrs.disable), function(value) {\n            scope.disabled = !! value;\n          });\n        }\n\n        // Deprecation support of \"disabled\" parameter\n        // fix(tab): IE9 disabled attr renders grey text on enabled tab #2677\n        // This code is duplicated from the lines above to make it easy to remove once\n        // the feature has been completely deprecated\n        if ( attrs.disabled ) {\n          $log.warn('Use of \"disabled\" attribute has been deprecated, please use \"disable\"');\n          scope.$parent.$watch($parse(attrs.disabled), function(value) {\n            scope.disabled = !! value;\n          });\n        }\n\n        scope.select = function() {\n          if ( !scope.disabled ) {\n            scope.active = true;\n          }\n        };\n\n        tabsetCtrl.addTab(scope);\n        scope.$on('$destroy', function() {\n          tabsetCtrl.removeTab(scope);\n        });\n\n        //We need to transclude later, once the content container is ready.\n        //when this link happens, we're inside a tab heading.\n        scope.$transcludeFn = transclude;\n      };\n    }\n  };\n}])\n\n.directive('tabHeadingTransclude', [function() {\n  return {\n    restrict: 'A',\n    require: '^tab',\n    link: function(scope, elm, attrs, tabCtrl) {\n      scope.$watch('headingElement', function updateHeadingElement(heading) {\n        if (heading) {\n          elm.html('');\n          elm.append(heading);\n        }\n      });\n    }\n  };\n}])\n\n.directive('tabContentTransclude', function() {\n  return {\n    restrict: 'A',\n    require: '^tabset',\n    link: function(scope, elm, attrs) {\n      var tab = scope.$eval(attrs.tabContentTransclude);\n\n      //Now our tab is ready to be transcluded: both the tab heading area\n      //and the tab content area are loaded.  Transclude 'em both.\n      tab.$transcludeFn(tab.$parent, function(contents) {\n        angular.forEach(contents, function(node) {\n          if (isTabHeading(node)) {\n            //Let tabHeadingTransclude know.\n            tab.headingElement = node;\n          } else {\n            elm.append(node);\n          }\n        });\n      });\n    }\n  };\n  function isTabHeading(node) {\n    return node.tagName &&  (\n      node.hasAttribute('tab-heading') ||\n      node.hasAttribute('data-tab-heading') ||\n      node.tagName.toLowerCase() === 'tab-heading' ||\n      node.tagName.toLowerCase() === 'data-tab-heading'\n    );\n  }\n})\n\n;\n\nangular.module('ui.bootstrap.timepicker', [])\n\n.constant('timepickerConfig', {\n  hourStep: 1,\n  minuteStep: 1,\n  showMeridian: true,\n  meridians: null,\n  readonlyInput: false,\n  mousewheel: true,\n  arrowkeys: true\n})\n\n.controller('TimepickerController', ['$scope', '$attrs', '$parse', '$log', '$locale', 'timepickerConfig', function($scope, $attrs, $parse, $log, $locale, timepickerConfig) {\n  var selected = new Date(),\n      ngModelCtrl = { $setViewValue: angular.noop }, // nullModelCtrl\n      meridians = angular.isDefined($attrs.meridians) ? $scope.$parent.$eval($attrs.meridians) : timepickerConfig.meridians || $locale.DATETIME_FORMATS.AMPMS;\n\n  this.init = function( ngModelCtrl_, inputs ) {\n    ngModelCtrl = ngModelCtrl_;\n    ngModelCtrl.$render = this.render;\n\n    ngModelCtrl.$formatters.unshift(function (modelValue) {\n      return modelValue ? new Date( modelValue ) : null;\n    });\n\n    var hoursInputEl = inputs.eq(0),\n        minutesInputEl = inputs.eq(1);\n\n    var mousewheel = angular.isDefined($attrs.mousewheel) ? $scope.$parent.$eval($attrs.mousewheel) : timepickerConfig.mousewheel;\n    if ( mousewheel ) {\n      this.setupMousewheelEvents( hoursInputEl, minutesInputEl );\n    }\n\n    var arrowkeys = angular.isDefined($attrs.arrowkeys) ? $scope.$parent.$eval($attrs.arrowkeys) : timepickerConfig.arrowkeys;\n    if (arrowkeys) {\n      this.setupArrowkeyEvents( hoursInputEl, minutesInputEl );\n    }\n\n    $scope.readonlyInput = angular.isDefined($attrs.readonlyInput) ? $scope.$parent.$eval($attrs.readonlyInput) : timepickerConfig.readonlyInput;\n    this.setupInputEvents( hoursInputEl, minutesInputEl );\n  };\n\n  var hourStep = timepickerConfig.hourStep;\n  if ($attrs.hourStep) {\n    $scope.$parent.$watch($parse($attrs.hourStep), function(value) {\n      hourStep = parseInt(value, 10);\n    });\n  }\n\n  var minuteStep = timepickerConfig.minuteStep;\n  if ($attrs.minuteStep) {\n    $scope.$parent.$watch($parse($attrs.minuteStep), function(value) {\n      minuteStep = parseInt(value, 10);\n    });\n  }\n\n  // 12H / 24H mode\n  $scope.showMeridian = timepickerConfig.showMeridian;\n  if ($attrs.showMeridian) {\n    $scope.$parent.$watch($parse($attrs.showMeridian), function(value) {\n      $scope.showMeridian = !!value;\n\n      if ( ngModelCtrl.$error.time ) {\n        // Evaluate from template\n        var hours = getHoursFromTemplate(), minutes = getMinutesFromTemplate();\n        if (angular.isDefined( hours ) && angular.isDefined( minutes )) {\n          selected.setHours( hours );\n          refresh();\n        }\n      } else {\n        updateTemplate();\n      }\n    });\n  }\n\n  // Get $scope.hours in 24H mode if valid\n  function getHoursFromTemplate ( ) {\n    var hours = parseInt( $scope.hours, 10 );\n    var valid = ( $scope.showMeridian ) ? (hours > 0 && hours < 13) : (hours >= 0 && hours < 24);\n    if ( !valid ) {\n      return undefined;\n    }\n\n    if ( $scope.showMeridian ) {\n      if ( hours === 12 ) {\n        hours = 0;\n      }\n      if ( $scope.meridian === meridians[1] ) {\n        hours = hours + 12;\n      }\n    }\n    return hours;\n  }\n\n  function getMinutesFromTemplate() {\n    var minutes = parseInt($scope.minutes, 10);\n    return ( minutes >= 0 && minutes < 60 ) ? minutes : undefined;\n  }\n\n  function pad( value ) {\n    return ( angular.isDefined(value) && value.toString().length < 2 ) ? '0' + value : value.toString();\n  }\n\n  // Respond on mousewheel spin\n  this.setupMousewheelEvents = function( hoursInputEl, minutesInputEl ) {\n    var isScrollingUp = function(e) {\n      if (e.originalEvent) {\n        e = e.originalEvent;\n      }\n      //pick correct delta variable depending on event\n      var delta = (e.wheelDelta) ? e.wheelDelta : -e.deltaY;\n      return (e.detail || delta > 0);\n    };\n\n    hoursInputEl.bind('mousewheel wheel', function(e) {\n      $scope.$apply( (isScrollingUp(e)) ? $scope.incrementHours() : $scope.decrementHours() );\n      e.preventDefault();\n    });\n\n    minutesInputEl.bind('mousewheel wheel', function(e) {\n      $scope.$apply( (isScrollingUp(e)) ? $scope.incrementMinutes() : $scope.decrementMinutes() );\n      e.preventDefault();\n    });\n\n  };\n\n  // Respond on up/down arrowkeys\n  this.setupArrowkeyEvents = function( hoursInputEl, minutesInputEl ) {\n    hoursInputEl.bind('keydown', function(e) {\n      if ( e.which === 38 ) { // up\n        e.preventDefault();\n        $scope.incrementHours();\n        $scope.$apply();\n      }\n      else if ( e.which === 40 ) { // down\n        e.preventDefault();\n        $scope.decrementHours();\n        $scope.$apply();\n      }\n    });\n\n    minutesInputEl.bind('keydown', function(e) {\n      if ( e.which === 38 ) { // up\n        e.preventDefault();\n        $scope.incrementMinutes();\n        $scope.$apply();\n      }\n      else if ( e.which === 40 ) { // down\n        e.preventDefault();\n        $scope.decrementMinutes();\n        $scope.$apply();\n      }\n    });\n  };\n\n  this.setupInputEvents = function( hoursInputEl, minutesInputEl ) {\n    if ( $scope.readonlyInput ) {\n      $scope.updateHours = angular.noop;\n      $scope.updateMinutes = angular.noop;\n      return;\n    }\n\n    var invalidate = function(invalidHours, invalidMinutes) {\n      ngModelCtrl.$setViewValue( null );\n      ngModelCtrl.$setValidity('time', false);\n      if (angular.isDefined(invalidHours)) {\n        $scope.invalidHours = invalidHours;\n      }\n      if (angular.isDefined(invalidMinutes)) {\n        $scope.invalidMinutes = invalidMinutes;\n      }\n    };\n\n    $scope.updateHours = function() {\n      var hours = getHoursFromTemplate();\n\n      if ( angular.isDefined(hours) ) {\n        selected.setHours( hours );\n        refresh( 'h' );\n      } else {\n        invalidate(true);\n      }\n    };\n\n    hoursInputEl.bind('blur', function(e) {\n      if ( !$scope.invalidHours && $scope.hours < 10) {\n        $scope.$apply( function() {\n          $scope.hours = pad( $scope.hours );\n        });\n      }\n    });\n\n    $scope.updateMinutes = function() {\n      var minutes = getMinutesFromTemplate();\n\n      if ( angular.isDefined(minutes) ) {\n        selected.setMinutes( minutes );\n        refresh( 'm' );\n      } else {\n        invalidate(undefined, true);\n      }\n    };\n\n    minutesInputEl.bind('blur', function(e) {\n      if ( !$scope.invalidMinutes && $scope.minutes < 10 ) {\n        $scope.$apply( function() {\n          $scope.minutes = pad( $scope.minutes );\n        });\n      }\n    });\n\n  };\n\n  this.render = function() {\n    var date = ngModelCtrl.$viewValue;\n\n    if ( isNaN(date) ) {\n      ngModelCtrl.$setValidity('time', false);\n      $log.error('Timepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');\n    } else {\n      if ( date ) {\n        selected = date;\n      }\n      makeValid();\n      updateTemplate();\n    }\n  };\n\n  // Call internally when we know that model is valid.\n  function refresh( keyboardChange ) {\n    makeValid();\n    ngModelCtrl.$setViewValue( new Date(selected) );\n    updateTemplate( keyboardChange );\n  }\n\n  function makeValid() {\n    ngModelCtrl.$setValidity('time', true);\n    $scope.invalidHours = false;\n    $scope.invalidMinutes = false;\n  }\n\n  function updateTemplate( keyboardChange ) {\n    var hours = selected.getHours(), minutes = selected.getMinutes();\n\n    if ( $scope.showMeridian ) {\n      hours = ( hours === 0 || hours === 12 ) ? 12 : hours % 12; // Convert 24 to 12 hour system\n    }\n\n    $scope.hours = keyboardChange === 'h' ? hours : pad(hours);\n    if (keyboardChange !== 'm') {\n      $scope.minutes = pad(minutes);\n    }\n    $scope.meridian = selected.getHours() < 12 ? meridians[0] : meridians[1];\n  }\n\n  function addMinutes( minutes ) {\n    var dt = new Date( selected.getTime() + minutes * 60000 );\n    selected.setHours( dt.getHours(), dt.getMinutes() );\n    refresh();\n  }\n\n  $scope.incrementHours = function() {\n    addMinutes( hourStep * 60 );\n  };\n  $scope.decrementHours = function() {\n    addMinutes( - hourStep * 60 );\n  };\n  $scope.incrementMinutes = function() {\n    addMinutes( minuteStep );\n  };\n  $scope.decrementMinutes = function() {\n    addMinutes( - minuteStep );\n  };\n  $scope.toggleMeridian = function() {\n    addMinutes( 12 * 60 * (( selected.getHours() < 12 ) ? 1 : -1) );\n  };\n}])\n\n.directive('timepicker', function () {\n  return {\n    restrict: 'EA',\n    require: ['timepicker', '?^ngModel'],\n    controller:'TimepickerController',\n    replace: true,\n    scope: {},\n    templateUrl: 'template/timepicker/timepicker.html',\n    link: function(scope, element, attrs, ctrls) {\n      var timepickerCtrl = ctrls[0], ngModelCtrl = ctrls[1];\n\n      if ( ngModelCtrl ) {\n        timepickerCtrl.init( ngModelCtrl, element.find('input') );\n      }\n    }\n  };\n});\n\nangular.module('ui.bootstrap.transition', [])\n\n.value('$transitionSuppressDeprecated', false)\n/**\n * $transition service provides a consistent interface to trigger CSS 3 transitions and to be informed when they complete.\n * @param  {DOMElement} element  The DOMElement that will be animated.\n * @param  {string|object|function} trigger  The thing that will cause the transition to start:\n *   - As a string, it represents the css class to be added to the element.\n *   - As an object, it represents a hash of style attributes to be applied to the element.\n *   - As a function, it represents a function to be called that will cause the transition to occur.\n * @return {Promise}  A promise that is resolved when the transition finishes.\n */\n.factory('$transition', [\n        '$q', '$timeout', '$rootScope', '$log', '$transitionSuppressDeprecated',\nfunction($q ,  $timeout ,  $rootScope ,  $log ,  $transitionSuppressDeprecated) {\n\n  if (!$transitionSuppressDeprecated) {\n    $log.warn('$transition is now deprecated. Use $animate from ngAnimate instead.');\n  }\n\n  var $transition = function(element, trigger, options) {\n    options = options || {};\n    var deferred = $q.defer();\n    var endEventName = $transition[options.animation ? 'animationEndEventName' : 'transitionEndEventName'];\n\n    var transitionEndHandler = function(event) {\n      $rootScope.$apply(function() {\n        element.unbind(endEventName, transitionEndHandler);\n        deferred.resolve(element);\n      });\n    };\n\n    if (endEventName) {\n      element.bind(endEventName, transitionEndHandler);\n    }\n\n    // Wrap in a timeout to allow the browser time to update the DOM before the transition is to occur\n    $timeout(function() {\n      if ( angular.isString(trigger) ) {\n        element.addClass(trigger);\n      } else if ( angular.isFunction(trigger) ) {\n        trigger(element);\n      } else if ( angular.isObject(trigger) ) {\n        element.css(trigger);\n      }\n      //If browser does not support transitions, instantly resolve\n      if ( !endEventName ) {\n        deferred.resolve(element);\n      }\n    });\n\n    // Add our custom cancel function to the promise that is returned\n    // We can call this if we are about to run a new transition, which we know will prevent this transition from ending,\n    // i.e. it will therefore never raise a transitionEnd event for that transition\n    deferred.promise.cancel = function() {\n      if ( endEventName ) {\n        element.unbind(endEventName, transitionEndHandler);\n      }\n      deferred.reject('Transition cancelled');\n    };\n\n    return deferred.promise;\n  };\n\n  // Work out the name of the transitionEnd event\n  var transElement = document.createElement('trans');\n  var transitionEndEventNames = {\n    'WebkitTransition': 'webkitTransitionEnd',\n    'MozTransition': 'transitionend',\n    'OTransition': 'oTransitionEnd',\n    'transition': 'transitionend'\n  };\n  var animationEndEventNames = {\n    'WebkitTransition': 'webkitAnimationEnd',\n    'MozTransition': 'animationend',\n    'OTransition': 'oAnimationEnd',\n    'transition': 'animationend'\n  };\n  function findEndEventName(endEventNames) {\n    for (var name in endEventNames){\n      if (transElement.style[name] !== undefined) {\n        return endEventNames[name];\n      }\n    }\n  }\n  $transition.transitionEndEventName = findEndEventName(transitionEndEventNames);\n  $transition.animationEndEventName = findEndEventName(animationEndEventNames);\n  return $transition;\n}]);\n\nangular.module('ui.bootstrap.typeahead', ['ui.bootstrap.position', 'ui.bootstrap.bindHtml'])\n\n/**\n * A helper service that can parse typeahead's syntax (string provided by users)\n * Extracted to a separate service for ease of unit testing\n */\n  .factory('typeaheadParser', ['$parse', function ($parse) {\n\n  //                      00000111000000000000022200000000000000003333333333333330000000000044000\n  var TYPEAHEAD_REGEXP = /^\\s*([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?\\s+for\\s+(?:([\\$\\w][\\$\\w\\d]*))\\s+in\\s+([\\s\\S]+?)$/;\n\n  return {\n    parse:function (input) {\n\n      var match = input.match(TYPEAHEAD_REGEXP);\n      if (!match) {\n        throw new Error(\n          'Expected typeahead specification in form of \"_modelValue_ (as _label_)? for _item_ in _collection_\"' +\n            ' but got \"' + input + '\".');\n      }\n\n      return {\n        itemName:match[3],\n        source:$parse(match[4]),\n        viewMapper:$parse(match[2] || match[1]),\n        modelMapper:$parse(match[1])\n      };\n    }\n  };\n}])\n\n  .directive('typeahead', ['$compile', '$parse', '$q', '$timeout', '$document', '$position', 'typeaheadParser',\n    function ($compile, $parse, $q, $timeout, $document, $position, typeaheadParser) {\n\n  var HOT_KEYS = [9, 13, 27, 38, 40];\n\n  return {\n    require:'ngModel',\n    link:function (originalScope, element, attrs, modelCtrl) {\n\n      //SUPPORTED ATTRIBUTES (OPTIONS)\n\n      //minimal no of characters that needs to be entered before typeahead kicks-in\n      var minSearch = originalScope.$eval(attrs.typeaheadMinLength) || 1;\n\n      //minimal wait time after last character typed before typeahead kicks-in\n      var waitTime = originalScope.$eval(attrs.typeaheadWaitMs) || 0;\n\n      //should it restrict model values to the ones selected from the popup only?\n      var isEditable = originalScope.$eval(attrs.typeaheadEditable) !== false;\n\n      //binding to a variable that indicates if matches are being retrieved asynchronously\n      var isLoadingSetter = $parse(attrs.typeaheadLoading).assign || angular.noop;\n\n      //a callback executed when a match is selected\n      var onSelectCallback = $parse(attrs.typeaheadOnSelect);\n\n      var inputFormatter = attrs.typeaheadInputFormatter ? $parse(attrs.typeaheadInputFormatter) : undefined;\n\n      var appendToBody =  attrs.typeaheadAppendToBody ? originalScope.$eval(attrs.typeaheadAppendToBody) : false;\n\n      var focusFirst = originalScope.$eval(attrs.typeaheadFocusFirst) !== false;\n\n      //INTERNAL VARIABLES\n\n      //model setter executed upon match selection\n      var $setModelValue = $parse(attrs.ngModel).assign;\n\n      //expressions used by typeahead\n      var parserResult = typeaheadParser.parse(attrs.typeahead);\n\n      var hasFocus;\n\n      //create a child scope for the typeahead directive so we are not polluting original scope\n      //with typeahead-specific data (matches, query etc.)\n      var scope = originalScope.$new();\n      originalScope.$on('$destroy', function(){\n        scope.$destroy();\n      });\n\n      // WAI-ARIA\n      var popupId = 'typeahead-' + scope.$id + '-' + Math.floor(Math.random() * 10000);\n      element.attr({\n        'aria-autocomplete': 'list',\n        'aria-expanded': false,\n        'aria-owns': popupId\n      });\n\n      //pop-up element used to display matches\n      var popUpEl = angular.element('<div typeahead-popup></div>');\n      popUpEl.attr({\n        id: popupId,\n        matches: 'matches',\n        active: 'activeIdx',\n        select: 'select(activeIdx)',\n        query: 'query',\n        position: 'position'\n      });\n      //custom item template\n      if (angular.isDefined(attrs.typeaheadTemplateUrl)) {\n        popUpEl.attr('template-url', attrs.typeaheadTemplateUrl);\n      }\n\n      var resetMatches = function() {\n        scope.matches = [];\n        scope.activeIdx = -1;\n        element.attr('aria-expanded', false);\n      };\n\n      var getMatchId = function(index) {\n        return popupId + '-option-' + index;\n      };\n\n      // Indicate that the specified match is the active (pre-selected) item in the list owned by this typeahead.\n      // This attribute is added or removed automatically when the `activeIdx` changes.\n      scope.$watch('activeIdx', function(index) {\n        if (index < 0) {\n          element.removeAttr('aria-activedescendant');\n        } else {\n          element.attr('aria-activedescendant', getMatchId(index));\n        }\n      });\n\n      var getMatchesAsync = function(inputValue) {\n\n        var locals = {$viewValue: inputValue};\n        isLoadingSetter(originalScope, true);\n        $q.when(parserResult.source(originalScope, locals)).then(function(matches) {\n\n          //it might happen that several async queries were in progress if a user were typing fast\n          //but we are interested only in responses that correspond to the current view value\n          var onCurrentRequest = (inputValue === modelCtrl.$viewValue);\n          if (onCurrentRequest && hasFocus) {\n            if (matches && matches.length > 0) {\n\n              scope.activeIdx = focusFirst ? 0 : -1;\n              scope.matches.length = 0;\n\n              //transform labels\n              for(var i=0; i<matches.length; i++) {\n                locals[parserResult.itemName] = matches[i];\n                scope.matches.push({\n                  id: getMatchId(i),\n                  label: parserResult.viewMapper(scope, locals),\n                  model: matches[i]\n                });\n              }\n\n              scope.query = inputValue;\n              //position pop-up with matches - we need to re-calculate its position each time we are opening a window\n              //with matches as a pop-up might be absolute-positioned and position of an input might have changed on a page\n              //due to other elements being rendered\n              scope.position = appendToBody ? $position.offset(element) : $position.position(element);\n              scope.position.top = scope.position.top + element.prop('offsetHeight');\n\n              element.attr('aria-expanded', true);\n            } else {\n              resetMatches();\n            }\n          }\n          if (onCurrentRequest) {\n            isLoadingSetter(originalScope, false);\n          }\n        }, function(){\n          resetMatches();\n          isLoadingSetter(originalScope, false);\n        });\n      };\n\n      resetMatches();\n\n      //we need to propagate user's query so we can higlight matches\n      scope.query = undefined;\n\n      //Declare the timeout promise var outside the function scope so that stacked calls can be cancelled later\n      var timeoutPromise;\n\n      var scheduleSearchWithTimeout = function(inputValue) {\n        timeoutPromise = $timeout(function () {\n          getMatchesAsync(inputValue);\n        }, waitTime);\n      };\n\n      var cancelPreviousTimeout = function() {\n        if (timeoutPromise) {\n          $timeout.cancel(timeoutPromise);\n        }\n      };\n\n      //plug into $parsers pipeline to open a typeahead on view changes initiated from DOM\n      //$parsers kick-in on all the changes coming from the view as well as manually triggered by $setViewValue\n      modelCtrl.$parsers.unshift(function (inputValue) {\n\n        hasFocus = true;\n\n        if (inputValue && inputValue.length >= minSearch) {\n          if (waitTime > 0) {\n            cancelPreviousTimeout();\n            scheduleSearchWithTimeout(inputValue);\n          } else {\n            getMatchesAsync(inputValue);\n          }\n        } else {\n          isLoadingSetter(originalScope, false);\n          cancelPreviousTimeout();\n          resetMatches();\n        }\n\n        if (isEditable) {\n          return inputValue;\n        } else {\n          if (!inputValue) {\n            // Reset in case user had typed something previously.\n            modelCtrl.$setValidity('editable', true);\n            return inputValue;\n          } else {\n            modelCtrl.$setValidity('editable', false);\n            return undefined;\n          }\n        }\n      });\n\n      modelCtrl.$formatters.push(function (modelValue) {\n\n        var candidateViewValue, emptyViewValue;\n        var locals = {};\n\n        // The validity may be set to false via $parsers (see above) if\n        // the model is restricted to selected values. If the model\n        // is set manually it is considered to be valid.\n        if (!isEditable) {\n          modelCtrl.$setValidity('editable', true);\n        }\n\n        if (inputFormatter) {\n\n          locals.$model = modelValue;\n          return inputFormatter(originalScope, locals);\n\n        } else {\n\n          //it might happen that we don't have enough info to properly render input value\n          //we need to check for this situation and simply return model value if we can't apply custom formatting\n          locals[parserResult.itemName] = modelValue;\n          candidateViewValue = parserResult.viewMapper(originalScope, locals);\n          locals[parserResult.itemName] = undefined;\n          emptyViewValue = parserResult.viewMapper(originalScope, locals);\n\n          return candidateViewValue!== emptyViewValue ? candidateViewValue : modelValue;\n        }\n      });\n\n      scope.select = function (activeIdx) {\n        //called from within the $digest() cycle\n        var locals = {};\n        var model, item;\n\n        locals[parserResult.itemName] = item = scope.matches[activeIdx].model;\n        model = parserResult.modelMapper(originalScope, locals);\n        $setModelValue(originalScope, model);\n        modelCtrl.$setValidity('editable', true);\n        modelCtrl.$setValidity('parse', true);\n\n        onSelectCallback(originalScope, {\n          $item: item,\n          $model: model,\n          $label: parserResult.viewMapper(originalScope, locals)\n        });\n\n        resetMatches();\n\n        //return focus to the input element if a match was selected via a mouse click event\n        // use timeout to avoid $rootScope:inprog error\n        $timeout(function() { element[0].focus(); }, 0, false);\n      };\n\n      //bind keyboard events: arrows up(38) / down(40), enter(13) and tab(9), esc(27)\n      element.bind('keydown', function (evt) {\n\n        //typeahead is open and an \"interesting\" key was pressed\n        if (scope.matches.length === 0 || HOT_KEYS.indexOf(evt.which) === -1) {\n          return;\n        }\n\n        // if there's nothing selected (i.e. focusFirst) and enter is hit, don't do anything\n        if (scope.activeIdx == -1 && (evt.which === 13 || evt.which === 9)) {\n          return;\n        }\n\n        evt.preventDefault();\n\n        if (evt.which === 40) {\n          scope.activeIdx = (scope.activeIdx + 1) % scope.matches.length;\n          scope.$digest();\n\n        } else if (evt.which === 38) {\n          scope.activeIdx = (scope.activeIdx > 0 ? scope.activeIdx : scope.matches.length) - 1;\n          scope.$digest();\n\n        } else if (evt.which === 13 || evt.which === 9) {\n          scope.$apply(function () {\n            scope.select(scope.activeIdx);\n          });\n\n        } else if (evt.which === 27) {\n          evt.stopPropagation();\n\n          resetMatches();\n          scope.$digest();\n        }\n      });\n\n      element.bind('blur', function (evt) {\n        hasFocus = false;\n      });\n\n      // Keep reference to click handler to unbind it.\n      var dismissClickHandler = function (evt) {\n        if (element[0] !== evt.target) {\n          resetMatches();\n          scope.$digest();\n        }\n      };\n\n      $document.bind('click', dismissClickHandler);\n\n      originalScope.$on('$destroy', function(){\n        $document.unbind('click', dismissClickHandler);\n        if (appendToBody) {\n          $popup.remove();\n        }\n        // Prevent jQuery cache memory leak\n        popUpEl.remove();\n      });\n\n      var $popup = $compile(popUpEl)(scope);\n\n      if (appendToBody) {\n        $document.find('body').append($popup);\n      } else {\n        element.after($popup);\n      }\n    }\n  };\n\n}])\n\n  .directive('typeaheadPopup', function () {\n    return {\n      restrict:'EA',\n      scope:{\n        matches:'=',\n        query:'=',\n        active:'=',\n        position:'=',\n        select:'&'\n      },\n      replace:true,\n      templateUrl:'template/typeahead/typeahead-popup.html',\n      link:function (scope, element, attrs) {\n\n        scope.templateUrl = attrs.templateUrl;\n\n        scope.isOpen = function () {\n          return scope.matches.length > 0;\n        };\n\n        scope.isActive = function (matchIdx) {\n          return scope.active == matchIdx;\n        };\n\n        scope.selectActive = function (matchIdx) {\n          scope.active = matchIdx;\n        };\n\n        scope.selectMatch = function (activeIdx) {\n          scope.select({activeIdx:activeIdx});\n        };\n      }\n    };\n  })\n\n  .directive('typeaheadMatch', ['$templateRequest', '$compile', '$parse', function ($templateRequest, $compile, $parse) {\n    return {\n      restrict:'EA',\n      scope:{\n        index:'=',\n        match:'=',\n        query:'='\n      },\n      link:function (scope, element, attrs) {\n        var tplUrl = $parse(attrs.templateUrl)(scope.$parent) || 'template/typeahead/typeahead-match.html';\n        $templateRequest(tplUrl).then(function(tplContent) {\n          $compile(tplContent.trim())(scope, function(clonedElement){\n            element.replaceWith(clonedElement);\n          });\n        });\n      }\n    };\n  }])\n\n  .filter('typeaheadHighlight', function() {\n\n    function escapeRegexp(queryToEscape) {\n      return queryToEscape.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    }\n\n    return function(matchItem, query) {\n      return query ? ('' + matchItem).replace(new RegExp(escapeRegexp(query), 'gi'), '<strong>$&</strong>') : matchItem;\n    };\n  });\n\nangular.module(\"template/accordion/accordion-group.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/accordion/accordion-group.html\",\n    \"<div class=\\\"panel panel-default\\\">\\n\" +\n    \"  <div class=\\\"panel-heading\\\">\\n\" +\n    \"    <h4 class=\\\"panel-title\\\">\\n\" +\n    \"      <a href=\\\"javascript:void(0)\\\" tabindex=\\\"0\\\" class=\\\"accordion-toggle\\\" ng-click=\\\"toggleOpen()\\\" accordion-transclude=\\\"heading\\\"><span ng-class=\\\"{'text-muted': isDisabled}\\\">{{heading}}</span></a>\\n\" +\n    \"    </h4>\\n\" +\n    \"  </div>\\n\" +\n    \"  <div class=\\\"panel-collapse collapse\\\" collapse=\\\"!isOpen\\\">\\n\" +\n    \"\t  <div class=\\\"panel-body\\\" ng-transclude></div>\\n\" +\n    \"  </div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/accordion/accordion.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/accordion/accordion.html\",\n    \"<div class=\\\"panel-group\\\" ng-transclude></div>\");\n}]);\n\nangular.module(\"template/alert/alert.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/alert/alert.html\",\n    \"<div class=\\\"alert\\\" ng-class=\\\"['alert-' + (type || 'warning'), closeable ? 'alert-dismissable' : null]\\\" role=\\\"alert\\\">\\n\" +\n    \"    <button ng-show=\\\"closeable\\\" type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"close()\\\">\\n\" +\n    \"        <span aria-hidden=\\\"true\\\">&times;</span>\\n\" +\n    \"        <span class=\\\"sr-only\\\">Close</span>\\n\" +\n    \"    </button>\\n\" +\n    \"    <div ng-transclude></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/carousel/carousel.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/carousel/carousel.html\",\n    \"<div ng-mouseenter=\\\"pause()\\\" ng-mouseleave=\\\"play()\\\" class=\\\"carousel\\\" ng-swipe-right=\\\"prev()\\\" ng-swipe-left=\\\"next()\\\">\\n\" +\n    \"    <ol class=\\\"carousel-indicators\\\" ng-show=\\\"slides.length > 1\\\">\\n\" +\n    \"        <li ng-repeat=\\\"slide in slides | orderBy:'index' track by $index\\\" ng-class=\\\"{active: isActive(slide)}\\\" ng-click=\\\"select(slide)\\\"></li>\\n\" +\n    \"    </ol>\\n\" +\n    \"    <div class=\\\"carousel-inner\\\" ng-transclude></div>\\n\" +\n    \"    <a class=\\\"left carousel-control\\\" ng-click=\\\"prev()\\\" ng-show=\\\"slides.length > 1\\\"><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span></a>\\n\" +\n    \"    <a class=\\\"right carousel-control\\\" ng-click=\\\"next()\\\" ng-show=\\\"slides.length > 1\\\"><span class=\\\"glyphicon glyphicon-chevron-right\\\"></span></a>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/carousel/slide.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/carousel/slide.html\",\n    \"<div ng-class=\\\"{\\n\" +\n    \"    'active': active\\n\" +\n    \"  }\\\" class=\\\"item text-center\\\" ng-transclude></div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/datepicker/datepicker.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/datepicker/datepicker.html\",\n    \"<div ng-switch=\\\"datepickerMode\\\" role=\\\"application\\\" ng-keydown=\\\"keydown($event)\\\">\\n\" +\n    \"  <daypicker ng-switch-when=\\\"day\\\" tabindex=\\\"0\\\"></daypicker>\\n\" +\n    \"  <monthpicker ng-switch-when=\\\"month\\\" tabindex=\\\"0\\\"></monthpicker>\\n\" +\n    \"  <yearpicker ng-switch-when=\\\"year\\\" tabindex=\\\"0\\\"></yearpicker>\\n\" +\n    \"</div>\");\n}]);\n\nangular.module(\"template/datepicker/day.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/datepicker/day.html\",\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\n    \"  <thead>\\n\" +\n    \"    <tr>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\n    \"      <th colspan=\\\"{{5 + showWeeks}}\\\"><button id=\\\"{{uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\n    \"    </tr>\\n\" +\n    \"    <tr>\\n\" +\n    \"      <th ng-show=\\\"showWeeks\\\" class=\\\"text-center\\\"></th>\\n\" +\n    \"      <th ng-repeat=\\\"label in labels track by $index\\\" class=\\\"text-center\\\"><small aria-label=\\\"{{label.full}}\\\">{{label.abbr}}</small></th>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </thead>\\n\" +\n    \"  <tbody>\\n\" +\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\n    \"      <td ng-show=\\\"showWeeks\\\" class=\\\"text-center h6\\\"><em>{{ weekNumbers[$index] }}</em></td>\\n\" +\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{dt.uid}}\\\" aria-disabled=\\\"{{!!dt.disabled}}\\\" ng-class=\\\"dt.customClass\\\">\\n\" +\n    \"        <button type=\\\"button\\\" style=\\\"width:100%;\\\" class=\\\"btn btn-default btn-sm\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"{'text-muted': dt.secondary, 'text-info': dt.current}\\\">{{dt.label}}</span></button>\\n\" +\n    \"      </td>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </tbody>\\n\" +\n    \"</table>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/datepicker/month.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/datepicker/month.html\",\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\n    \"  <thead>\\n\" +\n    \"    <tr>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\n    \"      <th><button id=\\\"{{uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </thead>\\n\" +\n    \"  <tbody>\\n\" +\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{dt.uid}}\\\" aria-disabled=\\\"{{!!dt.disabled}}\\\">\\n\" +\n    \"        <button type=\\\"button\\\" style=\\\"width:100%;\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"{'text-info': dt.current}\\\">{{dt.label}}</span></button>\\n\" +\n    \"      </td>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </tbody>\\n\" +\n    \"</table>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/datepicker/popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/datepicker/popup.html\",\n    \"<ul class=\\\"dropdown-menu\\\" ng-style=\\\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\\\" ng-keydown=\\\"keydown($event)\\\">\\n\" +\n    \"\t<li ng-transclude></li>\\n\" +\n    \"\t<li ng-if=\\\"showButtonBar\\\" style=\\\"padding:10px 9px 2px\\\">\\n\" +\n    \"\t\t<span class=\\\"btn-group pull-left\\\">\\n\" +\n    \"\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-info\\\" ng-click=\\\"select('today')\\\">{{ getText('current') }}</button>\\n\" +\n    \"\t\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-danger\\\" ng-click=\\\"select(null)\\\">{{ getText('clear') }}</button>\\n\" +\n    \"\t\t</span>\\n\" +\n    \"\t\t<button type=\\\"button\\\" class=\\\"btn btn-sm btn-success pull-right\\\" ng-click=\\\"close()\\\">{{ getText('close') }}</button>\\n\" +\n    \"\t</li>\\n\" +\n    \"</ul>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/datepicker/year.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/datepicker/year.html\",\n    \"<table role=\\\"grid\\\" aria-labelledby=\\\"{{uniqueId}}-title\\\" aria-activedescendant=\\\"{{activeDateId}}\\\">\\n\" +\n    \"  <thead>\\n\" +\n    \"    <tr>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-left\\\" ng-click=\\\"move(-1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-left\\\"></i></button></th>\\n\" +\n    \"      <th colspan=\\\"3\\\"><button id=\\\"{{uniqueId}}-title\\\" role=\\\"heading\\\" aria-live=\\\"assertive\\\" aria-atomic=\\\"true\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"toggleMode()\\\" ng-disabled=\\\"datepickerMode === maxMode\\\" tabindex=\\\"-1\\\" style=\\\"width:100%;\\\"><strong>{{title}}</strong></button></th>\\n\" +\n    \"      <th><button type=\\\"button\\\" class=\\\"btn btn-default btn-sm pull-right\\\" ng-click=\\\"move(1)\\\" tabindex=\\\"-1\\\"><i class=\\\"glyphicon glyphicon-chevron-right\\\"></i></button></th>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </thead>\\n\" +\n    \"  <tbody>\\n\" +\n    \"    <tr ng-repeat=\\\"row in rows track by $index\\\">\\n\" +\n    \"      <td ng-repeat=\\\"dt in row track by dt.date\\\" class=\\\"text-center\\\" role=\\\"gridcell\\\" id=\\\"{{dt.uid}}\\\" aria-disabled=\\\"{{!!dt.disabled}}\\\">\\n\" +\n    \"        <button type=\\\"button\\\" style=\\\"width:100%;\\\" class=\\\"btn btn-default\\\" ng-class=\\\"{'btn-info': dt.selected, active: isActive(dt)}\\\" ng-click=\\\"select(dt.date)\\\" ng-disabled=\\\"dt.disabled\\\" tabindex=\\\"-1\\\"><span ng-class=\\\"{'text-info': dt.current}\\\">{{dt.label}}</span></button>\\n\" +\n    \"      </td>\\n\" +\n    \"    </tr>\\n\" +\n    \"  </tbody>\\n\" +\n    \"</table>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/modal/backdrop.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/modal/backdrop.html\",\n    \"<div class=\\\"modal-backdrop\\\"\\n\" +\n    \"     modal-animation-class=\\\"fade\\\"\\n\" +\n    \"     ng-class=\\\"{in: animate}\\\"\\n\" +\n    \"     ng-style=\\\"{'z-index': 1040 + (index && 1 || 0) + index*10}\\\"\\n\" +\n    \"></div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/modal/window.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/modal/window.html\",\n    \"<div modal-render=\\\"{{$isRendered}}\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" class=\\\"modal\\\"\\n\" +\n    \"    modal-animation-class=\\\"fade\\\"\\n\" +\n    \"\tng-class=\\\"{in: animate}\\\" ng-style=\\\"{'z-index': 1050 + index*10, display: 'block'}\\\" ng-click=\\\"close($event)\\\">\\n\" +\n    \"    <div class=\\\"modal-dialog\\\" ng-class=\\\"size ? 'modal-' + size : ''\\\"><div class=\\\"modal-content\\\" modal-transclude></div></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/pagination/pager.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/pagination/pager.html\",\n    \"<ul class=\\\"pager\\\">\\n\" +\n    \"  <li ng-class=\\\"{disabled: noPrevious(), previous: align}\\\"><a href ng-click=\\\"selectPage(page - 1, $event)\\\">{{getText('previous')}}</a></li>\\n\" +\n    \"  <li ng-class=\\\"{disabled: noNext(), next: align}\\\"><a href ng-click=\\\"selectPage(page + 1, $event)\\\">{{getText('next')}}</a></li>\\n\" +\n    \"</ul>\");\n}]);\n\nangular.module(\"template/pagination/pagination.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/pagination/pagination.html\",\n    \"<ul class=\\\"pagination\\\">\\n\" +\n    \"  <li ng-if=\\\"boundaryLinks\\\" ng-class=\\\"{disabled: noPrevious()}\\\"><a href ng-click=\\\"selectPage(1, $event)\\\">{{getText('first')}}</a></li>\\n\" +\n    \"  <li ng-if=\\\"directionLinks\\\" ng-class=\\\"{disabled: noPrevious()}\\\"><a href ng-click=\\\"selectPage(page - 1, $event)\\\">{{getText('previous')}}</a></li>\\n\" +\n    \"  <li ng-repeat=\\\"page in pages track by $index\\\" ng-class=\\\"{active: page.active}\\\"><a href ng-click=\\\"selectPage(page.number, $event)\\\">{{page.text}}</a></li>\\n\" +\n    \"  <li ng-if=\\\"directionLinks\\\" ng-class=\\\"{disabled: noNext()}\\\"><a href ng-click=\\\"selectPage(page + 1, $event)\\\">{{getText('next')}}</a></li>\\n\" +\n    \"  <li ng-if=\\\"boundaryLinks\\\" ng-class=\\\"{disabled: noNext()}\\\"><a href ng-click=\\\"selectPage(totalPages, $event)\\\">{{getText('last')}}</a></li>\\n\" +\n    \"</ul>\");\n}]);\n\nangular.module(\"template/tooltip/tooltip-html-popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tooltip/tooltip-html-popup.html\",\n    \"<div class=\\\"tooltip\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"tooltip-arrow\\\"></div>\\n\" +\n    \"  <div class=\\\"tooltip-inner\\\" ng-bind-html=\\\"contentExp()\\\"></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/tooltip/tooltip-html-unsafe-popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tooltip/tooltip-html-unsafe-popup.html\",\n    \"<div class=\\\"tooltip\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"tooltip-arrow\\\"></div>\\n\" +\n    \"  <div class=\\\"tooltip-inner\\\" bind-html-unsafe=\\\"content\\\"></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/tooltip/tooltip-popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tooltip/tooltip-popup.html\",\n    \"<div class=\\\"tooltip\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"tooltip-arrow\\\"></div>\\n\" +\n    \"  <div class=\\\"tooltip-inner\\\" ng-bind=\\\"content\\\"></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/tooltip/tooltip-template-popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tooltip/tooltip-template-popup.html\",\n    \"<div class=\\\"tooltip\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"tooltip-arrow\\\"></div>\\n\" +\n    \"  <div class=\\\"tooltip-inner\\\"\\n\" +\n    \"    tooltip-template-transclude=\\\"contentExp()\\\"\\n\" +\n    \"    tooltip-template-transclude-scope=\\\"originScope()\\\"></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/popover/popover-template.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/popover/popover-template.html\",\n    \"<div class=\\\"popover\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"arrow\\\"></div>\\n\" +\n    \"\\n\" +\n    \"  <div class=\\\"popover-inner\\\">\\n\" +\n    \"      <h3 class=\\\"popover-title\\\" ng-bind=\\\"title\\\" ng-if=\\\"title\\\"></h3>\\n\" +\n    \"      <div class=\\\"popover-content\\\"\\n\" +\n    \"        tooltip-template-transclude=\\\"contentExp()\\\"\\n\" +\n    \"        tooltip-template-transclude-scope=\\\"originScope()\\\"></div>\\n\" +\n    \"  </div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/popover/popover-window.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/popover/popover-window.html\",\n    \"<div class=\\\"popover {{placement}}\\\" ng-class=\\\"{ in: isOpen, fade: animation }\\\">\\n\" +\n    \"  <div class=\\\"arrow\\\"></div>\\n\" +\n    \"\\n\" +\n    \"  <div class=\\\"popover-inner\\\">\\n\" +\n    \"      <h3 class=\\\"popover-title\\\" ng-bind=\\\"title\\\" ng-show=\\\"title\\\"></h3>\\n\" +\n    \"      <div class=\\\"popover-content\\\" tooltip-template-transclude></div>\\n\" +\n    \"  </div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/popover/popover.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/popover/popover.html\",\n    \"<div class=\\\"popover\\\"\\n\" +\n    \"  tooltip-animation-class=\\\"fade\\\"\\n\" +\n    \"  tooltip-classes\\n\" +\n    \"  ng-class=\\\"{ in: isOpen() }\\\">\\n\" +\n    \"  <div class=\\\"arrow\\\"></div>\\n\" +\n    \"\\n\" +\n    \"  <div class=\\\"popover-inner\\\">\\n\" +\n    \"      <h3 class=\\\"popover-title\\\" ng-bind=\\\"title\\\" ng-if=\\\"title\\\"></h3>\\n\" +\n    \"      <div class=\\\"popover-content\\\" ng-bind=\\\"content\\\"></div>\\n\" +\n    \"  </div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/progressbar/bar.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/progressbar/bar.html\",\n    \"<div class=\\\"progress-bar\\\" ng-class=\\\"type && 'progress-bar-' + type\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"{{value}}\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"{{max}}\\\" ng-style=\\\"{width: (percent < 100 ? percent : 100) + '%'}\\\" aria-valuetext=\\\"{{percent | number:0}}%\\\" ng-transclude></div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/progressbar/progress.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/progressbar/progress.html\",\n    \"<div class=\\\"progress\\\" ng-transclude></div>\");\n}]);\n\nangular.module(\"template/progressbar/progressbar.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/progressbar/progressbar.html\",\n    \"<div class=\\\"progress\\\">\\n\" +\n    \"  <div class=\\\"progress-bar\\\" ng-class=\\\"type && 'progress-bar-' + type\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"{{value}}\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"{{max}}\\\" ng-style=\\\"{width: (percent < 100 ? percent : 100) + '%'}\\\" aria-valuetext=\\\"{{percent | number:0}}%\\\" ng-transclude></div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/rating/rating.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/rating/rating.html\",\n    \"<span ng-mouseleave=\\\"reset()\\\" ng-keydown=\\\"onKeydown($event)\\\" tabindex=\\\"0\\\" role=\\\"slider\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"{{range.length}}\\\" aria-valuenow=\\\"{{value}}\\\">\\n\" +\n    \"    <i ng-repeat=\\\"r in range track by $index\\\" ng-mouseenter=\\\"enter($index + 1)\\\" ng-click=\\\"rate($index + 1)\\\" class=\\\"glyphicon\\\" ng-class=\\\"$index < value && (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')\\\">\\n\" +\n    \"        <span class=\\\"sr-only\\\">({{ $index < value ? '*' : ' ' }})</span>\\n\" +\n    \"    </i>\\n\" +\n    \"</span>\");\n}]);\n\nangular.module(\"template/tabs/tab.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tabs/tab.html\",\n    \"<li ng-class=\\\"{active: active, disabled: disabled}\\\">\\n\" +\n    \"  <a href ng-click=\\\"select()\\\" tab-heading-transclude>{{heading}}</a>\\n\" +\n    \"</li>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/tabs/tabset.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/tabs/tabset.html\",\n    \"<div>\\n\" +\n    \"  <ul class=\\\"nav nav-{{type || 'tabs'}}\\\" ng-class=\\\"{'nav-stacked': vertical, 'nav-justified': justified}\\\" ng-transclude></ul>\\n\" +\n    \"  <div class=\\\"tab-content\\\">\\n\" +\n    \"    <div class=\\\"tab-pane\\\" \\n\" +\n    \"         ng-repeat=\\\"tab in tabs\\\" \\n\" +\n    \"         ng-class=\\\"{active: tab.active}\\\"\\n\" +\n    \"         tab-content-transclude=\\\"tab\\\">\\n\" +\n    \"    </div>\\n\" +\n    \"  </div>\\n\" +\n    \"</div>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/timepicker/timepicker.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/timepicker/timepicker.html\",\n    \"<table>\\n\" +\n    \"\t<tbody>\\n\" +\n    \"\t\t<tr class=\\\"text-center\\\">\\n\" +\n    \"\t\t\t<td><a ng-click=\\\"incrementHours()\\\" class=\\\"btn btn-link\\\"><span class=\\\"glyphicon glyphicon-chevron-up\\\"></span></a></td>\\n\" +\n    \"\t\t\t<td>&nbsp;</td>\\n\" +\n    \"\t\t\t<td><a ng-click=\\\"incrementMinutes()\\\" class=\\\"btn btn-link\\\"><span class=\\\"glyphicon glyphicon-chevron-up\\\"></span></a></td>\\n\" +\n    \"\t\t\t<td ng-show=\\\"showMeridian\\\"></td>\\n\" +\n    \"\t\t</tr>\\n\" +\n    \"\t\t<tr>\\n\" +\n    \"\t\t\t<td class=\\\"form-group\\\" ng-class=\\\"{'has-error': invalidHours}\\\">\\n\" +\n    \"\t\t\t\t<input style=\\\"width:50px;\\\" type=\\\"text\\\" ng-model=\\\"hours\\\" ng-change=\\\"updateHours()\\\" class=\\\"form-control text-center\\\" ng-readonly=\\\"readonlyInput\\\" maxlength=\\\"2\\\">\\n\" +\n    \"\t\t\t</td>\\n\" +\n    \"\t\t\t<td>:</td>\\n\" +\n    \"\t\t\t<td class=\\\"form-group\\\" ng-class=\\\"{'has-error': invalidMinutes}\\\">\\n\" +\n    \"\t\t\t\t<input style=\\\"width:50px;\\\" type=\\\"text\\\" ng-model=\\\"minutes\\\" ng-change=\\\"updateMinutes()\\\" class=\\\"form-control text-center\\\" ng-readonly=\\\"readonlyInput\\\" maxlength=\\\"2\\\">\\n\" +\n    \"\t\t\t</td>\\n\" +\n    \"\t\t\t<td ng-show=\\\"showMeridian\\\"><button type=\\\"button\\\" class=\\\"btn btn-default text-center\\\" ng-click=\\\"toggleMeridian()\\\">{{meridian}}</button></td>\\n\" +\n    \"\t\t</tr>\\n\" +\n    \"\t\t<tr class=\\\"text-center\\\">\\n\" +\n    \"\t\t\t<td><a ng-click=\\\"decrementHours()\\\" class=\\\"btn btn-link\\\"><span class=\\\"glyphicon glyphicon-chevron-down\\\"></span></a></td>\\n\" +\n    \"\t\t\t<td>&nbsp;</td>\\n\" +\n    \"\t\t\t<td><a ng-click=\\\"decrementMinutes()\\\" class=\\\"btn btn-link\\\"><span class=\\\"glyphicon glyphicon-chevron-down\\\"></span></a></td>\\n\" +\n    \"\t\t\t<td ng-show=\\\"showMeridian\\\"></td>\\n\" +\n    \"\t\t</tr>\\n\" +\n    \"\t</tbody>\\n\" +\n    \"</table>\\n\" +\n    \"\");\n}]);\n\nangular.module(\"template/typeahead/typeahead-match.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/typeahead/typeahead-match.html\",\n    \"<a tabindex=\\\"-1\\\" bind-html-unsafe=\\\"match.label | typeaheadHighlight:query\\\"></a>\");\n}]);\n\nangular.module(\"template/typeahead/typeahead-popup.html\", []).run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"template/typeahead/typeahead-popup.html\",\n    \"<ul class=\\\"dropdown-menu\\\" ng-show=\\\"isOpen()\\\" ng-style=\\\"{top: position.top+'px', left: position.left+'px'}\\\" style=\\\"display: block;\\\" role=\\\"listbox\\\" aria-hidden=\\\"{{!isOpen()}}\\\">\\n\" +\n    \"    <li ng-repeat=\\\"match in matches track by $index\\\" ng-class=\\\"{active: isActive($index) }\\\" ng-mouseenter=\\\"selectActive($index)\\\" ng-click=\\\"selectMatch($index)\\\" role=\\\"option\\\" id=\\\"{{match.id}}\\\">\\n\" +\n    \"        <div typeahead-match index=\\\"$index\\\" match=\\\"match\\\" query=\\\"query\\\" template-url=\\\"templateUrl\\\"></div>\\n\" +\n    \"    </li>\\n\" +\n    \"</ul>\\n\" +\n    \"\");\n}]);\n!angular.$$csp() && angular.element(document).find('head').prepend('<style type=\"text/css\">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');","/**\n * State-based routing for AngularJS\n * @version v0.2.15\n * @link http://angular-ui.github.com/\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\n\n/* commonjs package manager support (eg componentjs) */\nif (typeof module !== \"undefined\" && typeof exports !== \"undefined\" && module.exports === exports){\n  module.exports = 'ui.router';\n}\n\n(function (window, angular, undefined) {\n/*jshint globalstrict:true*/\n/*global angular:false*/\n'use strict';\n\nvar isDefined = angular.isDefined,\n    isFunction = angular.isFunction,\n    isString = angular.isString,\n    isObject = angular.isObject,\n    isArray = angular.isArray,\n    forEach = angular.forEach,\n    extend = angular.extend,\n    copy = angular.copy;\n\nfunction inherit(parent, extra) {\n  return extend(new (extend(function() {}, { prototype: parent }))(), extra);\n}\n\nfunction merge(dst) {\n  forEach(arguments, function(obj) {\n    if (obj !== dst) {\n      forEach(obj, function(value, key) {\n        if (!dst.hasOwnProperty(key)) dst[key] = value;\n      });\n    }\n  });\n  return dst;\n}\n\n/**\n * Finds the common ancestor path between two states.\n *\n * @param {Object} first The first state.\n * @param {Object} second The second state.\n * @return {Array} Returns an array of state names in descending order, not including the root.\n */\nfunction ancestors(first, second) {\n  var path = [];\n\n  for (var n in first.path) {\n    if (first.path[n] !== second.path[n]) break;\n    path.push(first.path[n]);\n  }\n  return path;\n}\n\n/**\n * IE8-safe wrapper for `Object.keys()`.\n *\n * @param {Object} object A JavaScript object.\n * @return {Array} Returns the keys of the object as an array.\n */\nfunction objectKeys(object) {\n  if (Object.keys) {\n    return Object.keys(object);\n  }\n  var result = [];\n\n  forEach(object, function(val, key) {\n    result.push(key);\n  });\n  return result;\n}\n\n/**\n * IE8-safe wrapper for `Array.prototype.indexOf()`.\n *\n * @param {Array} array A JavaScript array.\n * @param {*} value A value to search the array for.\n * @return {Number} Returns the array index value of `value`, or `-1` if not present.\n */\nfunction indexOf(array, value) {\n  if (Array.prototype.indexOf) {\n    return array.indexOf(value, Number(arguments[2]) || 0);\n  }\n  var len = array.length >>> 0, from = Number(arguments[2]) || 0;\n  from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n\n  if (from < 0) from += len;\n\n  for (; from < len; from++) {\n    if (from in array && array[from] === value) return from;\n  }\n  return -1;\n}\n\n/**\n * Merges a set of parameters with all parameters inherited between the common parents of the\n * current state and a given destination state.\n *\n * @param {Object} currentParams The value of the current state parameters ($stateParams).\n * @param {Object} newParams The set of parameters which will be composited with inherited params.\n * @param {Object} $current Internal definition of object representing the current state.\n * @param {Object} $to Internal definition of object representing state to transition to.\n */\nfunction inheritParams(currentParams, newParams, $current, $to) {\n  var parents = ancestors($current, $to), parentParams, inherited = {}, inheritList = [];\n\n  for (var i in parents) {\n    if (!parents[i].params) continue;\n    parentParams = objectKeys(parents[i].params);\n    if (!parentParams.length) continue;\n\n    for (var j in parentParams) {\n      if (indexOf(inheritList, parentParams[j]) >= 0) continue;\n      inheritList.push(parentParams[j]);\n      inherited[parentParams[j]] = currentParams[parentParams[j]];\n    }\n  }\n  return extend({}, inherited, newParams);\n}\n\n/**\n * Performs a non-strict comparison of the subset of two objects, defined by a list of keys.\n *\n * @param {Object} a The first object.\n * @param {Object} b The second object.\n * @param {Array} keys The list of keys within each object to compare. If the list is empty or not specified,\n *                     it defaults to the list of keys in `a`.\n * @return {Boolean} Returns `true` if the keys match, otherwise `false`.\n */\nfunction equalForKeys(a, b, keys) {\n  if (!keys) {\n    keys = [];\n    for (var n in a) keys.push(n); // Used instead of Object.keys() for IE8 compatibility\n  }\n\n  for (var i=0; i<keys.length; i++) {\n    var k = keys[i];\n    if (a[k] != b[k]) return false; // Not '===', values aren't necessarily normalized\n  }\n  return true;\n}\n\n/**\n * Returns the subset of an object, based on a list of keys.\n *\n * @param {Array} keys\n * @param {Object} values\n * @return {Boolean} Returns a subset of `values`.\n */\nfunction filterByKeys(keys, values) {\n  var filtered = {};\n\n  forEach(keys, function (name) {\n    filtered[name] = values[name];\n  });\n  return filtered;\n}\n\n// like _.indexBy\n// when you know that your index values will be unique, or you want last-one-in to win\nfunction indexBy(array, propName) {\n  var result = {};\n  forEach(array, function(item) {\n    result[item[propName]] = item;\n  });\n  return result;\n}\n\n// extracted from underscore.js\n// Return a copy of the object only containing the whitelisted properties.\nfunction pick(obj) {\n  var copy = {};\n  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));\n  forEach(keys, function(key) {\n    if (key in obj) copy[key] = obj[key];\n  });\n  return copy;\n}\n\n// extracted from underscore.js\n// Return a copy of the object omitting the blacklisted properties.\nfunction omit(obj) {\n  var copy = {};\n  var keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));\n  for (var key in obj) {\n    if (indexOf(keys, key) == -1) copy[key] = obj[key];\n  }\n  return copy;\n}\n\nfunction pluck(collection, key) {\n  var result = isArray(collection) ? [] : {};\n\n  forEach(collection, function(val, i) {\n    result[i] = isFunction(key) ? key(val) : val[key];\n  });\n  return result;\n}\n\nfunction filter(collection, callback) {\n  var array = isArray(collection);\n  var result = array ? [] : {};\n  forEach(collection, function(val, i) {\n    if (callback(val, i)) {\n      result[array ? result.length : i] = val;\n    }\n  });\n  return result;\n}\n\nfunction map(collection, callback) {\n  var result = isArray(collection) ? [] : {};\n\n  forEach(collection, function(val, i) {\n    result[i] = callback(val, i);\n  });\n  return result;\n}\n\n/**\n * @ngdoc overview\n * @name ui.router.util\n *\n * @description\n * # ui.router.util sub-module\n *\n * This module is a dependency of other sub-modules. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n *\n */\nangular.module('ui.router.util', ['ng']);\n\n/**\n * @ngdoc overview\n * @name ui.router.router\n * \n * @requires ui.router.util\n *\n * @description\n * # ui.router.router sub-module\n *\n * This module is a dependency of other sub-modules. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n */\nangular.module('ui.router.router', ['ui.router.util']);\n\n/**\n * @ngdoc overview\n * @name ui.router.state\n * \n * @requires ui.router.router\n * @requires ui.router.util\n *\n * @description\n * # ui.router.state sub-module\n *\n * This module is a dependency of the main ui.router module. Do not include this module as a dependency\n * in your angular app (use {@link ui.router} module instead).\n * \n */\nangular.module('ui.router.state', ['ui.router.router', 'ui.router.util']);\n\n/**\n * @ngdoc overview\n * @name ui.router\n *\n * @requires ui.router.state\n *\n * @description\n * # ui.router\n * \n * ## The main module for ui.router \n * There are several sub-modules included with the ui.router module, however only this module is needed\n * as a dependency within your angular app. The other modules are for organization purposes. \n *\n * The modules are:\n * * ui.router - the main \"umbrella\" module\n * * ui.router.router - \n * \n * *You'll need to include **only** this module as the dependency within your angular app.*\n * \n * <pre>\n * <!doctype html>\n * <html ng-app=\"myApp\">\n * <head>\n *   <script src=\"js/angular.js\"></script>\n *   <!-- Include the ui-router script -->\n *   <script src=\"js/angular-ui-router.min.js\"></script>\n *   <script>\n *     // ...and add 'ui.router' as a dependency\n *     var myApp = angular.module('myApp', ['ui.router']);\n *   </script>\n * </head>\n * <body>\n * </body>\n * </html>\n * </pre>\n */\nangular.module('ui.router', ['ui.router.state']);\n\nangular.module('ui.router.compat', ['ui.router']);\n\n/**\n * @ngdoc object\n * @name ui.router.util.$resolve\n *\n * @requires $q\n * @requires $injector\n *\n * @description\n * Manages resolution of (acyclic) graphs of promises.\n */\n$Resolve.$inject = ['$q', '$injector'];\nfunction $Resolve(  $q,    $injector) {\n  \n  var VISIT_IN_PROGRESS = 1,\n      VISIT_DONE = 2,\n      NOTHING = {},\n      NO_DEPENDENCIES = [],\n      NO_LOCALS = NOTHING,\n      NO_PARENT = extend($q.when(NOTHING), { $$promises: NOTHING, $$values: NOTHING });\n  \n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$resolve#study\n   * @methodOf ui.router.util.$resolve\n   *\n   * @description\n   * Studies a set of invocables that are likely to be used multiple times.\n   * <pre>\n   * $resolve.study(invocables)(locals, parent, self)\n   * </pre>\n   * is equivalent to\n   * <pre>\n   * $resolve.resolve(invocables, locals, parent, self)\n   * </pre>\n   * but the former is more efficient (in fact `resolve` just calls `study` \n   * internally).\n   *\n   * @param {object} invocables Invocable objects\n   * @return {function} a function to pass in locals, parent and self\n   */\n  this.study = function (invocables) {\n    if (!isObject(invocables)) throw new Error(\"'invocables' must be an object\");\n    var invocableKeys = objectKeys(invocables || {});\n    \n    // Perform a topological sort of invocables to build an ordered plan\n    var plan = [], cycle = [], visited = {};\n    function visit(value, key) {\n      if (visited[key] === VISIT_DONE) return;\n      \n      cycle.push(key);\n      if (visited[key] === VISIT_IN_PROGRESS) {\n        cycle.splice(0, indexOf(cycle, key));\n        throw new Error(\"Cyclic dependency: \" + cycle.join(\" -> \"));\n      }\n      visited[key] = VISIT_IN_PROGRESS;\n      \n      if (isString(value)) {\n        plan.push(key, [ function() { return $injector.get(value); }], NO_DEPENDENCIES);\n      } else {\n        var params = $injector.annotate(value);\n        forEach(params, function (param) {\n          if (param !== key && invocables.hasOwnProperty(param)) visit(invocables[param], param);\n        });\n        plan.push(key, value, params);\n      }\n      \n      cycle.pop();\n      visited[key] = VISIT_DONE;\n    }\n    forEach(invocables, visit);\n    invocables = cycle = visited = null; // plan is all that's required\n    \n    function isResolve(value) {\n      return isObject(value) && value.then && value.$$promises;\n    }\n    \n    return function (locals, parent, self) {\n      if (isResolve(locals) && self === undefined) {\n        self = parent; parent = locals; locals = null;\n      }\n      if (!locals) locals = NO_LOCALS;\n      else if (!isObject(locals)) {\n        throw new Error(\"'locals' must be an object\");\n      }       \n      if (!parent) parent = NO_PARENT;\n      else if (!isResolve(parent)) {\n        throw new Error(\"'parent' must be a promise returned by $resolve.resolve()\");\n      }\n      \n      // To complete the overall resolution, we have to wait for the parent\n      // promise and for the promise for each invokable in our plan.\n      var resolution = $q.defer(),\n          result = resolution.promise,\n          promises = result.$$promises = {},\n          values = extend({}, locals),\n          wait = 1 + plan.length/3,\n          merged = false;\n          \n      function done() {\n        // Merge parent values we haven't got yet and publish our own $$values\n        if (!--wait) {\n          if (!merged) merge(values, parent.$$values); \n          result.$$values = values;\n          result.$$promises = result.$$promises || true; // keep for isResolve()\n          delete result.$$inheritedValues;\n          resolution.resolve(values);\n        }\n      }\n      \n      function fail(reason) {\n        result.$$failure = reason;\n        resolution.reject(reason);\n      }\n\n      // Short-circuit if parent has already failed\n      if (isDefined(parent.$$failure)) {\n        fail(parent.$$failure);\n        return result;\n      }\n      \n      if (parent.$$inheritedValues) {\n        merge(values, omit(parent.$$inheritedValues, invocableKeys));\n      }\n\n      // Merge parent values if the parent has already resolved, or merge\n      // parent promises and wait if the parent resolve is still in progress.\n      extend(promises, parent.$$promises);\n      if (parent.$$values) {\n        merged = merge(values, omit(parent.$$values, invocableKeys));\n        result.$$inheritedValues = omit(parent.$$values, invocableKeys);\n        done();\n      } else {\n        if (parent.$$inheritedValues) {\n          result.$$inheritedValues = omit(parent.$$inheritedValues, invocableKeys);\n        }        \n        parent.then(done, fail);\n      }\n      \n      // Process each invocable in the plan, but ignore any where a local of the same name exists.\n      for (var i=0, ii=plan.length; i<ii; i+=3) {\n        if (locals.hasOwnProperty(plan[i])) done();\n        else invoke(plan[i], plan[i+1], plan[i+2]);\n      }\n      \n      function invoke(key, invocable, params) {\n        // Create a deferred for this invocation. Failures will propagate to the resolution as well.\n        var invocation = $q.defer(), waitParams = 0;\n        function onfailure(reason) {\n          invocation.reject(reason);\n          fail(reason);\n        }\n        // Wait for any parameter that we have a promise for (either from parent or from this\n        // resolve; in that case study() will have made sure it's ordered before us in the plan).\n        forEach(params, function (dep) {\n          if (promises.hasOwnProperty(dep) && !locals.hasOwnProperty(dep)) {\n            waitParams++;\n            promises[dep].then(function (result) {\n              values[dep] = result;\n              if (!(--waitParams)) proceed();\n            }, onfailure);\n          }\n        });\n        if (!waitParams) proceed();\n        function proceed() {\n          if (isDefined(result.$$failure)) return;\n          try {\n            invocation.resolve($injector.invoke(invocable, self, values));\n            invocation.promise.then(function (result) {\n              values[key] = result;\n              done();\n            }, onfailure);\n          } catch (e) {\n            onfailure(e);\n          }\n        }\n        // Publish promise synchronously; invocations further down in the plan may depend on it.\n        promises[key] = invocation.promise;\n      }\n      \n      return result;\n    };\n  };\n  \n  /**\n   * @ngdoc function\n   * @name ui.router.util.$resolve#resolve\n   * @methodOf ui.router.util.$resolve\n   *\n   * @description\n   * Resolves a set of invocables. An invocable is a function to be invoked via \n   * `$injector.invoke()`, and can have an arbitrary number of dependencies. \n   * An invocable can either return a value directly,\n   * or a `$q` promise. If a promise is returned it will be resolved and the \n   * resulting value will be used instead. Dependencies of invocables are resolved \n   * (in this order of precedence)\n   *\n   * - from the specified `locals`\n   * - from another invocable that is part of this `$resolve` call\n   * - from an invocable that is inherited from a `parent` call to `$resolve` \n   *   (or recursively\n   * - from any ancestor `$resolve` of that parent).\n   *\n   * The return value of `$resolve` is a promise for an object that contains \n   * (in this order of precedence)\n   *\n   * - any `locals` (if specified)\n   * - the resolved return values of all injectables\n   * - any values inherited from a `parent` call to `$resolve` (if specified)\n   *\n   * The promise will resolve after the `parent` promise (if any) and all promises \n   * returned by injectables have been resolved. If any invocable \n   * (or `$injector.invoke`) throws an exception, or if a promise returned by an \n   * invocable is rejected, the `$resolve` promise is immediately rejected with the \n   * same error. A rejection of a `parent` promise (if specified) will likewise be \n   * propagated immediately. Once the `$resolve` promise has been rejected, no \n   * further invocables will be called.\n   * \n   * Cyclic dependencies between invocables are not permitted and will caues `$resolve`\n   * to throw an error. As a special case, an injectable can depend on a parameter \n   * with the same name as the injectable, which will be fulfilled from the `parent` \n   * injectable of the same name. This allows inherited values to be decorated. \n   * Note that in this case any other injectable in the same `$resolve` with the same\n   * dependency would see the decorated value, not the inherited value.\n   *\n   * Note that missing dependencies -- unlike cyclic dependencies -- will cause an \n   * (asynchronous) rejection of the `$resolve` promise rather than a (synchronous) \n   * exception.\n   *\n   * Invocables are invoked eagerly as soon as all dependencies are available. \n   * This is true even for dependencies inherited from a `parent` call to `$resolve`.\n   *\n   * As a special case, an invocable can be a string, in which case it is taken to \n   * be a service name to be passed to `$injector.get()`. This is supported primarily \n   * for backwards-compatibility with the `resolve` property of `$routeProvider` \n   * routes.\n   *\n   * @param {object} invocables functions to invoke or \n   * `$injector` services to fetch.\n   * @param {object} locals  values to make available to the injectables\n   * @param {object} parent  a promise returned by another call to `$resolve`.\n   * @param {object} self  the `this` for the invoked methods\n   * @return {object} Promise for an object that contains the resolved return value\n   * of all invocables, as well as any inherited and local values.\n   */\n  this.resolve = function (invocables, locals, parent, self) {\n    return this.study(invocables)(locals, parent, self);\n  };\n}\n\nangular.module('ui.router.util').service('$resolve', $Resolve);\n\n\n/**\n * @ngdoc object\n * @name ui.router.util.$templateFactory\n *\n * @requires $http\n * @requires $templateCache\n * @requires $injector\n *\n * @description\n * Service. Manages loading of templates.\n */\n$TemplateFactory.$inject = ['$http', '$templateCache', '$injector'];\nfunction $TemplateFactory(  $http,   $templateCache,   $injector) {\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromConfig\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template from a configuration object. \n   *\n   * @param {object} config Configuration object for which to load a template. \n   * The following properties are search in the specified order, and the first one \n   * that is defined is used to create the template:\n   *\n   * @param {string|object} config.template html string template or function to \n   * load via {@link ui.router.util.$templateFactory#fromString fromString}.\n   * @param {string|object} config.templateUrl url to load or a function returning \n   * the url to load via {@link ui.router.util.$templateFactory#fromUrl fromUrl}.\n   * @param {Function} config.templateProvider function to invoke via \n   * {@link ui.router.util.$templateFactory#fromProvider fromProvider}.\n   * @param {object} params  Parameters to pass to the template function.\n   * @param {object} locals Locals to pass to `invoke` if the template is loaded \n   * via a `templateProvider`. Defaults to `{ params: params }`.\n   *\n   * @return {string|object}  The template html as a string, or a promise for \n   * that string,or `null` if no template is configured.\n   */\n  this.fromConfig = function (config, params, locals) {\n    return (\n      isDefined(config.template) ? this.fromString(config.template, params) :\n      isDefined(config.templateUrl) ? this.fromUrl(config.templateUrl, params) :\n      isDefined(config.templateProvider) ? this.fromProvider(config.templateProvider, params, locals) :\n      null\n    );\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromString\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template from a string or a function returning a string.\n   *\n   * @param {string|object} template html template as a string or function that \n   * returns an html template as a string.\n   * @param {object} params Parameters to pass to the template function.\n   *\n   * @return {string|object} The template html as a string, or a promise for that \n   * string.\n   */\n  this.fromString = function (template, params) {\n    return isFunction(template) ? template(params) : template;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromUrl\n   * @methodOf ui.router.util.$templateFactory\n   * \n   * @description\n   * Loads a template from the a URL via `$http` and `$templateCache`.\n   *\n   * @param {string|Function} url url of the template to load, or a function \n   * that returns a url.\n   * @param {Object} params Parameters to pass to the url function.\n   * @return {string|Promise.<string>} The template html as a string, or a promise \n   * for that string.\n   */\n  this.fromUrl = function (url, params) {\n    if (isFunction(url)) url = url(params);\n    if (url == null) return null;\n    else return $http\n        .get(url, { cache: $templateCache, headers: { Accept: 'text/html' }})\n        .then(function(response) { return response.data; });\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$templateFactory#fromProvider\n   * @methodOf ui.router.util.$templateFactory\n   *\n   * @description\n   * Creates a template by invoking an injectable provider function.\n   *\n   * @param {Function} provider Function to invoke via `$injector.invoke`\n   * @param {Object} params Parameters for the template.\n   * @param {Object} locals Locals to pass to `invoke`. Defaults to \n   * `{ params: params }`.\n   * @return {string|Promise.<string>} The template html as a string, or a promise \n   * for that string.\n   */\n  this.fromProvider = function (provider, params, locals) {\n    return $injector.invoke(provider, null, locals || { params: params });\n  };\n}\n\nangular.module('ui.router.util').service('$templateFactory', $TemplateFactory);\n\nvar $$UMFP; // reference to $UrlMatcherFactoryProvider\n\n/**\n * @ngdoc object\n * @name ui.router.util.type:UrlMatcher\n *\n * @description\n * Matches URLs against patterns and extracts named parameters from the path or the search\n * part of the URL. A URL pattern consists of a path pattern, optionally followed by '?' and a list\n * of search parameters. Multiple search parameter names are separated by '&'. Search parameters\n * do not influence whether or not a URL is matched, but their values are passed through into\n * the matched parameters returned by {@link ui.router.util.type:UrlMatcher#methods_exec exec}.\n *\n * Path parameter placeholders can be specified using simple colon/catch-all syntax or curly brace\n * syntax, which optionally allows a regular expression for the parameter to be specified:\n *\n * * `':'` name - colon placeholder\n * * `'*'` name - catch-all placeholder\n * * `'{' name '}'` - curly placeholder\n * * `'{' name ':' regexp|type '}'` - curly placeholder with regexp or type name. Should the\n *   regexp itself contain curly braces, they must be in matched pairs or escaped with a backslash.\n *\n * Parameter names may contain only word characters (latin letters, digits, and underscore) and\n * must be unique within the pattern (across both path and search parameters). For colon\n * placeholders or curly placeholders without an explicit regexp, a path parameter matches any\n * number of characters other than '/'. For catch-all placeholders the path parameter matches\n * any number of characters.\n *\n * Examples:\n *\n * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for\n *   trailing slashes, and patterns have to match the entire path, not just a prefix.\n * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or\n *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.\n * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.\n * * `'/user/{id:[^/]*}'` - Same as the previous example.\n * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id\n *   parameter consists of 1 to 8 hex digits.\n * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the\n *   path into the parameter 'path'.\n * * `'/files/*path'` - ditto.\n * * `'/calendar/{start:date}'` - Matches \"/calendar/2014-11-12\" (because the pattern defined\n *   in the built-in  `date` Type matches `2014-11-12`) and provides a Date object in $stateParams.start\n *\n * @param {string} pattern  The pattern to compile into a matcher.\n * @param {Object} config  A configuration object hash:\n * @param {Object=} parentMatcher Used to concatenate the pattern/config onto\n *   an existing UrlMatcher\n *\n * * `caseInsensitive` - `true` if URL matching should be case insensitive, otherwise `false`, the default value (for backward compatibility) is `false`.\n * * `strict` - `false` if matching against a URL with a trailing slash should be treated as equivalent to a URL without a trailing slash, the default value is `true`.\n *\n * @property {string} prefix  A static prefix of this pattern. The matcher guarantees that any\n *   URL matching this matcher (i.e. any string for which {@link ui.router.util.type:UrlMatcher#methods_exec exec()} returns\n *   non-null) will start with this prefix.\n *\n * @property {string} source  The pattern that was passed into the constructor\n *\n * @property {string} sourcePath  The path portion of the source property\n *\n * @property {string} sourceSearch  The search portion of the source property\n *\n * @property {string} regex  The constructed regex that will be used to match against the url when\n *   it is time to determine which url will match.\n *\n * @returns {Object}  New `UrlMatcher` object\n */\nfunction UrlMatcher(pattern, config, parentMatcher) {\n  config = extend({ params: {} }, isObject(config) ? config : {});\n\n  // Find all placeholders and create a compiled pattern, using either classic or curly syntax:\n  //   '*' name\n  //   ':' name\n  //   '{' name '}'\n  //   '{' name ':' regexp '}'\n  // The regular expression is somewhat complicated due to the need to allow curly braces\n  // inside the regular expression. The placeholder regexp breaks down as follows:\n  //    ([:*])([\\w\\[\\]]+)              - classic placeholder ($1 / $2) (search version has - for snake-case)\n  //    \\{([\\w\\[\\]]+)(?:\\:( ... ))?\\}  - curly brace placeholder ($3) with optional regexp/type ... ($4) (search version has - for snake-case\n  //    (?: ... | ... | ... )+         - the regexp consists of any number of atoms, an atom being either\n  //    [^{}\\\\]+                       - anything other than curly braces or backslash\n  //    \\\\.                            - a backslash escape\n  //    \\{(?:[^{}\\\\]+|\\\\.)*\\}          - a matched set of curly braces containing other atoms\n  var placeholder       = /([:*])([\\w\\[\\]]+)|\\{([\\w\\[\\]]+)(?:\\:((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n      searchPlaceholder = /([:]?)([\\w\\[\\]-]+)|\\{([\\w\\[\\]-]+)(?:\\:((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,\n      compiled = '^', last = 0, m,\n      segments = this.segments = [],\n      parentParams = parentMatcher ? parentMatcher.params : {},\n      params = this.params = parentMatcher ? parentMatcher.params.$$new() : new $$UMFP.ParamSet(),\n      paramNames = [];\n\n  function addParameter(id, type, config, location) {\n    paramNames.push(id);\n    if (parentParams[id]) return parentParams[id];\n    if (!/^\\w+(-+\\w+)*(?:\\[\\])?$/.test(id)) throw new Error(\"Invalid parameter name '\" + id + \"' in pattern '\" + pattern + \"'\");\n    if (params[id]) throw new Error(\"Duplicate parameter name '\" + id + \"' in pattern '\" + pattern + \"'\");\n    params[id] = new $$UMFP.Param(id, type, config, location);\n    return params[id];\n  }\n\n  function quoteRegExp(string, pattern, squash, optional) {\n    var surroundPattern = ['',''], result = string.replace(/[\\\\\\[\\]\\^$*+?.()|{}]/g, \"\\\\$&\");\n    if (!pattern) return result;\n    switch(squash) {\n      case false: surroundPattern = ['(', ')' + (optional ? \"?\" : \"\")]; break;\n      case true:  surroundPattern = ['?(', ')?']; break;\n      default:    surroundPattern = ['(' + squash + \"|\", ')?']; break;\n    }\n    return result + surroundPattern[0] + pattern + surroundPattern[1];\n  }\n\n  this.source = pattern;\n\n  // Split into static segments separated by path parameter placeholders.\n  // The number of segments is always 1 more than the number of parameters.\n  function matchDetails(m, isSearch) {\n    var id, regexp, segment, type, cfg, arrayMode;\n    id          = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null\n    cfg         = config.params[id];\n    segment     = pattern.substring(last, m.index);\n    regexp      = isSearch ? m[4] : m[4] || (m[1] == '*' ? '.*' : null);\n    type        = $$UMFP.type(regexp || \"string\") || inherit($$UMFP.type(\"string\"), { pattern: new RegExp(regexp, config.caseInsensitive ? 'i' : undefined) });\n    return {\n      id: id, regexp: regexp, segment: segment, type: type, cfg: cfg\n    };\n  }\n\n  var p, param, segment;\n  while ((m = placeholder.exec(pattern))) {\n    p = matchDetails(m, false);\n    if (p.segment.indexOf('?') >= 0) break; // we're into the search part\n\n    param = addParameter(p.id, p.type, p.cfg, \"path\");\n    compiled += quoteRegExp(p.segment, param.type.pattern.source, param.squash, param.isOptional);\n    segments.push(p.segment);\n    last = placeholder.lastIndex;\n  }\n  segment = pattern.substring(last);\n\n  // Find any search parameter names and remove them from the last segment\n  var i = segment.indexOf('?');\n\n  if (i >= 0) {\n    var search = this.sourceSearch = segment.substring(i);\n    segment = segment.substring(0, i);\n    this.sourcePath = pattern.substring(0, last + i);\n\n    if (search.length > 0) {\n      last = 0;\n      while ((m = searchPlaceholder.exec(search))) {\n        p = matchDetails(m, true);\n        param = addParameter(p.id, p.type, p.cfg, \"search\");\n        last = placeholder.lastIndex;\n        // check if ?&\n      }\n    }\n  } else {\n    this.sourcePath = pattern;\n    this.sourceSearch = '';\n  }\n\n  compiled += quoteRegExp(segment) + (config.strict === false ? '\\/?' : '') + '$';\n  segments.push(segment);\n\n  this.regexp = new RegExp(compiled, config.caseInsensitive ? 'i' : undefined);\n  this.prefix = segments[0];\n  this.$$paramNames = paramNames;\n}\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#concat\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Returns a new matcher for a pattern constructed by appending the path part and adding the\n * search parameters of the specified pattern to this pattern. The current pattern is not\n * modified. This can be understood as creating a pattern for URLs that are relative to (or\n * suffixes of) the current pattern.\n *\n * @example\n * The following two matchers are equivalent:\n * <pre>\n * new UrlMatcher('/user/{id}?q').concat('/details?date');\n * new UrlMatcher('/user/{id}/details?q&date');\n * </pre>\n *\n * @param {string} pattern  The pattern to append.\n * @param {Object} config  An object hash of the configuration for the matcher.\n * @returns {UrlMatcher}  A matcher for the concatenated pattern.\n */\nUrlMatcher.prototype.concat = function (pattern, config) {\n  // Because order of search parameters is irrelevant, we can add our own search\n  // parameters to the end of the new pattern. Parse the new pattern by itself\n  // and then join the bits together, but it's much easier to do this on a string level.\n  var defaultConfig = {\n    caseInsensitive: $$UMFP.caseInsensitive(),\n    strict: $$UMFP.strictMode(),\n    squash: $$UMFP.defaultSquashPolicy()\n  };\n  return new UrlMatcher(this.sourcePath + pattern + this.sourceSearch, extend(defaultConfig, config), this);\n};\n\nUrlMatcher.prototype.toString = function () {\n  return this.source;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#exec\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Tests the specified path against this matcher, and returns an object containing the captured\n * parameter values, or null if the path does not match. The returned object contains the values\n * of any search parameters that are mentioned in the pattern, but their value may be null if\n * they are not present in `searchParams`. This means that search parameters are always treated\n * as optional.\n *\n * @example\n * <pre>\n * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', {\n *   x: '1', q: 'hello'\n * });\n * // returns { id: 'bob', q: 'hello', r: null }\n * </pre>\n *\n * @param {string} path  The URL path to match, e.g. `$location.path()`.\n * @param {Object} searchParams  URL search parameters, e.g. `$location.search()`.\n * @returns {Object}  The captured parameter values.\n */\nUrlMatcher.prototype.exec = function (path, searchParams) {\n  var m = this.regexp.exec(path);\n  if (!m) return null;\n  searchParams = searchParams || {};\n\n  var paramNames = this.parameters(), nTotal = paramNames.length,\n    nPath = this.segments.length - 1,\n    values = {}, i, j, cfg, paramName;\n\n  if (nPath !== m.length - 1) throw new Error(\"Unbalanced capture group in route '\" + this.source + \"'\");\n\n  function decodePathArray(string) {\n    function reverseString(str) { return str.split(\"\").reverse().join(\"\"); }\n    function unquoteDashes(str) { return str.replace(/\\\\-/g, \"-\"); }\n\n    var split = reverseString(string).split(/-(?!\\\\)/);\n    var allReversed = map(split, reverseString);\n    return map(allReversed, unquoteDashes).reverse();\n  }\n\n  for (i = 0; i < nPath; i++) {\n    paramName = paramNames[i];\n    var param = this.params[paramName];\n    var paramVal = m[i+1];\n    // if the param value matches a pre-replace pair, replace the value before decoding.\n    for (j = 0; j < param.replace; j++) {\n      if (param.replace[j].from === paramVal) paramVal = param.replace[j].to;\n    }\n    if (paramVal && param.array === true) paramVal = decodePathArray(paramVal);\n    values[paramName] = param.value(paramVal);\n  }\n  for (/**/; i < nTotal; i++) {\n    paramName = paramNames[i];\n    values[paramName] = this.params[paramName].value(searchParams[paramName]);\n  }\n\n  return values;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#parameters\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Returns the names of all path and search parameters of this pattern in an unspecified order.\n *\n * @returns {Array.<string>}  An array of parameter names. Must be treated as read-only. If the\n *    pattern has no parameters, an empty array is returned.\n */\nUrlMatcher.prototype.parameters = function (param) {\n  if (!isDefined(param)) return this.$$paramNames;\n  return this.params[param] || null;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#validate\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Checks an object hash of parameters to validate their correctness according to the parameter\n * types of this `UrlMatcher`.\n *\n * @param {Object} params The object hash of parameters to validate.\n * @returns {boolean} Returns `true` if `params` validates, otherwise `false`.\n */\nUrlMatcher.prototype.validates = function (params) {\n  return this.params.$$validates(params);\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:UrlMatcher#format\n * @methodOf ui.router.util.type:UrlMatcher\n *\n * @description\n * Creates a URL that matches this pattern by substituting the specified values\n * for the path and search parameters. Null values for path parameters are\n * treated as empty strings.\n *\n * @example\n * <pre>\n * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });\n * // returns '/user/bob?q=yes'\n * </pre>\n *\n * @param {Object} values  the values to substitute for the parameters in this pattern.\n * @returns {string}  the formatted URL (path and optionally search part).\n */\nUrlMatcher.prototype.format = function (values) {\n  values = values || {};\n  var segments = this.segments, params = this.parameters(), paramset = this.params;\n  if (!this.validates(values)) return null;\n\n  var i, search = false, nPath = segments.length - 1, nTotal = params.length, result = segments[0];\n\n  function encodeDashes(str) { // Replace dashes with encoded \"\\-\"\n    return encodeURIComponent(str).replace(/-/g, function(c) { return '%5C%' + c.charCodeAt(0).toString(16).toUpperCase(); });\n  }\n\n  for (i = 0; i < nTotal; i++) {\n    var isPathParam = i < nPath;\n    var name = params[i], param = paramset[name], value = param.value(values[name]);\n    var isDefaultValue = param.isOptional && param.type.equals(param.value(), value);\n    var squash = isDefaultValue ? param.squash : false;\n    var encoded = param.type.encode(value);\n\n    if (isPathParam) {\n      var nextSegment = segments[i + 1];\n      if (squash === false) {\n        if (encoded != null) {\n          if (isArray(encoded)) {\n            result += map(encoded, encodeDashes).join(\"-\");\n          } else {\n            result += encodeURIComponent(encoded);\n          }\n        }\n        result += nextSegment;\n      } else if (squash === true) {\n        var capture = result.match(/\\/$/) ? /\\/?(.*)/ : /(.*)/;\n        result += nextSegment.match(capture)[1];\n      } else if (isString(squash)) {\n        result += squash + nextSegment;\n      }\n    } else {\n      if (encoded == null || (isDefaultValue && squash !== false)) continue;\n      if (!isArray(encoded)) encoded = [ encoded ];\n      encoded = map(encoded, encodeURIComponent).join('&' + name + '=');\n      result += (search ? '&' : '?') + (name + '=' + encoded);\n      search = true;\n    }\n  }\n\n  return result;\n};\n\n/**\n * @ngdoc object\n * @name ui.router.util.type:Type\n *\n * @description\n * Implements an interface to define custom parameter types that can be decoded from and encoded to\n * string parameters matched in a URL. Used by {@link ui.router.util.type:UrlMatcher `UrlMatcher`}\n * objects when matching or formatting URLs, or comparing or validating parameter values.\n *\n * See {@link ui.router.util.$urlMatcherFactory#methods_type `$urlMatcherFactory#type()`} for more\n * information on registering custom types.\n *\n * @param {Object} config  A configuration object which contains the custom type definition.  The object's\n *        properties will override the default methods and/or pattern in `Type`'s public interface.\n * @example\n * <pre>\n * {\n *   decode: function(val) { return parseInt(val, 10); },\n *   encode: function(val) { return val && val.toString(); },\n *   equals: function(a, b) { return this.is(a) && a === b; },\n *   is: function(val) { return angular.isNumber(val) isFinite(val) && val % 1 === 0; },\n *   pattern: /\\d+/\n * }\n * </pre>\n *\n * @property {RegExp} pattern The regular expression pattern used to match values of this type when\n *           coming from a substring of a URL.\n *\n * @returns {Object}  Returns a new `Type` object.\n */\nfunction Type(config) {\n  extend(this, config);\n}\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#is\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Detects whether a value is of a particular type. Accepts a native (decoded) value\n * and determines whether it matches the current `Type` object.\n *\n * @param {*} val  The value to check.\n * @param {string} key  Optional. If the type check is happening in the context of a specific\n *        {@link ui.router.util.type:UrlMatcher `UrlMatcher`} object, this is the name of the\n *        parameter in which `val` is stored. Can be used for meta-programming of `Type` objects.\n * @returns {Boolean}  Returns `true` if the value matches the type, otherwise `false`.\n */\nType.prototype.is = function(val, key) {\n  return true;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#encode\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Encodes a custom/native type value to a string that can be embedded in a URL. Note that the\n * return value does *not* need to be URL-safe (i.e. passed through `encodeURIComponent()`), it\n * only needs to be a representation of `val` that has been coerced to a string.\n *\n * @param {*} val  The value to encode.\n * @param {string} key  The name of the parameter in which `val` is stored. Can be used for\n *        meta-programming of `Type` objects.\n * @returns {string}  Returns a string representation of `val` that can be encoded in a URL.\n */\nType.prototype.encode = function(val, key) {\n  return val;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#decode\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Converts a parameter value (from URL string or transition param) to a custom/native value.\n *\n * @param {string} val  The URL parameter value to decode.\n * @param {string} key  The name of the parameter in which `val` is stored. Can be used for\n *        meta-programming of `Type` objects.\n * @returns {*}  Returns a custom representation of the URL parameter value.\n */\nType.prototype.decode = function(val, key) {\n  return val;\n};\n\n/**\n * @ngdoc function\n * @name ui.router.util.type:Type#equals\n * @methodOf ui.router.util.type:Type\n *\n * @description\n * Determines whether two decoded values are equivalent.\n *\n * @param {*} a  A value to compare against.\n * @param {*} b  A value to compare against.\n * @returns {Boolean}  Returns `true` if the values are equivalent/equal, otherwise `false`.\n */\nType.prototype.equals = function(a, b) {\n  return a == b;\n};\n\nType.prototype.$subPattern = function() {\n  var sub = this.pattern.toString();\n  return sub.substr(1, sub.length - 2);\n};\n\nType.prototype.pattern = /.*/;\n\nType.prototype.toString = function() { return \"{Type:\" + this.name + \"}\"; };\n\n/** Given an encoded string, or a decoded object, returns a decoded object */\nType.prototype.$normalize = function(val) {\n  return this.is(val) ? val : this.decode(val);\n};\n\n/*\n * Wraps an existing custom Type as an array of Type, depending on 'mode'.\n * e.g.:\n * - urlmatcher pattern \"/path?{queryParam[]:int}\"\n * - url: \"/path?queryParam=1&queryParam=2\n * - $stateParams.queryParam will be [1, 2]\n * if `mode` is \"auto\", then\n * - url: \"/path?queryParam=1 will create $stateParams.queryParam: 1\n * - url: \"/path?queryParam=1&queryParam=2 will create $stateParams.queryParam: [1, 2]\n */\nType.prototype.$asArray = function(mode, isSearch) {\n  if (!mode) return this;\n  if (mode === \"auto\" && !isSearch) throw new Error(\"'auto' array mode is for query parameters only\");\n\n  function ArrayType(type, mode) {\n    function bindTo(type, callbackName) {\n      return function() {\n        return type[callbackName].apply(type, arguments);\n      };\n    }\n\n    // Wrap non-array value as array\n    function arrayWrap(val) { return isArray(val) ? val : (isDefined(val) ? [ val ] : []); }\n    // Unwrap array value for \"auto\" mode. Return undefined for empty array.\n    function arrayUnwrap(val) {\n      switch(val.length) {\n        case 0: return undefined;\n        case 1: return mode === \"auto\" ? val[0] : val;\n        default: return val;\n      }\n    }\n    function falsey(val) { return !val; }\n\n    // Wraps type (.is/.encode/.decode) functions to operate on each value of an array\n    function arrayHandler(callback, allTruthyMode) {\n      return function handleArray(val) {\n        val = arrayWrap(val);\n        var result = map(val, callback);\n        if (allTruthyMode === true)\n          return filter(result, falsey).length === 0;\n        return arrayUnwrap(result);\n      };\n    }\n\n    // Wraps type (.equals) functions to operate on each value of an array\n    function arrayEqualsHandler(callback) {\n      return function handleArray(val1, val2) {\n        var left = arrayWrap(val1), right = arrayWrap(val2);\n        if (left.length !== right.length) return false;\n        for (var i = 0; i < left.length; i++) {\n          if (!callback(left[i], right[i])) return false;\n        }\n        return true;\n      };\n    }\n\n    this.encode = arrayHandler(bindTo(type, 'encode'));\n    this.decode = arrayHandler(bindTo(type, 'decode'));\n    this.is     = arrayHandler(bindTo(type, 'is'), true);\n    this.equals = arrayEqualsHandler(bindTo(type, 'equals'));\n    this.pattern = type.pattern;\n    this.$normalize = arrayHandler(bindTo(type, '$normalize'));\n    this.name = type.name;\n    this.$arrayMode = mode;\n  }\n\n  return new ArrayType(this, mode);\n};\n\n\n\n/**\n * @ngdoc object\n * @name ui.router.util.$urlMatcherFactory\n *\n * @description\n * Factory for {@link ui.router.util.type:UrlMatcher `UrlMatcher`} instances. The factory\n * is also available to providers under the name `$urlMatcherFactoryProvider`.\n */\nfunction $UrlMatcherFactory() {\n  $$UMFP = this;\n\n  var isCaseInsensitive = false, isStrictMode = true, defaultSquashPolicy = false;\n\n  function valToString(val) { return val != null ? val.toString().replace(/\\//g, \"%2F\") : val; }\n  function valFromString(val) { return val != null ? val.toString().replace(/%2F/g, \"/\") : val; }\n\n  var $types = {}, enqueue = true, typeQueue = [], injector, defaultTypes = {\n    string: {\n      encode: valToString,\n      decode: valFromString,\n      // TODO: in 1.0, make string .is() return false if value is undefined/null by default.\n      // In 0.2.x, string params are optional by default for backwards compat\n      is: function(val) { return val == null || !isDefined(val) || typeof val === \"string\"; },\n      pattern: /[^/]*/\n    },\n    int: {\n      encode: valToString,\n      decode: function(val) { return parseInt(val, 10); },\n      is: function(val) { return isDefined(val) && this.decode(val.toString()) === val; },\n      pattern: /\\d+/\n    },\n    bool: {\n      encode: function(val) { return val ? 1 : 0; },\n      decode: function(val) { return parseInt(val, 10) !== 0; },\n      is: function(val) { return val === true || val === false; },\n      pattern: /0|1/\n    },\n    date: {\n      encode: function (val) {\n        if (!this.is(val))\n          return undefined;\n        return [ val.getFullYear(),\n          ('0' + (val.getMonth() + 1)).slice(-2),\n          ('0' + val.getDate()).slice(-2)\n        ].join(\"-\");\n      },\n      decode: function (val) {\n        if (this.is(val)) return val;\n        var match = this.capture.exec(val);\n        return match ? new Date(match[1], match[2] - 1, match[3]) : undefined;\n      },\n      is: function(val) { return val instanceof Date && !isNaN(val.valueOf()); },\n      equals: function (a, b) { return this.is(a) && this.is(b) && a.toISOString() === b.toISOString(); },\n      pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,\n      capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/\n    },\n    json: {\n      encode: angular.toJson,\n      decode: angular.fromJson,\n      is: angular.isObject,\n      equals: angular.equals,\n      pattern: /[^/]*/\n    },\n    any: { // does not encode/decode\n      encode: angular.identity,\n      decode: angular.identity,\n      equals: angular.equals,\n      pattern: /.*/\n    }\n  };\n\n  function getDefaultConfig() {\n    return {\n      strict: isStrictMode,\n      caseInsensitive: isCaseInsensitive\n    };\n  }\n\n  function isInjectable(value) {\n    return (isFunction(value) || (isArray(value) && isFunction(value[value.length - 1])));\n  }\n\n  /**\n   * [Internal] Get the default value of a parameter, which may be an injectable function.\n   */\n  $UrlMatcherFactory.$$getDefaultValue = function(config) {\n    if (!isInjectable(config.value)) return config.value;\n    if (!injector) throw new Error(\"Injectable functions cannot be called at configuration time\");\n    return injector.invoke(config.value);\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#caseInsensitive\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Defines whether URL matching should be case sensitive (the default behavior), or not.\n   *\n   * @param {boolean} value `false` to match URL in a case sensitive manner; otherwise `true`;\n   * @returns {boolean} the current value of caseInsensitive\n   */\n  this.caseInsensitive = function(value) {\n    if (isDefined(value))\n      isCaseInsensitive = value;\n    return isCaseInsensitive;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#strictMode\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Defines whether URLs should match trailing slashes, or not (the default behavior).\n   *\n   * @param {boolean=} value `false` to match trailing slashes in URLs, otherwise `true`.\n   * @returns {boolean} the current value of strictMode\n   */\n  this.strictMode = function(value) {\n    if (isDefined(value))\n      isStrictMode = value;\n    return isStrictMode;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#defaultSquashPolicy\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Sets the default behavior when generating or matching URLs with default parameter values.\n   *\n   * @param {string} value A string that defines the default parameter URL squashing behavior.\n   *    `nosquash`: When generating an href with a default parameter value, do not squash the parameter value from the URL\n   *    `slash`: When generating an href with a default parameter value, squash (remove) the parameter value, and, if the\n   *             parameter is surrounded by slashes, squash (remove) one slash from the URL\n   *    any other string, e.g. \"~\": When generating an href with a default parameter value, squash (remove)\n   *             the parameter value from the URL and replace it with this string.\n   */\n  this.defaultSquashPolicy = function(value) {\n    if (!isDefined(value)) return defaultSquashPolicy;\n    if (value !== true && value !== false && !isString(value))\n      throw new Error(\"Invalid squash policy: \" + value + \". Valid policies: false, true, arbitrary-string\");\n    defaultSquashPolicy = value;\n    return value;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#compile\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Creates a {@link ui.router.util.type:UrlMatcher `UrlMatcher`} for the specified pattern.\n   *\n   * @param {string} pattern  The URL pattern.\n   * @param {Object} config  The config object hash.\n   * @returns {UrlMatcher}  The UrlMatcher.\n   */\n  this.compile = function (pattern, config) {\n    return new UrlMatcher(pattern, extend(getDefaultConfig(), config));\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#isMatcher\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Returns true if the specified object is a `UrlMatcher`, or false otherwise.\n   *\n   * @param {Object} object  The object to perform the type check against.\n   * @returns {Boolean}  Returns `true` if the object matches the `UrlMatcher` interface, by\n   *          implementing all the same methods.\n   */\n  this.isMatcher = function (o) {\n    if (!isObject(o)) return false;\n    var result = true;\n\n    forEach(UrlMatcher.prototype, function(val, name) {\n      if (isFunction(val)) {\n        result = result && (isDefined(o[name]) && isFunction(o[name]));\n      }\n    });\n    return result;\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.util.$urlMatcherFactory#type\n   * @methodOf ui.router.util.$urlMatcherFactory\n   *\n   * @description\n   * Registers a custom {@link ui.router.util.type:Type `Type`} object that can be used to\n   * generate URLs with typed parameters.\n   *\n   * @param {string} name  The type name.\n   * @param {Object|Function} definition   The type definition. See\n   *        {@link ui.router.util.type:Type `Type`} for information on the values accepted.\n   * @param {Object|Function} definitionFn (optional) A function that is injected before the app\n   *        runtime starts.  The result of this function is merged into the existing `definition`.\n   *        See {@link ui.router.util.type:Type `Type`} for information on the values accepted.\n   *\n   * @returns {Object}  Returns `$urlMatcherFactoryProvider`.\n   *\n   * @example\n   * This is a simple example of a custom type that encodes and decodes items from an\n   * array, using the array index as the URL-encoded value:\n   *\n   * <pre>\n   * var list = ['John', 'Paul', 'George', 'Ringo'];\n   *\n   * $urlMatcherFactoryProvider.type('listItem', {\n   *   encode: function(item) {\n   *     // Represent the list item in the URL using its corresponding index\n   *     return list.indexOf(item);\n   *   },\n   *   decode: function(item) {\n   *     // Look up the list item by index\n   *     return list[parseInt(item, 10)];\n   *   },\n   *   is: function(item) {\n   *     // Ensure the item is valid by checking to see that it appears\n   *     // in the list\n   *     return list.indexOf(item) > -1;\n   *   }\n   * });\n   *\n   * $stateProvider.state('list', {\n   *   url: \"/list/{item:listItem}\",\n   *   controller: function($scope, $stateParams) {\n   *     console.log($stateParams.item);\n   *   }\n   * });\n   *\n   * // ...\n   *\n   * // Changes URL to '/list/3', logs \"Ringo\" to the console\n   * $state.go('list', { item: \"Ringo\" });\n   * </pre>\n   *\n   * This is a more complex example of a type that relies on dependency injection to\n   * interact with services, and uses the parameter name from the URL to infer how to\n   * handle encoding and decoding parameter values:\n   *\n   * <pre>\n   * // Defines a custom type that gets a value from a service,\n   * // where each service gets different types of values from\n   * // a backend API:\n   * $urlMatcherFactoryProvider.type('dbObject', {}, function(Users, Posts) {\n   *\n   *   // Matches up services to URL parameter names\n   *   var services = {\n   *     user: Users,\n   *     post: Posts\n   *   };\n   *\n   *   return {\n   *     encode: function(object) {\n   *       // Represent the object in the URL using its unique ID\n   *       return object.id;\n   *     },\n   *     decode: function(value, key) {\n   *       // Look up the object by ID, using the parameter\n   *       // name (key) to call the correct service\n   *       return services[key].findById(value);\n   *     },\n   *     is: function(object, key) {\n   *       // Check that object is a valid dbObject\n   *       return angular.isObject(object) && object.id && services[key];\n   *     }\n   *     equals: function(a, b) {\n   *       // Check the equality of decoded objects by comparing\n   *       // their unique IDs\n   *       return a.id === b.id;\n   *     }\n   *   };\n   * });\n   *\n   * // In a config() block, you can then attach URLs with\n   * // type-annotated parameters:\n   * $stateProvider.state('users', {\n   *   url: \"/users\",\n   *   // ...\n   * }).state('users.item', {\n   *   url: \"/{user:dbObject}\",\n   *   controller: function($scope, $stateParams) {\n   *     // $stateParams.user will now be an object returned from\n   *     // the Users service\n   *   },\n   *   // ...\n   * });\n   * </pre>\n   */\n  this.type = function (name, definition, definitionFn) {\n    if (!isDefined(definition)) return $types[name];\n    if ($types.hasOwnProperty(name)) throw new Error(\"A type named '\" + name + \"' has already been defined.\");\n\n    $types[name] = new Type(extend({ name: name }, definition));\n    if (definitionFn) {\n      typeQueue.push({ name: name, def: definitionFn });\n      if (!enqueue) flushTypeQueue();\n    }\n    return this;\n  };\n\n  // `flushTypeQueue()` waits until `$urlMatcherFactory` is injected before invoking the queued `definitionFn`s\n  function flushTypeQueue() {\n    while(typeQueue.length) {\n      var type = typeQueue.shift();\n      if (type.pattern) throw new Error(\"You cannot override a type's .pattern at runtime.\");\n      angular.extend($types[type.name], injector.invoke(type.def));\n    }\n  }\n\n  // Register default types. Store them in the prototype of $types.\n  forEach(defaultTypes, function(type, name) { $types[name] = new Type(extend({name: name}, type)); });\n  $types = inherit($types, {});\n\n  /* No need to document $get, since it returns this */\n  this.$get = ['$injector', function ($injector) {\n    injector = $injector;\n    enqueue = false;\n    flushTypeQueue();\n\n    forEach(defaultTypes, function(type, name) {\n      if (!$types[name]) $types[name] = new Type(type);\n    });\n    return this;\n  }];\n\n  this.Param = function Param(id, type, config, location) {\n    var self = this;\n    config = unwrapShorthand(config);\n    type = getType(config, type, location);\n    var arrayMode = getArrayMode();\n    type = arrayMode ? type.$asArray(arrayMode, location === \"search\") : type;\n    if (type.name === \"string\" && !arrayMode && location === \"path\" && config.value === undefined)\n      config.value = \"\"; // for 0.2.x; in 0.3.0+ do not automatically default to \"\"\n    var isOptional = config.value !== undefined;\n    var squash = getSquashPolicy(config, isOptional);\n    var replace = getReplace(config, arrayMode, isOptional, squash);\n\n    function unwrapShorthand(config) {\n      var keys = isObject(config) ? objectKeys(config) : [];\n      var isShorthand = indexOf(keys, \"value\") === -1 && indexOf(keys, \"type\") === -1 &&\n                        indexOf(keys, \"squash\") === -1 && indexOf(keys, \"array\") === -1;\n      if (isShorthand) config = { value: config };\n      config.$$fn = isInjectable(config.value) ? config.value : function () { return config.value; };\n      return config;\n    }\n\n    function getType(config, urlType, location) {\n      if (config.type && urlType) throw new Error(\"Param '\"+id+\"' has two type configurations.\");\n      if (urlType) return urlType;\n      if (!config.type) return (location === \"config\" ? $types.any : $types.string);\n      return config.type instanceof Type ? config.type : new Type(config.type);\n    }\n\n    // array config: param name (param[]) overrides default settings.  explicit config overrides param name.\n    function getArrayMode() {\n      var arrayDefaults = { array: (location === \"search\" ? \"auto\" : false) };\n      var arrayParamNomenclature = id.match(/\\[\\]$/) ? { array: true } : {};\n      return extend(arrayDefaults, arrayParamNomenclature, config).array;\n    }\n\n    /**\n     * returns false, true, or the squash value to indicate the \"default parameter url squash policy\".\n     */\n    function getSquashPolicy(config, isOptional) {\n      var squash = config.squash;\n      if (!isOptional || squash === false) return false;\n      if (!isDefined(squash) || squash == null) return defaultSquashPolicy;\n      if (squash === true || isString(squash)) return squash;\n      throw new Error(\"Invalid squash policy: '\" + squash + \"'. Valid policies: false, true, or arbitrary string\");\n    }\n\n    function getReplace(config, arrayMode, isOptional, squash) {\n      var replace, configuredKeys, defaultPolicy = [\n        { from: \"\",   to: (isOptional || arrayMode ? undefined : \"\") },\n        { from: null, to: (isOptional || arrayMode ? undefined : \"\") }\n      ];\n      replace = isArray(config.replace) ? config.replace : [];\n      if (isString(squash))\n        replace.push({ from: squash, to: undefined });\n      configuredKeys = map(replace, function(item) { return item.from; } );\n      return filter(defaultPolicy, function(item) { return indexOf(configuredKeys, item.from) === -1; }).concat(replace);\n    }\n\n    /**\n     * [Internal] Get the default value of a parameter, which may be an injectable function.\n     */\n    function $$getDefaultValue() {\n      if (!injector) throw new Error(\"Injectable functions cannot be called at configuration time\");\n      var defaultValue = injector.invoke(config.$$fn);\n      if (defaultValue !== null && defaultValue !== undefined && !self.type.is(defaultValue))\n        throw new Error(\"Default value (\" + defaultValue + \") for parameter '\" + self.id + \"' is not an instance of Type (\" + self.type.name + \")\");\n      return defaultValue;\n    }\n\n    /**\n     * [Internal] Gets the decoded representation of a value if the value is defined, otherwise, returns the\n     * default value, which may be the result of an injectable function.\n     */\n    function $value(value) {\n      function hasReplaceVal(val) { return function(obj) { return obj.from === val; }; }\n      function $replace(value) {\n        var replacement = map(filter(self.replace, hasReplaceVal(value)), function(obj) { return obj.to; });\n        return replacement.length ? replacement[0] : value;\n      }\n      value = $replace(value);\n      return !isDefined(value) ? $$getDefaultValue() : self.type.$normalize(value);\n    }\n\n    function toString() { return \"{Param:\" + id + \" \" + type + \" squash: '\" + squash + \"' optional: \" + isOptional + \"}\"; }\n\n    extend(this, {\n      id: id,\n      type: type,\n      location: location,\n      array: arrayMode,\n      squash: squash,\n      replace: replace,\n      isOptional: isOptional,\n      value: $value,\n      dynamic: undefined,\n      config: config,\n      toString: toString\n    });\n  };\n\n  function ParamSet(params) {\n    extend(this, params || {});\n  }\n\n  ParamSet.prototype = {\n    $$new: function() {\n      return inherit(this, extend(new ParamSet(), { $$parent: this}));\n    },\n    $$keys: function () {\n      var keys = [], chain = [], parent = this,\n        ignore = objectKeys(ParamSet.prototype);\n      while (parent) { chain.push(parent); parent = parent.$$parent; }\n      chain.reverse();\n      forEach(chain, function(paramset) {\n        forEach(objectKeys(paramset), function(key) {\n            if (indexOf(keys, key) === -1 && indexOf(ignore, key) === -1) keys.push(key);\n        });\n      });\n      return keys;\n    },\n    $$values: function(paramValues) {\n      var values = {}, self = this;\n      forEach(self.$$keys(), function(key) {\n        values[key] = self[key].value(paramValues && paramValues[key]);\n      });\n      return values;\n    },\n    $$equals: function(paramValues1, paramValues2) {\n      var equal = true, self = this;\n      forEach(self.$$keys(), function(key) {\n        var left = paramValues1 && paramValues1[key], right = paramValues2 && paramValues2[key];\n        if (!self[key].type.equals(left, right)) equal = false;\n      });\n      return equal;\n    },\n    $$validates: function $$validate(paramValues) {\n      var keys = this.$$keys(), i, param, rawVal, normalized, encoded;\n      for (i = 0; i < keys.length; i++) {\n        param = this[keys[i]];\n        rawVal = paramValues[keys[i]];\n        if ((rawVal === undefined || rawVal === null) && param.isOptional)\n          break; // There was no parameter value, but the param is optional\n        normalized = param.type.$normalize(rawVal);\n        if (!param.type.is(normalized))\n          return false; // The value was not of the correct Type, and could not be decoded to the correct Type\n        encoded = param.type.encode(normalized);\n        if (angular.isString(encoded) && !param.type.pattern.exec(encoded))\n          return false; // The value was of the correct type, but when encoded, did not match the Type's regexp\n      }\n      return true;\n    },\n    $$parent: undefined\n  };\n\n  this.ParamSet = ParamSet;\n}\n\n// Register as a provider so it's available to other providers\nangular.module('ui.router.util').provider('$urlMatcherFactory', $UrlMatcherFactory);\nangular.module('ui.router.util').run(['$urlMatcherFactory', function($urlMatcherFactory) { }]);\n\n/**\n * @ngdoc object\n * @name ui.router.router.$urlRouterProvider\n *\n * @requires ui.router.util.$urlMatcherFactoryProvider\n * @requires $locationProvider\n *\n * @description\n * `$urlRouterProvider` has the responsibility of watching `$location`. \n * When `$location` changes it runs through a list of rules one by one until a \n * match is found. `$urlRouterProvider` is used behind the scenes anytime you specify \n * a url in a state configuration. All urls are compiled into a UrlMatcher object.\n *\n * There are several methods on `$urlRouterProvider` that make it useful to use directly\n * in your module config.\n */\n$UrlRouterProvider.$inject = ['$locationProvider', '$urlMatcherFactoryProvider'];\nfunction $UrlRouterProvider(   $locationProvider,   $urlMatcherFactory) {\n  var rules = [], otherwise = null, interceptDeferred = false, listener;\n\n  // Returns a string that is a prefix of all strings matching the RegExp\n  function regExpPrefix(re) {\n    var prefix = /^\\^((?:\\\\[^a-zA-Z0-9]|[^\\\\\\[\\]\\^$*+?.()|{}]+)*)/.exec(re.source);\n    return (prefix != null) ? prefix[1].replace(/\\\\(.)/g, \"$1\") : '';\n  }\n\n  // Interpolates matched values into a String.replace()-style pattern\n  function interpolate(pattern, match) {\n    return pattern.replace(/\\$(\\$|\\d{1,2})/, function (m, what) {\n      return match[what === '$' ? 0 : Number(what)];\n    });\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#rule\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Defines rules that are used by `$urlRouterProvider` to find matches for\n   * specific URLs.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // Here's an example of how you might allow case insensitive urls\n   *   $urlRouterProvider.rule(function ($injector, $location) {\n   *     var path = $location.path(),\n   *         normalized = path.toLowerCase();\n   *\n   *     if (path !== normalized) {\n   *       return normalized;\n   *     }\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {object} rule Handler function that takes `$injector` and `$location`\n   * services as arguments. You can use them to return a valid path as a string.\n   *\n   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance\n   */\n  this.rule = function (rule) {\n    if (!isFunction(rule)) throw new Error(\"'rule' must be a function\");\n    rules.push(rule);\n    return this;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.router.$urlRouterProvider#otherwise\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Defines a path that is used when an invalid route is requested.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   // if the path doesn't match any of the urls you configured\n   *   // otherwise will take care of routing the user to the\n   *   // specified url\n   *   $urlRouterProvider.otherwise('/index');\n   *\n   *   // Example of using function rule as param\n   *   $urlRouterProvider.otherwise(function ($injector, $location) {\n   *     return '/a/valid/url';\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {string|object} rule The url path you want to redirect to or a function \n   * rule that returns the url path. The function version is passed two params: \n   * `$injector` and `$location` services, and must return a url string.\n   *\n   * @return {object} `$urlRouterProvider` - `$urlRouterProvider` instance\n   */\n  this.otherwise = function (rule) {\n    if (isString(rule)) {\n      var redirect = rule;\n      rule = function () { return redirect; };\n    }\n    else if (!isFunction(rule)) throw new Error(\"'rule' must be a function\");\n    otherwise = rule;\n    return this;\n  };\n\n\n  function handleIfMatch($injector, handler, match) {\n    if (!match) return false;\n    var result = $injector.invoke(handler, handler, { $match: match });\n    return isDefined(result) ? result : true;\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#when\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Registers a handler for a given url matching. if handle is a string, it is\n   * treated as a redirect, and is interpolated according to the syntax of match\n   * (i.e. like `String.replace()` for `RegExp`, or like a `UrlMatcher` pattern otherwise).\n   *\n   * If the handler is a function, it is injectable. It gets invoked if `$location`\n   * matches. You have the option of inject the match object as `$match`.\n   *\n   * The handler can return\n   *\n   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`\n   *   will continue trying to find another one that matches.\n   * - **string** which is treated as a redirect and passed to `$location.url()`\n   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {\n   *     if ($state.$current.navigable !== state ||\n   *         !equalForKeys($match, $stateParams) {\n   *      $state.transitionTo(state, $match, false);\n   *     }\n   *   });\n   * });\n   * </pre>\n   *\n   * @param {string|object} what The incoming path that you want to redirect.\n   * @param {string|object} handler The path you want to redirect your user to.\n   */\n  this.when = function (what, handler) {\n    var redirect, handlerIsString = isString(handler);\n    if (isString(what)) what = $urlMatcherFactory.compile(what);\n\n    if (!handlerIsString && !isFunction(handler) && !isArray(handler))\n      throw new Error(\"invalid 'handler' in when()\");\n\n    var strategies = {\n      matcher: function (what, handler) {\n        if (handlerIsString) {\n          redirect = $urlMatcherFactory.compile(handler);\n          handler = ['$match', function ($match) { return redirect.format($match); }];\n        }\n        return extend(function ($injector, $location) {\n          return handleIfMatch($injector, handler, what.exec($location.path(), $location.search()));\n        }, {\n          prefix: isString(what.prefix) ? what.prefix : ''\n        });\n      },\n      regex: function (what, handler) {\n        if (what.global || what.sticky) throw new Error(\"when() RegExp must not be global or sticky\");\n\n        if (handlerIsString) {\n          redirect = handler;\n          handler = ['$match', function ($match) { return interpolate(redirect, $match); }];\n        }\n        return extend(function ($injector, $location) {\n          return handleIfMatch($injector, handler, what.exec($location.path()));\n        }, {\n          prefix: regExpPrefix(what)\n        });\n      }\n    };\n\n    var check = { matcher: $urlMatcherFactory.isMatcher(what), regex: what instanceof RegExp };\n\n    for (var n in check) {\n      if (check[n]) return this.rule(strategies[n](what, handler));\n    }\n\n    throw new Error(\"invalid 'what' in when()\");\n  };\n\n  /**\n   * @ngdoc function\n   * @name ui.router.router.$urlRouterProvider#deferIntercept\n   * @methodOf ui.router.router.$urlRouterProvider\n   *\n   * @description\n   * Disables (or enables) deferring location change interception.\n   *\n   * If you wish to customize the behavior of syncing the URL (for example, if you wish to\n   * defer a transition but maintain the current URL), call this method at configuration time.\n   * Then, at run time, call `$urlRouter.listen()` after you have configured your own\n   * `$locationChangeSuccess` event handler.\n   *\n   * @example\n   * <pre>\n   * var app = angular.module('app', ['ui.router.router']);\n   *\n   * app.config(function ($urlRouterProvider) {\n   *\n   *   // Prevent $urlRouter from automatically intercepting URL changes;\n   *   // this allows you to configure custom behavior in between\n   *   // location changes and route synchronization:\n   *   $urlRouterProvider.deferIntercept();\n   *\n   * }).run(function ($rootScope, $urlRouter, UserService) {\n   *\n   *   $rootScope.$on('$locationChangeSuccess', function(e) {\n   *     // UserService is an example service for managing user state\n   *     if (UserService.isLoggedIn()) return;\n   *\n   *     // Prevent $urlRouter's default handler from firing\n   *     e.preventDefault();\n   *\n   *     UserService.handleLogin().then(function() {\n   *       // Once the user has logged in, sync the current URL\n   *       // to the router:\n   *       $urlRouter.sync();\n   *     });\n   *   });\n   *\n   *   // Configures $urlRouter's listener *after* your custom listener\n   *   $urlRouter.listen();\n   * });\n   * </pre>\n   *\n   * @param {boolean} defer Indicates whether to defer location change interception. Passing\n            no parameter is equivalent to `true`.\n   */\n  this.deferIntercept = function (defer) {\n    if (defer === undefined) defer = true;\n    interceptDeferred = defer;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.router.$urlRouter\n   *\n   * @requires $location\n   * @requires $rootScope\n   * @requires $injector\n   * @requires $browser\n   *\n   * @description\n   *\n   */\n  this.$get = $get;\n  $get.$inject = ['$location', '$rootScope', '$injector', '$browser'];\n  function $get(   $location,   $rootScope,   $injector,   $browser) {\n\n    var baseHref = $browser.baseHref(), location = $location.url(), lastPushedUrl;\n\n    function appendBasePath(url, isHtml5, absolute) {\n      if (baseHref === '/') return url;\n      if (isHtml5) return baseHref.slice(0, -1) + url;\n      if (absolute) return baseHref.slice(1) + url;\n      return url;\n    }\n\n    // TODO: Optimize groups of rules with non-empty prefix into some sort of decision tree\n    function update(evt) {\n      if (evt && evt.defaultPrevented) return;\n      var ignoreUpdate = lastPushedUrl && $location.url() === lastPushedUrl;\n      lastPushedUrl = undefined;\n      // TODO: Re-implement this in 1.0 for https://github.com/angular-ui/ui-router/issues/1573\n      //if (ignoreUpdate) return true;\n\n      function check(rule) {\n        var handled = rule($injector, $location);\n\n        if (!handled) return false;\n        if (isString(handled)) $location.replace().url(handled);\n        return true;\n      }\n      var n = rules.length, i;\n\n      for (i = 0; i < n; i++) {\n        if (check(rules[i])) return;\n      }\n      // always check otherwise last to allow dynamic updates to the set of rules\n      if (otherwise) check(otherwise);\n    }\n\n    function listen() {\n      listener = listener || $rootScope.$on('$locationChangeSuccess', update);\n      return listener;\n    }\n\n    if (!interceptDeferred) listen();\n\n    return {\n      /**\n       * @ngdoc function\n       * @name ui.router.router.$urlRouter#sync\n       * @methodOf ui.router.router.$urlRouter\n       *\n       * @description\n       * Triggers an update; the same update that happens when the address bar url changes, aka `$locationChangeSuccess`.\n       * This method is useful when you need to use `preventDefault()` on the `$locationChangeSuccess` event,\n       * perform some custom logic (route protection, auth, config, redirection, etc) and then finally proceed\n       * with the transition by calling `$urlRouter.sync()`.\n       *\n       * @example\n       * <pre>\n       * angular.module('app', ['ui.router'])\n       *   .run(function($rootScope, $urlRouter) {\n       *     $rootScope.$on('$locationChangeSuccess', function(evt) {\n       *       // Halt state change from even starting\n       *       evt.preventDefault();\n       *       // Perform custom logic\n       *       var meetsRequirement = ...\n       *       // Continue with the update and state transition if logic allows\n       *       if (meetsRequirement) $urlRouter.sync();\n       *     });\n       * });\n       * </pre>\n       */\n      sync: function() {\n        update();\n      },\n\n      listen: function() {\n        return listen();\n      },\n\n      update: function(read) {\n        if (read) {\n          location = $location.url();\n          return;\n        }\n        if ($location.url() === location) return;\n\n        $location.url(location);\n        $location.replace();\n      },\n\n      push: function(urlMatcher, params, options) {\n         var url = urlMatcher.format(params || {});\n\n        // Handle the special hash param, if needed\n        if (url !== null && params && params['#']) {\n            url += '#' + params['#'];\n        }\n\n        $location.url(url);\n        lastPushedUrl = options && options.$$avoidResync ? $location.url() : undefined;\n        if (options && options.replace) $location.replace();\n      },\n\n      /**\n       * @ngdoc function\n       * @name ui.router.router.$urlRouter#href\n       * @methodOf ui.router.router.$urlRouter\n       *\n       * @description\n       * A URL generation method that returns the compiled URL for a given\n       * {@link ui.router.util.type:UrlMatcher `UrlMatcher`}, populated with the provided parameters.\n       *\n       * @example\n       * <pre>\n       * $bob = $urlRouter.href(new UrlMatcher(\"/about/:person\"), {\n       *   person: \"bob\"\n       * });\n       * // $bob == \"/about/bob\";\n       * </pre>\n       *\n       * @param {UrlMatcher} urlMatcher The `UrlMatcher` object which is used as the template of the URL to generate.\n       * @param {object=} params An object of parameter values to fill the matcher's required parameters.\n       * @param {object=} options Options object. The options are:\n       *\n       * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. \"http://www.example.com/fullurl\".\n       *\n       * @returns {string} Returns the fully compiled URL, or `null` if `params` fail validation against `urlMatcher`\n       */\n      href: function(urlMatcher, params, options) {\n        if (!urlMatcher.validates(params)) return null;\n\n        var isHtml5 = $locationProvider.html5Mode();\n        if (angular.isObject(isHtml5)) {\n          isHtml5 = isHtml5.enabled;\n        }\n        \n        var url = urlMatcher.format(params);\n        options = options || {};\n\n        if (!isHtml5 && url !== null) {\n          url = \"#\" + $locationProvider.hashPrefix() + url;\n        }\n\n        // Handle special hash param, if needed\n        if (url !== null && params && params['#']) {\n          url += '#' + params['#'];\n        }\n\n        url = appendBasePath(url, isHtml5, options.absolute);\n\n        if (!options.absolute || !url) {\n          return url;\n        }\n\n        var slash = (!isHtml5 && url ? '/' : ''), port = $location.port();\n        port = (port === 80 || port === 443 ? '' : ':' + port);\n\n        return [$location.protocol(), '://', $location.host(), port, slash, url].join('');\n      }\n    };\n  }\n}\n\nangular.module('ui.router.router').provider('$urlRouter', $UrlRouterProvider);\n\n/**\n * @ngdoc object\n * @name ui.router.state.$stateProvider\n *\n * @requires ui.router.router.$urlRouterProvider\n * @requires ui.router.util.$urlMatcherFactoryProvider\n *\n * @description\n * The new `$stateProvider` works similar to Angular's v1 router, but it focuses purely\n * on state.\n *\n * A state corresponds to a \"place\" in the application in terms of the overall UI and\n * navigation. A state describes (via the controller / template / view properties) what\n * the UI looks like and does at that place.\n *\n * States often have things in common, and the primary way of factoring out these\n * commonalities in this model is via the state hierarchy, i.e. parent/child states aka\n * nested states.\n *\n * The `$stateProvider` provides interfaces to declare these states for your app.\n */\n$StateProvider.$inject = ['$urlRouterProvider', '$urlMatcherFactoryProvider'];\nfunction $StateProvider(   $urlRouterProvider,   $urlMatcherFactory) {\n\n  var root, states = {}, $state, queue = {}, abstractKey = 'abstract';\n\n  // Builds state properties from definition passed to registerState()\n  var stateBuilder = {\n\n    // Derive parent state from a hierarchical name only if 'parent' is not explicitly defined.\n    // state.children = [];\n    // if (parent) parent.children.push(state);\n    parent: function(state) {\n      if (isDefined(state.parent) && state.parent) return findState(state.parent);\n      // regex matches any valid composite state name\n      // would match \"contact.list\" but not \"contacts\"\n      var compositeName = /^(.+)\\.[^.]+$/.exec(state.name);\n      return compositeName ? findState(compositeName[1]) : root;\n    },\n\n    // inherit 'data' from parent and override by own values (if any)\n    data: function(state) {\n      if (state.parent && state.parent.data) {\n        state.data = state.self.data = extend({}, state.parent.data, state.data);\n      }\n      return state.data;\n    },\n\n    // Build a URLMatcher if necessary, either via a relative or absolute URL\n    url: function(state) {\n      var url = state.url, config = { params: state.params || {} };\n\n      if (isString(url)) {\n        if (url.charAt(0) == '^') return $urlMatcherFactory.compile(url.substring(1), config);\n        return (state.parent.navigable || root).url.concat(url, config);\n      }\n\n      if (!url || $urlMatcherFactory.isMatcher(url)) return url;\n      throw new Error(\"Invalid url '\" + url + \"' in state '\" + state + \"'\");\n    },\n\n    // Keep track of the closest ancestor state that has a URL (i.e. is navigable)\n    navigable: function(state) {\n      return state.url ? state : (state.parent ? state.parent.navigable : null);\n    },\n\n    // Own parameters for this state. state.url.params is already built at this point. Create and add non-url params\n    ownParams: function(state) {\n      var params = state.url && state.url.params || new $$UMFP.ParamSet();\n      forEach(state.params || {}, function(config, id) {\n        if (!params[id]) params[id] = new $$UMFP.Param(id, null, config, \"config\");\n      });\n      return params;\n    },\n\n    // Derive parameters for this state and ensure they're a super-set of parent's parameters\n    params: function(state) {\n      return state.parent && state.parent.params ? extend(state.parent.params.$$new(), state.ownParams) : new $$UMFP.ParamSet();\n    },\n\n    // If there is no explicit multi-view configuration, make one up so we don't have\n    // to handle both cases in the view directive later. Note that having an explicit\n    // 'views' property will mean the default unnamed view properties are ignored. This\n    // is also a good time to resolve view names to absolute names, so everything is a\n    // straight lookup at link time.\n    views: function(state) {\n      var views = {};\n\n      forEach(isDefined(state.views) ? state.views : { '': state }, function (view, name) {\n        if (name.indexOf('@') < 0) name += '@' + state.parent.name;\n        views[name] = view;\n      });\n      return views;\n    },\n\n    // Keep a full path from the root down to this state as this is needed for state activation.\n    path: function(state) {\n      return state.parent ? state.parent.path.concat(state) : []; // exclude root from path\n    },\n\n    // Speed up $state.contains() as it's used a lot\n    includes: function(state) {\n      var includes = state.parent ? extend({}, state.parent.includes) : {};\n      includes[state.name] = true;\n      return includes;\n    },\n\n    $delegates: {}\n  };\n\n  function isRelative(stateName) {\n    return stateName.indexOf(\".\") === 0 || stateName.indexOf(\"^\") === 0;\n  }\n\n  function findState(stateOrName, base) {\n    if (!stateOrName) return undefined;\n\n    var isStr = isString(stateOrName),\n        name  = isStr ? stateOrName : stateOrName.name,\n        path  = isRelative(name);\n\n    if (path) {\n      if (!base) throw new Error(\"No reference point given for path '\"  + name + \"'\");\n      base = findState(base);\n      \n      var rel = name.split(\".\"), i = 0, pathLength = rel.length, current = base;\n\n      for (; i < pathLength; i++) {\n        if (rel[i] === \"\" && i === 0) {\n          current = base;\n          continue;\n        }\n        if (rel[i] === \"^\") {\n          if (!current.parent) throw new Error(\"Path '\" + name + \"' not valid for state '\" + base.name + \"'\");\n          current = current.parent;\n          continue;\n        }\n        break;\n      }\n      rel = rel.slice(i).join(\".\");\n      name = current.name + (current.name && rel ? \".\" : \"\") + rel;\n    }\n    var state = states[name];\n\n    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {\n      return state;\n    }\n    return undefined;\n  }\n\n  function queueState(parentName, state) {\n    if (!queue[parentName]) {\n      queue[parentName] = [];\n    }\n    queue[parentName].push(state);\n  }\n\n  function flushQueuedChildren(parentName) {\n    var queued = queue[parentName] || [];\n    while(queued.length) {\n      registerState(queued.shift());\n    }\n  }\n\n  function registerState(state) {\n    // Wrap a new object around the state so we can store our private details easily.\n    state = inherit(state, {\n      self: state,\n      resolve: state.resolve || {},\n      toString: function() { return this.name; }\n    });\n\n    var name = state.name;\n    if (!isString(name) || name.indexOf('@') >= 0) throw new Error(\"State must have a valid name\");\n    if (states.hasOwnProperty(name)) throw new Error(\"State '\" + name + \"'' is already defined\");\n\n    // Get parent name\n    var parentName = (name.indexOf('.') !== -1) ? name.substring(0, name.lastIndexOf('.'))\n        : (isString(state.parent)) ? state.parent\n        : (isObject(state.parent) && isString(state.parent.name)) ? state.parent.name\n        : '';\n\n    // If parent is not registered yet, add state to queue and register later\n    if (parentName && !states[parentName]) {\n      return queueState(parentName, state.self);\n    }\n\n    for (var key in stateBuilder) {\n      if (isFunction(stateBuilder[key])) state[key] = stateBuilder[key](state, stateBuilder.$delegates[key]);\n    }\n    states[name] = state;\n\n    // Register the state in the global state list and with $urlRouter if necessary.\n    if (!state[abstractKey] && state.url) {\n      $urlRouterProvider.when(state.url, ['$match', '$stateParams', function ($match, $stateParams) {\n        if ($state.$current.navigable != state || !equalForKeys($match, $stateParams)) {\n          $state.transitionTo(state, $match, { inherit: true, location: false });\n        }\n      }]);\n    }\n\n    // Register any queued children\n    flushQueuedChildren(name);\n\n    return state;\n  }\n\n  // Checks text to see if it looks like a glob.\n  function isGlob (text) {\n    return text.indexOf('*') > -1;\n  }\n\n  // Returns true if glob matches current $state name.\n  function doesStateMatchGlob (glob) {\n    var globSegments = glob.split('.'),\n        segments = $state.$current.name.split('.');\n\n    //match single stars\n    for (var i = 0, l = globSegments.length; i < l; i++) {\n      if (globSegments[i] === '*') {\n        segments[i] = '*';\n      }\n    }\n\n    //match greedy starts\n    if (globSegments[0] === '**') {\n       segments = segments.slice(indexOf(segments, globSegments[1]));\n       segments.unshift('**');\n    }\n    //match greedy ends\n    if (globSegments[globSegments.length - 1] === '**') {\n       segments.splice(indexOf(segments, globSegments[globSegments.length - 2]) + 1, Number.MAX_VALUE);\n       segments.push('**');\n    }\n\n    if (globSegments.length != segments.length) {\n      return false;\n    }\n\n    return segments.join('') === globSegments.join('');\n  }\n\n\n  // Implicit root state that is always active\n  root = registerState({\n    name: '',\n    url: '^',\n    views: null,\n    'abstract': true\n  });\n  root.navigable = null;\n\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$stateProvider#decorator\n   * @methodOf ui.router.state.$stateProvider\n   *\n   * @description\n   * Allows you to extend (carefully) or override (at your own peril) the \n   * `stateBuilder` object used internally by `$stateProvider`. This can be used \n   * to add custom functionality to ui-router, for example inferring templateUrl \n   * based on the state name.\n   *\n   * When passing only a name, it returns the current (original or decorated) builder\n   * function that matches `name`.\n   *\n   * The builder functions that can be decorated are listed below. Though not all\n   * necessarily have a good use case for decoration, that is up to you to decide.\n   *\n   * In addition, users can attach custom decorators, which will generate new \n   * properties within the state's internal definition. There is currently no clear \n   * use-case for this beyond accessing internal states (i.e. $state.$current), \n   * however, expect this to become increasingly relevant as we introduce additional \n   * meta-programming features.\n   *\n   * **Warning**: Decorators should not be interdependent because the order of \n   * execution of the builder functions in non-deterministic. Builder functions \n   * should only be dependent on the state definition object and super function.\n   *\n   *\n   * Existing builder functions and current return values:\n   *\n   * - **parent** `{object}` - returns the parent state object.\n   * - **data** `{object}` - returns state data, including any inherited data that is not\n   *   overridden by own values (if any).\n   * - **url** `{object}` - returns a {@link ui.router.util.type:UrlMatcher UrlMatcher}\n   *   or `null`.\n   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is \n   *   navigable).\n   * - **params** `{object}` - returns an array of state params that are ensured to \n   *   be a super-set of parent's params.\n   * - **views** `{object}` - returns a views object where each key is an absolute view \n   *   name (i.e. \"viewName@stateName\") and each value is the config object \n   *   (template, controller) for the view. Even when you don't use the views object \n   *   explicitly on a state config, one is still created for you internally.\n   *   So by decorating this builder function you have access to decorating template \n   *   and controller properties.\n   * - **ownParams** `{object}` - returns an array of params that belong to the state, \n   *   not including any params defined by ancestor states.\n   * - **path** `{string}` - returns the full path from the root down to this state. \n   *   Needed for state activation.\n   * - **includes** `{object}` - returns an object that includes every state that \n   *   would pass a `$state.includes()` test.\n   *\n   * @example\n   * <pre>\n   * // Override the internal 'views' builder with a function that takes the state\n   * // definition, and a reference to the internal function being overridden:\n   * $stateProvider.decorator('views', function (state, parent) {\n   *   var result = {},\n   *       views = parent(state);\n   *\n   *   angular.forEach(views, function (config, name) {\n   *     var autoName = (state.name + '.' + name).replace('.', '/');\n   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';\n   *     result[name] = config;\n   *   });\n   *   return result;\n   * });\n   *\n   * $stateProvider.state('home', {\n   *   views: {\n   *     'contact.list': { controller: 'ListController' },\n   *     'contact.item': { controller: 'ItemController' }\n   *   }\n   * });\n   *\n   * // ...\n   *\n   * $state.go('home');\n   * // Auto-populates list and item views with /partials/home/contact/list.html,\n   * // and /partials/home/contact/item.html, respectively.\n   * </pre>\n   *\n   * @param {string} name The name of the builder function to decorate. \n   * @param {object} func A function that is responsible for decorating the original \n   * builder function. The function receives two parameters:\n   *\n   *   - `{object}` - state - The state config object.\n   *   - `{object}` - super - The original builder function.\n   *\n   * @return {object} $stateProvider - $stateProvider instance\n   */\n  this.decorator = decorator;\n  function decorator(name, func) {\n    /*jshint validthis: true */\n    if (isString(name) && !isDefined(func)) {\n      return stateBuilder[name];\n    }\n    if (!isFunction(func) || !isString(name)) {\n      return this;\n    }\n    if (stateBuilder[name] && !stateBuilder.$delegates[name]) {\n      stateBuilder.$delegates[name] = stateBuilder[name];\n    }\n    stateBuilder[name] = func;\n    return this;\n  }\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$stateProvider#state\n   * @methodOf ui.router.state.$stateProvider\n   *\n   * @description\n   * Registers a state configuration under a given state name. The stateConfig object\n   * has the following acceptable properties.\n   *\n   * @param {string} name A unique state name, e.g. \"home\", \"about\", \"contacts\".\n   * To create a parent/child state use a dot, e.g. \"about.sales\", \"home.newest\".\n   * @param {object} stateConfig State configuration object.\n   * @param {string|function=} stateConfig.template\n   * <a id='template'></a>\n   *   html template as a string or a function that returns\n   *   an html template as a string which should be used by the uiView directives. This property \n   *   takes precedence over templateUrl.\n   *   \n   *   If `template` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by\n   *     applying the current state\n   *\n   * <pre>template:\n   *   \"<h1>inline template definition</h1>\" +\n   *   \"<div ui-view></div>\"</pre>\n   * <pre>template: function(params) {\n   *       return \"<h1>generated template</h1>\"; }</pre>\n   * </div>\n   *\n   * @param {string|function=} stateConfig.templateUrl\n   * <a id='templateUrl'></a>\n   *\n   *   path or function that returns a path to an html\n   *   template that should be used by uiView.\n   *   \n   *   If `templateUrl` is a function, it will be called with the following parameters:\n   *\n   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by \n   *     applying the current state\n   *\n   * <pre>templateUrl: \"home.html\"</pre>\n   * <pre>templateUrl: function(params) {\n   *     return myTemplates[params.pageId]; }</pre>\n   *\n   * @param {function=} stateConfig.templateProvider\n   * <a id='templateProvider'></a>\n   *    Provider function that returns HTML content string.\n   * <pre> templateProvider:\n   *       function(MyTemplateService, params) {\n   *         return MyTemplateService.getTemplate(params.pageId);\n   *       }</pre>\n   *\n   * @param {string|function=} stateConfig.controller\n   * <a id='controller'></a>\n   *\n   *  Controller fn that should be associated with newly\n   *   related scope or the name of a registered controller if passed as a string.\n   *   Optionally, the ControllerAs may be declared here.\n   * <pre>controller: \"MyRegisteredController\"</pre>\n   * <pre>controller:\n   *     \"MyRegisteredController as fooCtrl\"}</pre>\n   * <pre>controller: function($scope, MyService) {\n   *     $scope.data = MyService.getData(); }</pre>\n   *\n   * @param {function=} stateConfig.controllerProvider\n   * <a id='controllerProvider'></a>\n   *\n   * Injectable provider function that returns the actual controller or string.\n   * <pre>controllerProvider:\n   *   function(MyResolveData) {\n   *     if (MyResolveData.foo)\n   *       return \"FooCtrl\"\n   *     else if (MyResolveData.bar)\n   *       return \"BarCtrl\";\n   *     else return function($scope) {\n   *       $scope.baz = \"Qux\";\n   *     }\n   *   }</pre>\n   *\n   * @param {string=} stateConfig.controllerAs\n   * <a id='controllerAs'></a>\n   * \n   * A controller alias name. If present the controller will be\n   *   published to scope under the controllerAs name.\n   * <pre>controllerAs: \"myCtrl\"</pre>\n   *\n   * @param {string|object=} stateConfig.parent\n   * <a id='parent'></a>\n   * Optionally specifies the parent state of this state.\n   *\n   * <pre>parent: 'parentState'</pre>\n   * <pre>parent: parentState // JS variable</pre>\n   *\n   * @param {object=} stateConfig.resolve\n   * <a id='resolve'></a>\n   *\n   * An optional map&lt;string, function&gt; of dependencies which\n   *   should be injected into the controller. If any of these dependencies are promises, \n   *   the router will wait for them all to be resolved before the controller is instantiated.\n   *   If all the promises are resolved successfully, the $stateChangeSuccess event is fired\n   *   and the values of the resolved promises are injected into any controllers that reference them.\n   *   If any  of the promises are rejected the $stateChangeError event is fired.\n   *\n   *   The map object is:\n   *   \n   *   - key - {string}: name of dependency to be injected into controller\n   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function, \n   *     it is injected and return value it treated as dependency. If result is a promise, it is \n   *     resolved before its value is injected into controller.\n   *\n   * <pre>resolve: {\n   *     myResolve1:\n   *       function($http, $stateParams) {\n   *         return $http.get(\"/api/foos/\"+stateParams.fooID);\n   *       }\n   *     }</pre>\n   *\n   * @param {string=} stateConfig.url\n   * <a id='url'></a>\n   *\n   *   A url fragment with optional parameters. When a state is navigated or\n   *   transitioned to, the `$stateParams` service will be populated with any \n   *   parameters that were passed.\n   *\n   *   (See {@link ui.router.util.type:UrlMatcher UrlMatcher} `UrlMatcher`} for\n   *   more details on acceptable patterns )\n   *\n   * examples:\n   * <pre>url: \"/home\"\n   * url: \"/users/:userid\"\n   * url: \"/books/{bookid:[a-zA-Z_-]}\"\n   * url: \"/books/{categoryid:int}\"\n   * url: \"/books/{publishername:string}/{categoryid:int}\"\n   * url: \"/messages?before&after\"\n   * url: \"/messages?{before:date}&{after:date}\"\n   * url: \"/messages/:mailboxid?{before:date}&{after:date}\"\n   * </pre>\n   *\n   * @param {object=} stateConfig.views\n   * <a id='views'></a>\n   * an optional map&lt;string, object&gt; which defined multiple views, or targets views\n   * manually/explicitly.\n   *\n   * Examples:\n   *\n   * Targets three named `ui-view`s in the parent state's template\n   * <pre>views: {\n   *     header: {\n   *       controller: \"headerCtrl\",\n   *       templateUrl: \"header.html\"\n   *     }, body: {\n   *       controller: \"bodyCtrl\",\n   *       templateUrl: \"body.html\"\n   *     }, footer: {\n   *       controller: \"footCtrl\",\n   *       templateUrl: \"footer.html\"\n   *     }\n   *   }</pre>\n   *\n   * Targets named `ui-view=\"header\"` from grandparent state 'top''s template, and named `ui-view=\"body\" from parent state's template.\n   * <pre>views: {\n   *     'header@top': {\n   *       controller: \"msgHeaderCtrl\",\n   *       templateUrl: \"msgHeader.html\"\n   *     }, 'body': {\n   *       controller: \"messagesCtrl\",\n   *       templateUrl: \"messages.html\"\n   *     }\n   *   }</pre>\n   *\n   * @param {boolean=} [stateConfig.abstract=false]\n   * <a id='abstract'></a>\n   * An abstract state will never be directly activated,\n   *   but can provide inherited properties to its common children states.\n   * <pre>abstract: true</pre>\n   *\n   * @param {function=} stateConfig.onEnter\n   * <a id='onEnter'></a>\n   *\n   * Callback function for when a state is entered. Good way\n   *   to trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to explictly annotate this function,\n   * because it won't be automatically annotated by your build tools.\n   *\n   * <pre>onEnter: function(MyService, $stateParams) {\n   *     MyService.foo($stateParams.myParam);\n   * }</pre>\n   *\n   * @param {function=} stateConfig.onExit\n   * <a id='onExit'></a>\n   *\n   * Callback function for when a state is exited. Good way to\n   *   trigger an action or dispatch an event, such as opening a dialog.\n   * If minifying your scripts, make sure to explictly annotate this function,\n   * because it won't be automatically annotated by your build tools.\n   *\n   * <pre>onExit: function(MyService, $stateParams) {\n   *     MyService.cleanup($stateParams.myParam);\n   * }</pre>\n   *\n   * @param {boolean=} [stateConfig.reloadOnSearch=true]\n   * <a id='reloadOnSearch'></a>\n   *\n   * If `false`, will not retrigger the same state\n   *   just because a search/query parameter has changed (via $location.search() or $location.hash()). \n   *   Useful for when you'd like to modify $location.search() without triggering a reload.\n   * <pre>reloadOnSearch: false</pre>\n   *\n   * @param {object=} stateConfig.data\n   * <a id='data'></a>\n   *\n   * Arbitrary data object, useful for custom configuration.  The parent state's `data` is\n   *   prototypally inherited.  In other words, adding a data property to a state adds it to\n   *   the entire subtree via prototypal inheritance.\n   *\n   * <pre>data: {\n   *     requiredRole: 'foo'\n   * } </pre>\n   *\n   * @param {object=} stateConfig.params\n   * <a id='params'></a>\n   *\n   * A map which optionally configures parameters declared in the `url`, or\n   *   defines additional non-url parameters.  For each parameter being\n   *   configured, add a configuration object keyed to the name of the parameter.\n   *\n   *   Each parameter configuration object may contain the following properties:\n   *\n   *   - ** value ** - {object|function=}: specifies the default value for this\n   *     parameter.  This implicitly sets this parameter as optional.\n   *\n   *     When UI-Router routes to a state and no value is\n   *     specified for this parameter in the URL or transition, the\n   *     default value will be used instead.  If `value` is a function,\n   *     it will be injected and invoked, and the return value used.\n   *\n   *     *Note*: `undefined` is treated as \"no default value\" while `null`\n   *     is treated as \"the default value is `null`\".\n   *\n   *     *Shorthand*: If you only need to configure the default value of the\n   *     parameter, you may use a shorthand syntax.   In the **`params`**\n   *     map, instead mapping the param name to a full parameter configuration\n   *     object, simply set map it to the default parameter value, e.g.:\n   *\n   * <pre>// define a parameter's default value\n   * params: {\n   *     param1: { value: \"defaultValue\" }\n   * }\n   * // shorthand default values\n   * params: {\n   *     param1: \"defaultValue\",\n   *     param2: \"param2Default\"\n   * }</pre>\n   *\n   *   - ** array ** - {boolean=}: *(default: false)* If true, the param value will be\n   *     treated as an array of values.  If you specified a Type, the value will be\n   *     treated as an array of the specified Type.  Note: query parameter values\n   *     default to a special `\"auto\"` mode.\n   *\n   *     For query parameters in `\"auto\"` mode, if multiple  values for a single parameter\n   *     are present in the URL (e.g.: `/foo?bar=1&bar=2&bar=3`) then the values\n   *     are mapped to an array (e.g.: `{ foo: [ '1', '2', '3' ] }`).  However, if\n   *     only one value is present (e.g.: `/foo?bar=1`) then the value is treated as single\n   *     value (e.g.: `{ foo: '1' }`).\n   *\n   * <pre>params: {\n   *     param1: { array: true }\n   * }</pre>\n   *\n   *   - ** squash ** - {bool|string=}: `squash` configures how a default parameter value is represented in the URL when\n   *     the current parameter value is the same as the default value. If `squash` is not set, it uses the\n   *     configured default squash policy.\n   *     (See {@link ui.router.util.$urlMatcherFactory#methods_defaultSquashPolicy `defaultSquashPolicy()`})\n   *\n   *   There are three squash settings:\n   *\n   *     - false: The parameter's default value is not squashed.  It is encoded and included in the URL\n   *     - true: The parameter's default value is omitted from the URL.  If the parameter is preceeded and followed\n   *       by slashes in the state's `url` declaration, then one of those slashes are omitted.\n   *       This can allow for cleaner looking URLs.\n   *     - `\"<arbitrary string>\"`: The parameter's default value is replaced with an arbitrary placeholder of  your choice.\n   *\n   * <pre>params: {\n   *     param1: {\n   *       value: \"defaultId\",\n   *       squash: true\n   * } }\n   * // squash \"defaultValue\" to \"~\"\n   * params: {\n   *     param1: {\n   *       value: \"defaultValue\",\n   *       squash: \"~\"\n   * } }\n   * </pre>\n   *\n   *\n   * @example\n   * <pre>\n   * // Some state name examples\n   *\n   * // stateName can be a single top-level name (must be unique).\n   * $stateProvider.state(\"home\", {});\n   *\n   * // Or it can be a nested state name. This state is a child of the\n   * // above \"home\" state.\n   * $stateProvider.state(\"home.newest\", {});\n   *\n   * // Nest states as deeply as needed.\n   * $stateProvider.state(\"home.newest.abc.xyz.inception\", {});\n   *\n   * // state() returns $stateProvider, so you can chain state declarations.\n   * $stateProvider\n   *   .state(\"home\", {})\n   *   .state(\"about\", {})\n   *   .state(\"contacts\", {});\n   * </pre>\n   *\n   */\n  this.state = state;\n  function state(name, definition) {\n    /*jshint validthis: true */\n    if (isObject(name)) definition = name;\n    else definition.name = name;\n    registerState(definition);\n    return this;\n  }\n\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$state\n   *\n   * @requires $rootScope\n   * @requires $q\n   * @requires ui.router.state.$view\n   * @requires $injector\n   * @requires ui.router.util.$resolve\n   * @requires ui.router.state.$stateParams\n   * @requires ui.router.router.$urlRouter\n   *\n   * @property {object} params A param object, e.g. {sectionId: section.id)}, that \n   * you'd like to test against the current active state.\n   * @property {object} current A reference to the state's config object. However \n   * you passed it in. Useful for accessing custom data.\n   * @property {object} transition Currently pending transition. A promise that'll \n   * resolve or reject.\n   *\n   * @description\n   * `$state` service is responsible for representing states as well as transitioning\n   * between them. It also provides interfaces to ask for current state or even states\n   * you're coming from.\n   */\n  this.$get = $get;\n  $get.$inject = ['$rootScope', '$q', '$view', '$injector', '$resolve', '$stateParams', '$urlRouter', '$location', '$urlMatcherFactory'];\n  function $get(   $rootScope,   $q,   $view,   $injector,   $resolve,   $stateParams,   $urlRouter,   $location,   $urlMatcherFactory) {\n\n    var TransitionSuperseded = $q.reject(new Error('transition superseded'));\n    var TransitionPrevented = $q.reject(new Error('transition prevented'));\n    var TransitionAborted = $q.reject(new Error('transition aborted'));\n    var TransitionFailed = $q.reject(new Error('transition failed'));\n\n    // Handles the case where a state which is the target of a transition is not found, and the user\n    // can optionally retry or defer the transition\n    function handleRedirect(redirect, state, params, options) {\n      /**\n       * @ngdoc event\n       * @name ui.router.state.$state#$stateNotFound\n       * @eventOf ui.router.state.$state\n       * @eventType broadcast on root scope\n       * @description\n       * Fired when a requested state **cannot be found** using the provided state name during transition.\n       * The event is broadcast allowing any handlers a single chance to deal with the error (usually by\n       * lazy-loading the unfound state). A special `unfoundState` object is passed to the listener handler,\n       * you can see its three properties in the example. You can use `event.preventDefault()` to abort the\n       * transition and the promise returned from `go` will be rejected with a `'transition aborted'` value.\n       *\n       * @param {Object} event Event object.\n       * @param {Object} unfoundState Unfound State information. Contains: `to, toParams, options` properties.\n       * @param {State} fromState Current state object.\n       * @param {Object} fromParams Current state params.\n       *\n       * @example\n       *\n       * <pre>\n       * // somewhere, assume lazy.state has not been defined\n       * $state.go(\"lazy.state\", {a:1, b:2}, {inherit:false});\n       *\n       * // somewhere else\n       * $scope.$on('$stateNotFound',\n       * function(event, unfoundState, fromState, fromParams){\n       *     console.log(unfoundState.to); // \"lazy.state\"\n       *     console.log(unfoundState.toParams); // {a:1, b:2}\n       *     console.log(unfoundState.options); // {inherit:false} + default options\n       * })\n       * </pre>\n       */\n      var evt = $rootScope.$broadcast('$stateNotFound', redirect, state, params);\n\n      if (evt.defaultPrevented) {\n        $urlRouter.update();\n        return TransitionAborted;\n      }\n\n      if (!evt.retry) {\n        return null;\n      }\n\n      // Allow the handler to return a promise to defer state lookup retry\n      if (options.$retry) {\n        $urlRouter.update();\n        return TransitionFailed;\n      }\n      var retryTransition = $state.transition = $q.when(evt.retry);\n\n      retryTransition.then(function() {\n        if (retryTransition !== $state.transition) return TransitionSuperseded;\n        redirect.options.$retry = true;\n        return $state.transitionTo(redirect.to, redirect.toParams, redirect.options);\n      }, function() {\n        return TransitionAborted;\n      });\n      $urlRouter.update();\n\n      return retryTransition;\n    }\n\n    root.locals = { resolve: null, globals: { $stateParams: {} } };\n\n    $state = {\n      params: {},\n      current: root.self,\n      $current: root,\n      transition: null\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#reload\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A method that force reloads the current state. All resolves are re-resolved,\n     * controllers reinstantiated, and events re-fired.\n     *\n     * @example\n     * <pre>\n     * var app angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.reload = function(){\n     *     $state.reload();\n     *   }\n     * });\n     * </pre>\n     *\n     * `reload()` is just an alias for:\n     * <pre>\n     * $state.transitionTo($state.current, $stateParams, { \n     *   reload: true, inherit: false, notify: true\n     * });\n     * </pre>\n     *\n     * @param {string=|object=} state - A state name or a state object, which is the root of the resolves to be re-resolved.\n     * @example\n     * <pre>\n     * //assuming app application consists of 3 states: 'contacts', 'contacts.detail', 'contacts.detail.item' \n     * //and current state is 'contacts.detail.item'\n     * var app angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.reload = function(){\n     *     //will reload 'contact.detail' and 'contact.detail.item' states\n     *     $state.reload('contact.detail');\n     *   }\n     * });\n     * </pre>\n     *\n     * `reload()` is just an alias for:\n     * <pre>\n     * $state.transitionTo($state.current, $stateParams, { \n     *   reload: true, inherit: false, notify: true\n     * });\n     * </pre>\n\n     * @returns {promise} A promise representing the state of the new transition. See\n     * {@link ui.router.state.$state#methods_go $state.go}.\n     */\n    $state.reload = function reload(state) {\n      return $state.transitionTo($state.current, $stateParams, { reload: state || true, inherit: false, notify: true});\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#go\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Convenience method for transitioning to a new state. `$state.go` calls \n     * `$state.transitionTo` internally but automatically sets options to \n     * `{ location: true, inherit: true, relative: $state.$current, notify: true }`. \n     * This allows you to easily use an absolute or relative to path and specify \n     * only the parameters you'd like to update (while letting unspecified parameters \n     * inherit from the currently active ancestor states).\n     *\n     * @example\n     * <pre>\n     * var app = angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.changeState = function () {\n     *     $state.go('contact.detail');\n     *   };\n     * });\n     * </pre>\n     * <img src='../ngdoc_assets/StateGoExamples.png'/>\n     *\n     * @param {string} to Absolute state name or relative state path. Some examples:\n     *\n     * - `$state.go('contact.detail')` - will go to the `contact.detail` state\n     * - `$state.go('^')` - will go to a parent state\n     * - `$state.go('^.sibling')` - will go to a sibling state\n     * - `$state.go('.child.grandchild')` - will go to grandchild state\n     *\n     * @param {object=} params A map of the parameters that will be sent to the state, \n     * will populate $stateParams. Any parameters that are not specified will be inherited from currently \n     * defined parameters. This allows, for example, going to a sibling state that shares parameters\n     * specified in a parent state. Parameter inheritance only works between common ancestor states, I.e.\n     * transitioning to a sibling will get you the parameters for all parents, transitioning to a child\n     * will get you all current parameters, etc.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`\n     *    will not. If string, must be `\"replace\"`, which will update url and also replace last history record.\n     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.\n     * - **`reload`** (v0.2.5) - {boolean=false}, If `true` will force transition even if the state or params \n     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd\n     *    use this when you want to force a reload when *everything* is the same, including search params.\n     *\n     * @returns {promise} A promise representing the state of the new transition.\n     *\n     * Possible success values:\n     *\n     * - $state.current\n     *\n     * <br/>Possible rejection values:\n     *\n     * - 'transition superseded' - when a newer transition has been started after this one\n     * - 'transition prevented' - when `event.preventDefault()` has been called in a `$stateChangeStart` listener\n     * - 'transition aborted' - when `event.preventDefault()` has been called in a `$stateNotFound` listener or\n     *   when a `$stateNotFound` `event.retry` promise errors.\n     * - 'transition failed' - when a state has been unsuccessfully found after 2 tries.\n     * - *resolve error* - when an error has occurred with a `resolve`\n     *\n     */\n    $state.go = function go(to, params, options) {\n      return $state.transitionTo(to, params, extend({ inherit: true, relative: $state.$current }, options));\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#transitionTo\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Low-level method for transitioning to a new state. {@link ui.router.state.$state#methods_go $state.go}\n     * uses `transitionTo` internally. `$state.go` is recommended in most situations.\n     *\n     * @example\n     * <pre>\n     * var app = angular.module('app', ['ui.router']);\n     *\n     * app.controller('ctrl', function ($scope, $state) {\n     *   $scope.changeState = function () {\n     *     $state.transitionTo('contact.detail');\n     *   };\n     * });\n     * </pre>\n     *\n     * @param {string} to State name.\n     * @param {object=} toParams A map of the parameters that will be sent to the state,\n     * will populate $stateParams.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`\n     *    will not. If string, must be `\"replace\"`, which will update url and also replace last history record.\n     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.\n     * - **`reload`** (v0.2.5) - {boolean=false|string=|object=}, If `true` will force transition even if the state or params \n     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd\n     *    use this when you want to force a reload when *everything* is the same, including search params.\n     *    if String, then will reload the state with the name given in reload, and any children.\n     *    if Object, then a stateObj is expected, will reload the state found in stateObj, and any children.\n     *\n     * @returns {promise} A promise representing the state of the new transition. See\n     * {@link ui.router.state.$state#methods_go $state.go}.\n     */\n    $state.transitionTo = function transitionTo(to, toParams, options) {\n      toParams = toParams || {};\n      options = extend({\n        location: true, inherit: false, relative: null, notify: true, reload: false, $retry: false\n      }, options || {});\n\n      var from = $state.$current, fromParams = $state.params, fromPath = from.path;\n      var evt, toState = findState(to, options.relative);\n\n      // Store the hash param for later (since it will be stripped out by various methods)\n      var hash = toParams['#'];\n\n      if (!isDefined(toState)) {\n        var redirect = { to: to, toParams: toParams, options: options };\n        var redirectResult = handleRedirect(redirect, from.self, fromParams, options);\n\n        if (redirectResult) {\n          return redirectResult;\n        }\n\n        // Always retry once if the $stateNotFound was not prevented\n        // (handles either redirect changed or state lazy-definition)\n        to = redirect.to;\n        toParams = redirect.toParams;\n        options = redirect.options;\n        toState = findState(to, options.relative);\n\n        if (!isDefined(toState)) {\n          if (!options.relative) throw new Error(\"No such state '\" + to + \"'\");\n          throw new Error(\"Could not resolve '\" + to + \"' from state '\" + options.relative + \"'\");\n        }\n      }\n      if (toState[abstractKey]) throw new Error(\"Cannot transition to abstract state '\" + to + \"'\");\n      if (options.inherit) toParams = inheritParams($stateParams, toParams || {}, $state.$current, toState);\n      if (!toState.params.$$validates(toParams)) return TransitionFailed;\n\n      toParams = toState.params.$$values(toParams);\n      to = toState;\n\n      var toPath = to.path;\n\n      // Starting from the root of the path, keep all levels that haven't changed\n      var keep = 0, state = toPath[keep], locals = root.locals, toLocals = [];\n\n      if (!options.reload) {\n        while (state && state === fromPath[keep] && state.ownParams.$$equals(toParams, fromParams)) {\n          locals = toLocals[keep] = state.locals;\n          keep++;\n          state = toPath[keep];\n        }\n      } else if (isString(options.reload) || isObject(options.reload)) {\n        if (isObject(options.reload) && !options.reload.name) {\n          throw new Error('Invalid reload state object');\n        }\n        \n        var reloadState = options.reload === true ? fromPath[0] : findState(options.reload);\n        if (options.reload && !reloadState) {\n          throw new Error(\"No such reload state '\" + (isString(options.reload) ? options.reload : options.reload.name) + \"'\");\n        }\n\n        while (state && state === fromPath[keep] && state !== reloadState) {\n          locals = toLocals[keep] = state.locals;\n          keep++;\n          state = toPath[keep];\n        }\n      }\n\n      // If we're going to the same state and all locals are kept, we've got nothing to do.\n      // But clear 'transition', as we still want to cancel any other pending transitions.\n      // TODO: We may not want to bump 'transition' if we're called from a location change\n      // that we've initiated ourselves, because we might accidentally abort a legitimate\n      // transition initiated from code?\n      if (shouldSkipReload(to, toParams, from, fromParams, locals, options)) {\n        if (hash) toParams['#'] = hash;\n        $state.params = toParams;\n        copy($state.params, $stateParams);\n        if (options.location && to.navigable && to.navigable.url) {\n          $urlRouter.push(to.navigable.url, toParams, {\n            $$avoidResync: true, replace: options.location === 'replace'\n          });\n          $urlRouter.update(true);\n        }\n        $state.transition = null;\n        return $q.when($state.current);\n      }\n\n      // Filter parameters before we pass them to event handlers etc.\n      toParams = filterByKeys(to.params.$$keys(), toParams || {});\n\n      // Broadcast start event and cancel the transition if requested\n      if (options.notify) {\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeStart\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired when the state transition **begins**. You can use `event.preventDefault()`\n         * to prevent the transition from happening and then the transition promise will be\n         * rejected with a `'transition prevented'` value.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         *\n         * @example\n         *\n         * <pre>\n         * $rootScope.$on('$stateChangeStart',\n         * function(event, toState, toParams, fromState, fromParams){\n         *     event.preventDefault();\n         *     // transitionTo() promise will be rejected with\n         *     // a 'transition prevented' error\n         * })\n         * </pre>\n         */\n        if ($rootScope.$broadcast('$stateChangeStart', to.self, toParams, from.self, fromParams).defaultPrevented) {\n          $rootScope.$broadcast('$stateChangeCancel', to.self, toParams, from.self, fromParams);\n          $urlRouter.update();\n          return TransitionPrevented;\n        }\n      }\n\n      // Resolve locals for the remaining states, but don't update any global state just\n      // yet -- if anything fails to resolve the current state needs to remain untouched.\n      // We also set up an inheritance chain for the locals here. This allows the view directive\n      // to quickly look up the correct definition for each view in the current state. Even\n      // though we create the locals object itself outside resolveState(), it is initially\n      // empty and gets filled asynchronously. We need to keep track of the promise for the\n      // (fully resolved) current locals, and pass this down the chain.\n      var resolved = $q.when(locals);\n\n      for (var l = keep; l < toPath.length; l++, state = toPath[l]) {\n        locals = toLocals[l] = inherit(locals);\n        resolved = resolveState(state, toParams, state === to, resolved, locals, options);\n      }\n\n      // Once everything is resolved, we are ready to perform the actual transition\n      // and return a promise for the new state. We also keep track of what the\n      // current promise is, so that we can detect overlapping transitions and\n      // keep only the outcome of the last transition.\n      var transition = $state.transition = resolved.then(function () {\n        var l, entering, exiting;\n\n        if ($state.transition !== transition) return TransitionSuperseded;\n\n        // Exit 'from' states not kept\n        for (l = fromPath.length - 1; l >= keep; l--) {\n          exiting = fromPath[l];\n          if (exiting.self.onExit) {\n            $injector.invoke(exiting.self.onExit, exiting.self, exiting.locals.globals);\n          }\n          exiting.locals = null;\n        }\n\n        // Enter 'to' states not kept\n        for (l = keep; l < toPath.length; l++) {\n          entering = toPath[l];\n          entering.locals = toLocals[l];\n          if (entering.self.onEnter) {\n            $injector.invoke(entering.self.onEnter, entering.self, entering.locals.globals);\n          }\n        }\n\n        // Re-add the saved hash before we start returning things\n        if (hash) toParams['#'] = hash;\n\n        // Run it again, to catch any transitions in callbacks\n        if ($state.transition !== transition) return TransitionSuperseded;\n\n        // Update globals in $state\n        $state.$current = to;\n        $state.current = to.self;\n        $state.params = toParams;\n        copy($state.params, $stateParams);\n        $state.transition = null;\n\n        if (options.location && to.navigable) {\n          $urlRouter.push(to.navigable.url, to.navigable.locals.globals.$stateParams, {\n            $$avoidResync: true, replace: options.location === 'replace'\n          });\n        }\n\n        if (options.notify) {\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeSuccess\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired once the state transition is **complete**.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         */\n          $rootScope.$broadcast('$stateChangeSuccess', to.self, toParams, from.self, fromParams);\n        }\n        $urlRouter.update(true);\n\n        return $state.current;\n      }, function (error) {\n        if ($state.transition !== transition) return TransitionSuperseded;\n\n        $state.transition = null;\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$stateChangeError\n         * @eventOf ui.router.state.$state\n         * @eventType broadcast on root scope\n         * @description\n         * Fired when an **error occurs** during transition. It's important to note that if you\n         * have any errors in your resolve functions (javascript errors, non-existent services, etc)\n         * they will not throw traditionally. You must listen for this $stateChangeError event to\n         * catch **ALL** errors.\n         *\n         * @param {Object} event Event object.\n         * @param {State} toState The state being transitioned to.\n         * @param {Object} toParams The params supplied to the `toState`.\n         * @param {State} fromState The current state, pre-transition.\n         * @param {Object} fromParams The params supplied to the `fromState`.\n         * @param {Error} error The resolve error object.\n         */\n        evt = $rootScope.$broadcast('$stateChangeError', to.self, toParams, from.self, fromParams, error);\n\n        if (!evt.defaultPrevented) {\n            $urlRouter.update();\n        }\n\n        return $q.reject(error);\n      });\n\n      return transition;\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#is\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Similar to {@link ui.router.state.$state#methods_includes $state.includes},\n     * but only checks for the full state name. If params is supplied then it will be\n     * tested for strict equality against the current active params object, so all params\n     * must match with none missing and no extras.\n     *\n     * @example\n     * <pre>\n     * $state.$current.name = 'contacts.details.item';\n     *\n     * // absolute name\n     * $state.is('contact.details.item'); // returns true\n     * $state.is(contactDetailItemStateObject); // returns true\n     *\n     * // relative name (. and ^), typically from a template\n     * // E.g. from the 'contacts.details' template\n     * <div ng-class=\"{highlighted: $state.is('.item')}\">Item</div>\n     * </pre>\n     *\n     * @param {string|object} stateOrName The state name (absolute or relative) or state object you'd like to check.\n     * @param {object=} params A param object, e.g. `{sectionId: section.id}`, that you'd like\n     * to test against the current active state.\n     * @param {object=} options An options object.  The options are:\n     *\n     * - **`relative`** - {string|object} -  If `stateOrName` is a relative state name and `options.relative` is set, .is will\n     * test relative to `options.relative` state (or name).\n     *\n     * @returns {boolean} Returns true if it is the state.\n     */\n    $state.is = function is(stateOrName, params, options) {\n      options = extend({ relative: $state.$current }, options || {});\n      var state = findState(stateOrName, options.relative);\n\n      if (!isDefined(state)) { return undefined; }\n      if ($state.$current !== state) { return false; }\n      return params ? equalForKeys(state.params.$$values(params), $stateParams) : true;\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#includes\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A method to determine if the current active state is equal to or is the child of the\n     * state stateName. If any params are passed then they will be tested for a match as well.\n     * Not all the parameters need to be passed, just the ones you'd like to test for equality.\n     *\n     * @example\n     * Partial and relative names\n     * <pre>\n     * $state.$current.name = 'contacts.details.item';\n     *\n     * // Using partial names\n     * $state.includes(\"contacts\"); // returns true\n     * $state.includes(\"contacts.details\"); // returns true\n     * $state.includes(\"contacts.details.item\"); // returns true\n     * $state.includes(\"contacts.list\"); // returns false\n     * $state.includes(\"about\"); // returns false\n     *\n     * // Using relative names (. and ^), typically from a template\n     * // E.g. from the 'contacts.details' template\n     * <div ng-class=\"{highlighted: $state.includes('.item')}\">Item</div>\n     * </pre>\n     *\n     * Basic globbing patterns\n     * <pre>\n     * $state.$current.name = 'contacts.details.item.url';\n     *\n     * $state.includes(\"*.details.*.*\"); // returns true\n     * $state.includes(\"*.details.**\"); // returns true\n     * $state.includes(\"**.item.**\"); // returns true\n     * $state.includes(\"*.details.item.url\"); // returns true\n     * $state.includes(\"*.details.*.url\"); // returns true\n     * $state.includes(\"*.details.*\"); // returns false\n     * $state.includes(\"item.**\"); // returns false\n     * </pre>\n     *\n     * @param {string} stateOrName A partial name, relative name, or glob pattern\n     * to be searched for within the current state name.\n     * @param {object=} params A param object, e.g. `{sectionId: section.id}`,\n     * that you'd like to test against the current active state.\n     * @param {object=} options An options object.  The options are:\n     *\n     * - **`relative`** - {string|object=} -  If `stateOrName` is a relative state reference and `options.relative` is set,\n     * .includes will test relative to `options.relative` state (or name).\n     *\n     * @returns {boolean} Returns true if it does include the state\n     */\n    $state.includes = function includes(stateOrName, params, options) {\n      options = extend({ relative: $state.$current }, options || {});\n      if (isString(stateOrName) && isGlob(stateOrName)) {\n        if (!doesStateMatchGlob(stateOrName)) {\n          return false;\n        }\n        stateOrName = $state.$current.name;\n      }\n\n      var state = findState(stateOrName, options.relative);\n      if (!isDefined(state)) { return undefined; }\n      if (!isDefined($state.$current.includes[state.name])) { return false; }\n      return params ? equalForKeys(state.params.$$values(params), $stateParams, objectKeys(params)) : true;\n    };\n\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#href\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * A url generation method that returns the compiled url for the given state populated with the given params.\n     *\n     * @example\n     * <pre>\n     * expect($state.href(\"about.person\", { person: \"bob\" })).toEqual(\"/about/bob\");\n     * </pre>\n     *\n     * @param {string|object} stateOrName The state name or state object you'd like to generate a url from.\n     * @param {object=} params An object of parameter values to fill the state's required parameters.\n     * @param {object=} options Options object. The options are:\n     *\n     * - **`lossy`** - {boolean=true} -  If true, and if there is no url associated with the state provided in the\n     *    first parameter, then the constructed href url will be built from the first navigable ancestor (aka\n     *    ancestor with a valid url).\n     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.\n     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), \n     *    defines which state to be relative from.\n     * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. \"http://www.example.com/fullurl\".\n     * \n     * @returns {string} compiled state url\n     */\n    $state.href = function href(stateOrName, params, options) {\n      options = extend({\n        lossy:    true,\n        inherit:  true,\n        absolute: false,\n        relative: $state.$current\n      }, options || {});\n\n      var state = findState(stateOrName, options.relative);\n\n      if (!isDefined(state)) return null;\n      if (options.inherit) params = inheritParams($stateParams, params || {}, $state.$current, state);\n      \n      var nav = (state && options.lossy) ? state.navigable : state;\n\n      if (!nav || nav.url === undefined || nav.url === null) {\n        return null;\n      }\n      return $urlRouter.href(nav.url, filterByKeys(state.params.$$keys().concat('#'), params || {}), {\n        absolute: options.absolute\n      });\n    };\n\n    /**\n     * @ngdoc function\n     * @name ui.router.state.$state#get\n     * @methodOf ui.router.state.$state\n     *\n     * @description\n     * Returns the state configuration object for any specific state or all states.\n     *\n     * @param {string|object=} stateOrName (absolute or relative) If provided, will only get the config for\n     * the requested state. If not provided, returns an array of ALL state configs.\n     * @param {string|object=} context When stateOrName is a relative state reference, the state will be retrieved relative to context.\n     * @returns {Object|Array} State configuration object or array of all objects.\n     */\n    $state.get = function (stateOrName, context) {\n      if (arguments.length === 0) return map(objectKeys(states), function(name) { return states[name].self; });\n      var state = findState(stateOrName, context || $state.$current);\n      return (state && state.self) ? state.self : null;\n    };\n\n    function resolveState(state, params, paramsAreFiltered, inherited, dst, options) {\n      // Make a restricted $stateParams with only the parameters that apply to this state if\n      // necessary. In addition to being available to the controller and onEnter/onExit callbacks,\n      // we also need $stateParams to be available for any $injector calls we make during the\n      // dependency resolution process.\n      var $stateParams = (paramsAreFiltered) ? params : filterByKeys(state.params.$$keys(), params);\n      var locals = { $stateParams: $stateParams };\n\n      // Resolve 'global' dependencies for the state, i.e. those not specific to a view.\n      // We're also including $stateParams in this; that way the parameters are restricted\n      // to the set that should be visible to the state, and are independent of when we update\n      // the global $state and $stateParams values.\n      dst.resolve = $resolve.resolve(state.resolve, locals, dst.resolve, state);\n      var promises = [dst.resolve.then(function (globals) {\n        dst.globals = globals;\n      })];\n      if (inherited) promises.push(inherited);\n\n      function resolveViews() {\n        var viewsPromises = [];\n\n        // Resolve template and dependencies for all views.\n        forEach(state.views, function (view, name) {\n          var injectables = (view.resolve && view.resolve !== state.resolve ? view.resolve : {});\n          injectables.$template = [ function () {\n            return $view.load(name, { view: view, locals: dst.globals, params: $stateParams, notify: options.notify }) || '';\n          }];\n\n          viewsPromises.push($resolve.resolve(injectables, dst.globals, dst.resolve, state).then(function (result) {\n            // References to the controller (only instantiated at link time)\n            if (isFunction(view.controllerProvider) || isArray(view.controllerProvider)) {\n              var injectLocals = angular.extend({}, injectables, dst.globals);\n              result.$$controller = $injector.invoke(view.controllerProvider, null, injectLocals);\n            } else {\n              result.$$controller = view.controller;\n            }\n            // Provide access to the state itself for internal use\n            result.$$state = state;\n            result.$$controllerAs = view.controllerAs;\n            dst[name] = result;\n          }));\n        });\n\n        return $q.all(viewsPromises).then(function(){\n          return dst.globals;\n        });\n      }\n\n      // Wait for all the promises and then return the activation object\n      return $q.all(promises).then(resolveViews).then(function (values) {\n        return dst;\n      });\n    }\n\n    return $state;\n  }\n\n  function shouldSkipReload(to, toParams, from, fromParams, locals, options) {\n    // Return true if there are no differences in non-search (path/object) params, false if there are differences\n    function nonSearchParamsEqual(fromAndToState, fromParams, toParams) {\n      // Identify whether all the parameters that differ between `fromParams` and `toParams` were search params.\n      function notSearchParam(key) {\n        return fromAndToState.params[key].location != \"search\";\n      }\n      var nonQueryParamKeys = fromAndToState.params.$$keys().filter(notSearchParam);\n      var nonQueryParams = pick.apply({}, [fromAndToState.params].concat(nonQueryParamKeys));\n      var nonQueryParamSet = new $$UMFP.ParamSet(nonQueryParams);\n      return nonQueryParamSet.$$equals(fromParams, toParams);\n    }\n\n    // If reload was not explicitly requested\n    // and we're transitioning to the same state we're already in\n    // and    the locals didn't change\n    //     or they changed in a way that doesn't merit reloading\n    //        (reloadOnParams:false, or reloadOnSearch.false and only search params changed)\n    // Then return true.\n    if (!options.reload && to === from &&\n      (locals === from.locals || (to.self.reloadOnSearch === false && nonSearchParamsEqual(from, fromParams, toParams)))) {\n      return true;\n    }\n  }\n}\n\nangular.module('ui.router.state')\n  .value('$stateParams', {})\n  .provider('$state', $StateProvider);\n\n\n$ViewProvider.$inject = [];\nfunction $ViewProvider() {\n\n  this.$get = $get;\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$view\n   *\n   * @requires ui.router.util.$templateFactory\n   * @requires $rootScope\n   *\n   * @description\n   *\n   */\n  $get.$inject = ['$rootScope', '$templateFactory'];\n  function $get(   $rootScope,   $templateFactory) {\n    return {\n      // $view.load('full.viewName', { template: ..., controller: ..., resolve: ..., async: false, params: ... })\n      /**\n       * @ngdoc function\n       * @name ui.router.state.$view#load\n       * @methodOf ui.router.state.$view\n       *\n       * @description\n       *\n       * @param {string} name name\n       * @param {object} options option object.\n       */\n      load: function load(name, options) {\n        var result, defaults = {\n          template: null, controller: null, view: null, locals: null, notify: true, async: true, params: {}\n        };\n        options = extend(defaults, options);\n\n        if (options.view) {\n          result = $templateFactory.fromConfig(options.view, options.params, options.locals);\n        }\n        if (result && options.notify) {\n        /**\n         * @ngdoc event\n         * @name ui.router.state.$state#$viewContentLoading\n         * @eventOf ui.router.state.$view\n         * @eventType broadcast on root scope\n         * @description\n         *\n         * Fired once the view **begins loading**, *before* the DOM is rendered.\n         *\n         * @param {Object} event Event object.\n         * @param {Object} viewConfig The view config properties (template, controller, etc).\n         *\n         * @example\n         *\n         * <pre>\n         * $scope.$on('$viewContentLoading',\n         * function(event, viewConfig){\n         *     // Access to all the view config properties.\n         *     // and one special property 'targetView'\n         *     // viewConfig.targetView\n         * });\n         * </pre>\n         */\n          $rootScope.$broadcast('$viewContentLoading', options);\n        }\n        return result;\n      }\n    };\n  }\n}\n\nangular.module('ui.router.state').provider('$view', $ViewProvider);\n\n/**\n * @ngdoc object\n * @name ui.router.state.$uiViewScrollProvider\n *\n * @description\n * Provider that returns the {@link ui.router.state.$uiViewScroll} service function.\n */\nfunction $ViewScrollProvider() {\n\n  var useAnchorScroll = false;\n\n  /**\n   * @ngdoc function\n   * @name ui.router.state.$uiViewScrollProvider#useAnchorScroll\n   * @methodOf ui.router.state.$uiViewScrollProvider\n   *\n   * @description\n   * Reverts back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll) service for\n   * scrolling based on the url anchor.\n   */\n  this.useAnchorScroll = function () {\n    useAnchorScroll = true;\n  };\n\n  /**\n   * @ngdoc object\n   * @name ui.router.state.$uiViewScroll\n   *\n   * @requires $anchorScroll\n   * @requires $timeout\n   *\n   * @description\n   * When called with a jqLite element, it scrolls the element into view (after a\n   * `$timeout` so the DOM has time to refresh).\n   *\n   * If you prefer to rely on `$anchorScroll` to scroll the view to the anchor,\n   * this can be enabled by calling {@link ui.router.state.$uiViewScrollProvider#methods_useAnchorScroll `$uiViewScrollProvider.useAnchorScroll()`}.\n   */\n  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll, $timeout) {\n    if (useAnchorScroll) {\n      return $anchorScroll;\n    }\n\n    return function ($element) {\n      return $timeout(function () {\n        $element[0].scrollIntoView();\n      }, 0, false);\n    };\n  }];\n}\n\nangular.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-view\n *\n * @requires ui.router.state.$state\n * @requires $compile\n * @requires $controller\n * @requires $injector\n * @requires ui.router.state.$uiViewScroll\n * @requires $document\n *\n * @restrict ECA\n *\n * @description\n * The ui-view directive tells $state where to place your templates.\n *\n * @param {string=} name A view name. The name should be unique amongst the other views in the\n * same state. You can have views of the same name that live in different states.\n *\n * @param {string=} autoscroll It allows you to set the scroll behavior of the browser window\n * when a view is populated. By default, $anchorScroll is overridden by ui-router's custom scroll\n * service, {@link ui.router.state.$uiViewScroll}. This custom service let's you\n * scroll ui-view elements into view when they are populated during a state activation.\n *\n * *Note: To revert back to old [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)\n * functionality, call `$uiViewScrollProvider.useAnchorScroll()`.*\n *\n * @param {string=} onload Expression to evaluate whenever the view updates.\n * \n * @example\n * A view can be unnamed or named. \n * <pre>\n * <!-- Unnamed -->\n * <div ui-view></div> \n * \n * <!-- Named -->\n * <div ui-view=\"viewName\"></div>\n * </pre>\n *\n * You can only have one unnamed view within any template (or root html). If you are only using a \n * single view and it is unnamed then you can populate it like so:\n * <pre>\n * <div ui-view></div> \n * $stateProvider.state(\"home\", {\n *   template: \"<h1>HELLO!</h1>\"\n * })\n * </pre>\n * \n * The above is a convenient shortcut equivalent to specifying your view explicitly with the {@link ui.router.state.$stateProvider#views `views`}\n * config property, by name, in this case an empty name:\n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }    \n * })\n * </pre>\n * \n * But typically you'll only use the views property if you name your view or have more than one view \n * in the same template. There's not really a compelling reason to name a view if its the only one, \n * but you could if you wanted, like so:\n * <pre>\n * <div ui-view=\"main\"></div>\n * </pre> \n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"main\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     }\n *   }    \n * })\n * </pre>\n * \n * Really though, you'll use views to set up multiple views:\n * <pre>\n * <div ui-view></div>\n * <div ui-view=\"chart\"></div> \n * <div ui-view=\"data\"></div> \n * </pre>\n * \n * <pre>\n * $stateProvider.state(\"home\", {\n *   views: {\n *     \"\": {\n *       template: \"<h1>HELLO!</h1>\"\n *     },\n *     \"chart\": {\n *       template: \"<chart_thing/>\"\n *     },\n *     \"data\": {\n *       template: \"<data_thing/>\"\n *     }\n *   }    \n * })\n * </pre>\n *\n * Examples for `autoscroll`:\n *\n * <pre>\n * <!-- If autoscroll present with no expression,\n *      then scroll ui-view into view -->\n * <ui-view autoscroll/>\n *\n * <!-- If autoscroll present with valid expression,\n *      then scroll ui-view into view if expression evaluates to true -->\n * <ui-view autoscroll='true'/>\n * <ui-view autoscroll='false'/>\n * <ui-view autoscroll='scopeVariable'/>\n * </pre>\n */\n$ViewDirective.$inject = ['$state', '$injector', '$uiViewScroll', '$interpolate'];\nfunction $ViewDirective(   $state,   $injector,   $uiViewScroll,   $interpolate) {\n\n  function getService() {\n    return ($injector.has) ? function(service) {\n      return $injector.has(service) ? $injector.get(service) : null;\n    } : function(service) {\n      try {\n        return $injector.get(service);\n      } catch (e) {\n        return null;\n      }\n    };\n  }\n\n  var service = getService(),\n      $animator = service('$animator'),\n      $animate = service('$animate');\n\n  // Returns a set of DOM manipulation functions based on which Angular version\n  // it should use\n  function getRenderer(attrs, scope) {\n    var statics = function() {\n      return {\n        enter: function (element, target, cb) { target.after(element); cb(); },\n        leave: function (element, cb) { element.remove(); cb(); }\n      };\n    };\n\n    if ($animate) {\n      return {\n        enter: function(element, target, cb) {\n          var promise = $animate.enter(element, null, target, cb);\n          if (promise && promise.then) promise.then(cb);\n        },\n        leave: function(element, cb) {\n          var promise = $animate.leave(element, cb);\n          if (promise && promise.then) promise.then(cb);\n        }\n      };\n    }\n\n    if ($animator) {\n      var animate = $animator && $animator(scope, attrs);\n\n      return {\n        enter: function(element, target, cb) {animate.enter(element, null, target); cb(); },\n        leave: function(element, cb) { animate.leave(element); cb(); }\n      };\n    }\n\n    return statics();\n  }\n\n  var directive = {\n    restrict: 'ECA',\n    terminal: true,\n    priority: 400,\n    transclude: 'element',\n    compile: function (tElement, tAttrs, $transclude) {\n      return function (scope, $element, attrs) {\n        var previousEl, currentEl, currentScope, latestLocals,\n            onloadExp     = attrs.onload || '',\n            autoScrollExp = attrs.autoscroll,\n            renderer      = getRenderer(attrs, scope);\n\n        scope.$on('$stateChangeSuccess', function() {\n          updateView(false);\n        });\n        scope.$on('$viewContentLoading', function() {\n          updateView(false);\n        });\n\n        updateView(true);\n\n        function cleanupLastView() {\n          if (previousEl) {\n            previousEl.remove();\n            previousEl = null;\n          }\n\n          if (currentScope) {\n            currentScope.$destroy();\n            currentScope = null;\n          }\n\n          if (currentEl) {\n            renderer.leave(currentEl, function() {\n              previousEl = null;\n            });\n\n            previousEl = currentEl;\n            currentEl = null;\n          }\n        }\n\n        function updateView(firstTime) {\n          var newScope,\n              name            = getUiViewName(scope, attrs, $element, $interpolate),\n              previousLocals  = name && $state.$current && $state.$current.locals[name];\n\n          if (!firstTime && previousLocals === latestLocals) return; // nothing to do\n          newScope = scope.$new();\n          latestLocals = $state.$current.locals[name];\n\n          var clone = $transclude(newScope, function(clone) {\n            renderer.enter(clone, $element, function onUiViewEnter() {\n              if(currentScope) {\n                currentScope.$emit('$viewContentAnimationEnded');\n              }\n\n              if (angular.isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {\n                $uiViewScroll(clone);\n              }\n            });\n            cleanupLastView();\n          });\n\n          currentEl = clone;\n          currentScope = newScope;\n          /**\n           * @ngdoc event\n           * @name ui.router.state.directive:ui-view#$viewContentLoaded\n           * @eventOf ui.router.state.directive:ui-view\n           * @eventType emits on ui-view directive scope\n           * @description           *\n           * Fired once the view is **loaded**, *after* the DOM is rendered.\n           *\n           * @param {Object} event Event object.\n           */\n          currentScope.$emit('$viewContentLoaded');\n          currentScope.$eval(onloadExp);\n        }\n      };\n    }\n  };\n\n  return directive;\n}\n\n$ViewDirectiveFill.$inject = ['$compile', '$controller', '$state', '$interpolate'];\nfunction $ViewDirectiveFill (  $compile,   $controller,   $state,   $interpolate) {\n  return {\n    restrict: 'ECA',\n    priority: -400,\n    compile: function (tElement) {\n      var initial = tElement.html();\n      return function (scope, $element, attrs) {\n        var current = $state.$current,\n            name = getUiViewName(scope, attrs, $element, $interpolate),\n            locals  = current && current.locals[name];\n\n        if (! locals) {\n          return;\n        }\n\n        $element.data('$uiView', { name: name, state: locals.$$state });\n        $element.html(locals.$template ? locals.$template : initial);\n\n        var link = $compile($element.contents());\n\n        if (locals.$$controller) {\n          locals.$scope = scope;\n          locals.$element = $element;\n          var controller = $controller(locals.$$controller, locals);\n          if (locals.$$controllerAs) {\n            scope[locals.$$controllerAs] = controller;\n          }\n          $element.data('$ngControllerController', controller);\n          $element.children().data('$ngControllerController', controller);\n        }\n\n        link(scope);\n      };\n    }\n  };\n}\n\n/**\n * Shared ui-view code for both directives:\n * Given scope, element, and its attributes, return the view's name\n */\nfunction getUiViewName(scope, attrs, element, $interpolate) {\n  var name = $interpolate(attrs.uiView || attrs.name || '')(scope);\n  var inherited = element.inheritedData('$uiView');\n  return name.indexOf('@') >= 0 ?  name :  (name + '@' + (inherited ? inherited.state.name : ''));\n}\n\nangular.module('ui.router.state').directive('uiView', $ViewDirective);\nangular.module('ui.router.state').directive('uiView', $ViewDirectiveFill);\n\nfunction parseStateRef(ref, current) {\n  var preparsed = ref.match(/^\\s*({[^}]*})\\s*$/), parsed;\n  if (preparsed) ref = current + '(' + preparsed[1] + ')';\n  parsed = ref.replace(/\\n/g, \" \").match(/^([^(]+?)\\s*(\\((.*)\\))?$/);\n  if (!parsed || parsed.length !== 4) throw new Error(\"Invalid state ref '\" + ref + \"'\");\n  return { state: parsed[1], paramExpr: parsed[3] || null };\n}\n\nfunction stateContext(el) {\n  var stateData = el.parent().inheritedData('$uiView');\n\n  if (stateData && stateData.state && stateData.state.name) {\n    return stateData.state;\n  }\n}\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref\n *\n * @requires ui.router.state.$state\n * @requires $timeout\n *\n * @restrict A\n *\n * @description\n * A directive that binds a link (`<a>` tag) to a state. If the state has an associated \n * URL, the directive will automatically generate & update the `href` attribute via \n * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking \n * the link will trigger a state transition with optional parameters. \n *\n * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be \n * handled natively by the browser.\n *\n * You can also use relative state paths within ui-sref, just like the relative \n * paths passed to `$state.go()`. You just need to be aware that the path is relative\n * to the state that the link lives in, in other words the state that loaded the \n * template containing the link.\n *\n * You can specify options to pass to {@link ui.router.state.$state#go $state.go()}\n * using the `ui-sref-opts` attribute. Options are restricted to `location`, `inherit`,\n * and `reload`.\n *\n * @example\n * Here's an example of how you'd use ui-sref and how it would compile. If you have the \n * following template:\n * <pre>\n * <a ui-sref=\"home\">Home</a> | <a ui-sref=\"about\">About</a> | <a ui-sref=\"{page: 2}\">Next page</a>\n * \n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a ui-sref=\"contacts.detail({ id: contact.id })\">{{ contact.name }}</a>\n *     </li>\n * </ul>\n * </pre>\n * \n * Then the compiled html would be (assuming Html5Mode is off and current state is contacts):\n * <pre>\n * <a href=\"#/home\" ui-sref=\"home\">Home</a> | <a href=\"#/about\" ui-sref=\"about\">About</a> | <a href=\"#/contacts?page=2\" ui-sref=\"{page: 2}\">Next page</a>\n * \n * <ul>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/1\" ui-sref=\"contacts.detail({ id: contact.id })\">Joe</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/2\" ui-sref=\"contacts.detail({ id: contact.id })\">Alice</a>\n *     </li>\n *     <li ng-repeat=\"contact in contacts\">\n *         <a href=\"#/contacts/3\" ui-sref=\"contacts.detail({ id: contact.id })\">Bob</a>\n *     </li>\n * </ul>\n *\n * <a ui-sref=\"home\" ui-sref-opts=\"{reload: true}\">Home</a>\n * </pre>\n *\n * @param {string} ui-sref 'stateName' can be any valid absolute or relative state\n * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#go $state.go()}\n */\n$StateRefDirective.$inject = ['$state', '$timeout'];\nfunction $StateRefDirective($state, $timeout) {\n  var allowedOptions = ['location', 'inherit', 'reload', 'absolute'];\n\n  return {\n    restrict: 'A',\n    require: ['?^uiSrefActive', '?^uiSrefActiveEq'],\n    link: function(scope, element, attrs, uiSrefActive) {\n      var ref = parseStateRef(attrs.uiSref, $state.current.name);\n      var params = null, url = null, base = stateContext(element) || $state.$current;\n      // SVGAElement does not use the href attribute, but rather the 'xlinkHref' attribute.\n      var hrefKind = Object.prototype.toString.call(element.prop('href')) === '[object SVGAnimatedString]' ?\n                 'xlink:href' : 'href';\n      var newHref = null, isAnchor = element.prop(\"tagName\").toUpperCase() === \"A\";\n      var isForm = element[0].nodeName === \"FORM\";\n      var attr = isForm ? \"action\" : hrefKind, nav = true;\n\n      var options = { relative: base, inherit: true };\n      var optionsOverride = scope.$eval(attrs.uiSrefOpts) || {};\n\n      angular.forEach(allowedOptions, function(option) {\n        if (option in optionsOverride) {\n          options[option] = optionsOverride[option];\n        }\n      });\n\n      var update = function(newVal) {\n        if (newVal) params = angular.copy(newVal);\n        if (!nav) return;\n\n        newHref = $state.href(ref.state, params, options);\n\n        var activeDirective = uiSrefActive[1] || uiSrefActive[0];\n        if (activeDirective) {\n          activeDirective.$$addStateInfo(ref.state, params);\n        }\n        if (newHref === null) {\n          nav = false;\n          return false;\n        }\n        attrs.$set(attr, newHref);\n      };\n\n      if (ref.paramExpr) {\n        scope.$watch(ref.paramExpr, function(newVal, oldVal) {\n          if (newVal !== params) update(newVal);\n        }, true);\n        params = angular.copy(scope.$eval(ref.paramExpr));\n      }\n      update();\n\n      if (isForm) return;\n\n      element.bind(\"click\", function(e) {\n        var button = e.which || e.button;\n        if ( !(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || element.attr('target')) ) {\n          // HACK: This is to allow ng-clicks to be processed before the transition is initiated:\n          var transition = $timeout(function() {\n            $state.go(ref.state, params, options);\n          });\n          e.preventDefault();\n\n          // if the state has no URL, ignore one preventDefault from the <a> directive.\n          var ignorePreventDefaultCount = isAnchor && !newHref ? 1: 0;\n          e.preventDefault = function() {\n            if (ignorePreventDefaultCount-- <= 0)\n              $timeout.cancel(transition);\n          };\n        }\n      });\n    }\n  };\n}\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref-active\n *\n * @requires ui.router.state.$state\n * @requires ui.router.state.$stateParams\n * @requires $interpolate\n *\n * @restrict A\n *\n * @description\n * A directive working alongside ui-sref to add classes to an element when the\n * related ui-sref directive's state is active, and removing them when it is inactive.\n * The primary use-case is to simplify the special appearance of navigation menus\n * relying on `ui-sref`, by having the \"active\" state's menu button appear different,\n * distinguishing it from the inactive menu items.\n *\n * ui-sref-active can live on the same element as ui-sref or on a parent element. The first\n * ui-sref-active found at the same level or above the ui-sref will be used.\n *\n * Will activate when the ui-sref's target state or any child state is active. If you\n * need to activate only when the ui-sref target state is active and *not* any of\n * it's children, then you will use\n * {@link ui.router.state.directive:ui-sref-active-eq ui-sref-active-eq}\n *\n * @example\n * Given the following template:\n * <pre>\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item\">\n *     <a href ui-sref=\"app.user({user: 'bilbobaggins'})\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * </pre>\n *\n *\n * When the app state is \"app.user\" (or any children states), and contains the state parameter \"user\" with value \"bilbobaggins\",\n * the resulting HTML will appear as (note the 'active' class):\n * <pre>\n * <ul>\n *   <li ui-sref-active=\"active\" class=\"item active\">\n *     <a ui-sref=\"app.user({user: 'bilbobaggins'})\" href=\"/users/bilbobaggins\">@bilbobaggins</a>\n *   </li>\n * </ul>\n * </pre>\n *\n * The class name is interpolated **once** during the directives link time (any further changes to the\n * interpolated value are ignored).\n *\n * Multiple classes may be specified in a space-separated format:\n * <pre>\n * <ul>\n *   <li ui-sref-active='class1 class2 class3'>\n *     <a ui-sref=\"app.user\">link</a>\n *   </li>\n * </ul>\n * </pre>\n */\n\n/**\n * @ngdoc directive\n * @name ui.router.state.directive:ui-sref-active-eq\n *\n * @requires ui.router.state.$state\n * @requires ui.router.state.$stateParams\n * @requires $interpolate\n *\n * @restrict A\n *\n * @description\n * The same as {@link ui.router.state.directive:ui-sref-active ui-sref-active} but will only activate\n * when the exact target state used in the `ui-sref` is active; no child states.\n *\n */\n$StateRefActiveDirective.$inject = ['$state', '$stateParams', '$interpolate'];\nfunction $StateRefActiveDirective($state, $stateParams, $interpolate) {\n  return  {\n    restrict: \"A\",\n    controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {\n      var states = [], activeClass;\n\n      // There probably isn't much point in $observing this\n      // uiSrefActive and uiSrefActiveEq share the same directive object with some\n      // slight difference in logic routing\n      activeClass = $interpolate($attrs.uiSrefActiveEq || $attrs.uiSrefActive || '', false)($scope);\n\n      // Allow uiSref to communicate with uiSrefActive[Equals]\n      this.$$addStateInfo = function (newState, newParams) {\n        var state = $state.get(newState, stateContext($element));\n\n        states.push({\n          state: state || { name: newState },\n          params: newParams\n        });\n\n        update();\n      };\n\n      $scope.$on('$stateChangeSuccess', update);\n\n      // Update route state\n      function update() {\n        if (anyMatch()) {\n          $element.addClass(activeClass);\n        } else {\n          $element.removeClass(activeClass);\n        }\n      }\n\n      function anyMatch() {\n        for (var i = 0; i < states.length; i++) {\n          if (isMatch(states[i].state, states[i].params)) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      function isMatch(state, params) {\n        if (typeof $attrs.uiSrefActiveEq !== 'undefined') {\n          return $state.is(state.name, params);\n        } else {\n          return $state.includes(state.name, params);\n        }\n      }\n    }]\n  };\n}\n\nangular.module('ui.router.state')\n  .directive('uiSref', $StateRefDirective)\n  .directive('uiSrefActive', $StateRefActiveDirective)\n  .directive('uiSrefActiveEq', $StateRefActiveDirective);\n\n/**\n * @ngdoc filter\n * @name ui.router.state.filter:isState\n *\n * @requires ui.router.state.$state\n *\n * @description\n * Translates to {@link ui.router.state.$state#methods_is $state.is(\"stateName\")}.\n */\n$IsStateFilter.$inject = ['$state'];\nfunction $IsStateFilter($state) {\n  var isFilter = function (state) {\n    return $state.is(state);\n  };\n  isFilter.$stateful = true;\n  return isFilter;\n}\n\n/**\n * @ngdoc filter\n * @name ui.router.state.filter:includedByState\n *\n * @requires ui.router.state.$state\n *\n * @description\n * Translates to {@link ui.router.state.$state#methods_includes $state.includes('fullOrPartialStateName')}.\n */\n$IncludedByStateFilter.$inject = ['$state'];\nfunction $IncludedByStateFilter($state) {\n  var includesFilter = function (state) {\n    return $state.includes(state);\n  };\n  includesFilter.$stateful = true;\n  return  includesFilter;\n}\n\nangular.module('ui.router.state')\n  .filter('isState', $IsStateFilter)\n  .filter('includedByState', $IncludedByStateFilter);\n})(window, window.angular);","/**\n * @license AngularJS v1.4.3\n * (c) 2010-2015 Google, Inc. http://angularjs.org\n * License: MIT\n */\n(function(window, angular, undefined) {'use strict';\n\nvar $resourceMinErr = angular.$$minErr('$resource');\n\n// Helper functions and regex to lookup a dotted path on an object\n// stopping at undefined/null.  The path must be composed of ASCII\n// identifiers (just like $parse)\nvar MEMBER_NAME_REGEX = /^(\\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;\n\nfunction isValidDottedPath(path) {\n  return (path != null && path !== '' && path !== 'hasOwnProperty' &&\n      MEMBER_NAME_REGEX.test('.' + path));\n}\n\nfunction lookupDottedPath(obj, path) {\n  if (!isValidDottedPath(path)) {\n    throw $resourceMinErr('badmember', 'Dotted member path \"@{0}\" is invalid.', path);\n  }\n  var keys = path.split('.');\n  for (var i = 0, ii = keys.length; i < ii && obj !== undefined; i++) {\n    var key = keys[i];\n    obj = (obj !== null) ? obj[key] : undefined;\n  }\n  return obj;\n}\n\n/**\n * Create a shallow copy of an object and clear other fields from the destination\n */\nfunction shallowClearAndCopy(src, dst) {\n  dst = dst || {};\n\n  angular.forEach(dst, function(value, key) {\n    delete dst[key];\n  });\n\n  for (var key in src) {\n    if (src.hasOwnProperty(key) && !(key.charAt(0) === '$' && key.charAt(1) === '$')) {\n      dst[key] = src[key];\n    }\n  }\n\n  return dst;\n}\n\n/**\n * @ngdoc module\n * @name ngResource\n * @description\n *\n * # ngResource\n *\n * The `ngResource` module provides interaction support with RESTful services\n * via the $resource service.\n *\n *\n * <div doc-module-components=\"ngResource\"></div>\n *\n * See {@link ngResource.$resource `$resource`} for usage.\n */\n\n/**\n * @ngdoc service\n * @name $resource\n * @requires $http\n *\n * @description\n * A factory which creates a resource object that lets you interact with\n * [RESTful](http://en.wikipedia.org/wiki/Representational_State_Transfer) server-side data sources.\n *\n * The returned resource object has action methods which provide high-level behaviors without\n * the need to interact with the low level {@link ng.$http $http} service.\n *\n * Requires the {@link ngResource `ngResource`} module to be installed.\n *\n * By default, trailing slashes will be stripped from the calculated URLs,\n * which can pose problems with server backends that do not expect that\n * behavior.  This can be disabled by configuring the `$resourceProvider` like\n * this:\n *\n * ```js\n     app.config(['$resourceProvider', function($resourceProvider) {\n       // Don't strip trailing slashes from calculated URLs\n       $resourceProvider.defaults.stripTrailingSlashes = false;\n     }]);\n * ```\n *\n * @param {string} url A parameterized URL template with parameters prefixed by `:` as in\n *   `/user/:username`. If you are using a URL with a port number (e.g.\n *   `http://example.com:8080/api`), it will be respected.\n *\n *   If you are using a url with a suffix, just add the suffix, like this:\n *   `$resource('http://example.com/resource.json')` or `$resource('http://example.com/:id.json')`\n *   or even `$resource('http://example.com/resource/:resource_id.:format')`\n *   If the parameter before the suffix is empty, :resource_id in this case, then the `/.` will be\n *   collapsed down to a single `.`.  If you need this sequence to appear and not collapse then you\n *   can escape it with `/\\.`.\n *\n * @param {Object=} paramDefaults Default values for `url` parameters. These can be overridden in\n *   `actions` methods. If any of the parameter value is a function, it will be executed every time\n *   when a param value needs to be obtained for a request (unless the param was overridden).\n *\n *   Each key value in the parameter object is first bound to url template if present and then any\n *   excess keys are appended to the url search query after the `?`.\n *\n *   Given a template `/path/:verb` and parameter `{verb:'greet', salutation:'Hello'}` results in\n *   URL `/path/greet?salutation=Hello`.\n *\n *   If the parameter value is prefixed with `@` then the value for that parameter will be extracted\n *   from the corresponding property on the `data` object (provided when calling an action method).  For\n *   example, if the `defaultParam` object is `{someParam: '@someProp'}` then the value of `someParam`\n *   will be `data.someProp`.\n *\n * @param {Object.<Object>=} actions Hash with declaration of custom actions that should extend\n *   the default set of resource actions. The declaration should be created in the format of {@link\n *   ng.$http#usage $http.config}:\n *\n *       {action1: {method:?, params:?, isArray:?, headers:?, ...},\n *        action2: {method:?, params:?, isArray:?, headers:?, ...},\n *        ...}\n *\n *   Where:\n *\n *   - **`action`** – {string} – The name of action. This name becomes the name of the method on\n *     your resource object.\n *   - **`method`** – {string} – Case insensitive HTTP method (e.g. `GET`, `POST`, `PUT`,\n *     `DELETE`, `JSONP`, etc).\n *   - **`params`** – {Object=} – Optional set of pre-bound parameters for this action. If any of\n *     the parameter value is a function, it will be executed every time when a param value needs to\n *     be obtained for a request (unless the param was overridden).\n *   - **`url`** – {string} – action specific `url` override. The url templating is supported just\n *     like for the resource-level urls.\n *   - **`isArray`** – {boolean=} – If true then the returned object for this action is an array,\n *     see `returns` section.\n *   - **`transformRequest`** –\n *     `{function(data, headersGetter)|Array.<function(data, headersGetter)>}` –\n *     transform function or an array of such functions. The transform function takes the http\n *     request body and headers and returns its transformed (typically serialized) version.\n *     By default, transformRequest will contain one function that checks if the request data is\n *     an object and serializes to using `angular.toJson`. To prevent this behavior, set\n *     `transformRequest` to an empty array: `transformRequest: []`\n *   - **`transformResponse`** –\n *     `{function(data, headersGetter)|Array.<function(data, headersGetter)>}` –\n *     transform function or an array of such functions. The transform function takes the http\n *     response body and headers and returns its transformed (typically deserialized) version.\n *     By default, transformResponse will contain one function that checks if the response looks like\n *     a JSON string and deserializes it using `angular.fromJson`. To prevent this behavior, set\n *     `transformResponse` to an empty array: `transformResponse: []`\n *   - **`cache`** – `{boolean|Cache}` – If true, a default $http cache will be used to cache the\n *     GET request, otherwise if a cache instance built with\n *     {@link ng.$cacheFactory $cacheFactory}, this cache will be used for\n *     caching.\n *   - **`timeout`** – `{number|Promise}` – timeout in milliseconds, or {@link ng.$q promise} that\n *     should abort the request when resolved.\n *   - **`withCredentials`** - `{boolean}` - whether to set the `withCredentials` flag on the\n *     XHR object. See\n *     [requests with credentials](https://developer.mozilla.org/en/http_access_control#section_5)\n *     for more information.\n *   - **`responseType`** - `{string}` - see\n *     [requestType](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType).\n *   - **`interceptor`** - `{Object=}` - The interceptor object has two optional methods -\n *     `response` and `responseError`. Both `response` and `responseError` interceptors get called\n *     with `http response` object. See {@link ng.$http $http interceptors}.\n *\n * @param {Object} options Hash with custom settings that should extend the\n *   default `$resourceProvider` behavior.  The only supported option is\n *\n *   Where:\n *\n *   - **`stripTrailingSlashes`** – {boolean} – If true then the trailing\n *   slashes from any calculated URL will be stripped. (Defaults to true.)\n *\n * @returns {Object} A resource \"class\" object with methods for the default set of resource actions\n *   optionally extended with custom `actions`. The default set contains these actions:\n *   ```js\n *   { 'get':    {method:'GET'},\n *     'save':   {method:'POST'},\n *     'query':  {method:'GET', isArray:true},\n *     'remove': {method:'DELETE'},\n *     'delete': {method:'DELETE'} };\n *   ```\n *\n *   Calling these methods invoke an {@link ng.$http} with the specified http method,\n *   destination and parameters. When the data is returned from the server then the object is an\n *   instance of the resource class. The actions `save`, `remove` and `delete` are available on it\n *   as  methods with the `$` prefix. This allows you to easily perform CRUD operations (create,\n *   read, update, delete) on server-side data like this:\n *   ```js\n *   var User = $resource('/user/:userId', {userId:'@id'});\n *   var user = User.get({userId:123}, function() {\n *     user.abc = true;\n *     user.$save();\n *   });\n *   ```\n *\n *   It is important to realize that invoking a $resource object method immediately returns an\n *   empty reference (object or array depending on `isArray`). Once the data is returned from the\n *   server the existing reference is populated with the actual data. This is a useful trick since\n *   usually the resource is assigned to a model which is then rendered by the view. Having an empty\n *   object results in no rendering, once the data arrives from the server then the object is\n *   populated with the data and the view automatically re-renders itself showing the new data. This\n *   means that in most cases one never has to write a callback function for the action methods.\n *\n *   The action methods on the class object or instance object can be invoked with the following\n *   parameters:\n *\n *   - HTTP GET \"class\" actions: `Resource.action([parameters], [success], [error])`\n *   - non-GET \"class\" actions: `Resource.action([parameters], postData, [success], [error])`\n *   - non-GET instance actions:  `instance.$action([parameters], [success], [error])`\n *\n *\n *   Success callback is called with (value, responseHeaders) arguments, where the value is\n *   the populated resource instance or collection object. The error callback is called\n *   with (httpResponse) argument.\n *\n *   Class actions return empty instance (with additional properties below).\n *   Instance actions return promise of the action.\n *\n *   The Resource instances and collection have these additional properties:\n *\n *   - `$promise`: the {@link ng.$q promise} of the original server interaction that created this\n *     instance or collection.\n *\n *     On success, the promise is resolved with the same resource instance or collection object,\n *     updated with data from server. This makes it easy to use in\n *     {@link ngRoute.$routeProvider resolve section of $routeProvider.when()} to defer view\n *     rendering until the resource(s) are loaded.\n *\n *     On failure, the promise is resolved with the {@link ng.$http http response} object, without\n *     the `resource` property.\n *\n *     If an interceptor object was provided, the promise will instead be resolved with the value\n *     returned by the interceptor.\n *\n *   - `$resolved`: `true` after first server interaction is completed (either with success or\n *      rejection), `false` before that. Knowing if the Resource has been resolved is useful in\n *      data-binding.\n *\n * @example\n *\n * # Credit card resource\n *\n * ```js\n     // Define CreditCard class\n     var CreditCard = $resource('/user/:userId/card/:cardId',\n      {userId:123, cardId:'@id'}, {\n       charge: {method:'POST', params:{charge:true}}\n      });\n\n     // We can retrieve a collection from the server\n     var cards = CreditCard.query(function() {\n       // GET: /user/123/card\n       // server returns: [ {id:456, number:'1234', name:'Smith'} ];\n\n       var card = cards[0];\n       // each item is an instance of CreditCard\n       expect(card instanceof CreditCard).toEqual(true);\n       card.name = \"J. Smith\";\n       // non GET methods are mapped onto the instances\n       card.$save();\n       // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'}\n       // server returns: {id:456, number:'1234', name: 'J. Smith'};\n\n       // our custom method is mapped as well.\n       card.$charge({amount:9.99});\n       // POST: /user/123/card/456?amount=9.99&charge=true {id:456, number:'1234', name:'J. Smith'}\n     });\n\n     // we can create an instance as well\n     var newCard = new CreditCard({number:'0123'});\n     newCard.name = \"Mike Smith\";\n     newCard.$save();\n     // POST: /user/123/card {number:'0123', name:'Mike Smith'}\n     // server returns: {id:789, number:'0123', name: 'Mike Smith'};\n     expect(newCard.id).toEqual(789);\n * ```\n *\n * The object returned from this function execution is a resource \"class\" which has \"static\" method\n * for each action in the definition.\n *\n * Calling these methods invoke `$http` on the `url` template with the given `method`, `params` and\n * `headers`.\n * When the data is returned from the server then the object is an instance of the resource type and\n * all of the non-GET methods are available with `$` prefix. This allows you to easily support CRUD\n * operations (create, read, update, delete) on server-side data.\n\n   ```js\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123}, function(user) {\n       user.abc = true;\n       user.$save();\n     });\n   ```\n *\n * It's worth noting that the success callback for `get`, `query` and other methods gets passed\n * in the response that came from the server as well as $http header getter function, so one\n * could rewrite the above example and get access to http headers as:\n *\n   ```js\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123}, function(u, getResponseHeaders){\n       u.abc = true;\n       u.$save(function(u, putResponseHeaders) {\n         //u => saved user object\n         //putResponseHeaders => $http header getter\n       });\n     });\n   ```\n *\n * You can also access the raw `$http` promise via the `$promise` property on the object returned\n *\n   ```\n     var User = $resource('/user/:userId', {userId:'@id'});\n     User.get({userId:123})\n         .$promise.then(function(user) {\n           $scope.user = user;\n         });\n   ```\n\n * # Creating a custom 'PUT' request\n * In this example we create a custom method on our resource to make a PUT request\n * ```js\n *    var app = angular.module('app', ['ngResource', 'ngRoute']);\n *\n *    // Some APIs expect a PUT request in the format URL/object/ID\n *    // Here we are creating an 'update' method\n *    app.factory('Notes', ['$resource', function($resource) {\n *    return $resource('/notes/:id', null,\n *        {\n *            'update': { method:'PUT' }\n *        });\n *    }]);\n *\n *    // In our controller we get the ID from the URL using ngRoute and $routeParams\n *    // We pass in $routeParams and our Notes factory along with $scope\n *    app.controller('NotesCtrl', ['$scope', '$routeParams', 'Notes',\n                                      function($scope, $routeParams, Notes) {\n *    // First get a note object from the factory\n *    var note = Notes.get({ id:$routeParams.id });\n *    $id = note.id;\n *\n *    // Now call update passing in the ID first then the object you are updating\n *    Notes.update({ id:$id }, note);\n *\n *    // This will PUT /notes/ID with the note object in the request payload\n *    }]);\n * ```\n */\nangular.module('ngResource', ['ng']).\n  provider('$resource', function() {\n    var provider = this;\n\n    this.defaults = {\n      // Strip slashes by default\n      stripTrailingSlashes: true,\n\n      // Default actions configuration\n      actions: {\n        'get': {method: 'GET'},\n        'save': {method: 'POST'},\n        'query': {method: 'GET', isArray: true},\n        'remove': {method: 'DELETE'},\n        'delete': {method: 'DELETE'}\n      }\n    };\n\n    this.$get = ['$http', '$q', function($http, $q) {\n\n      var noop = angular.noop,\n        forEach = angular.forEach,\n        extend = angular.extend,\n        copy = angular.copy,\n        isFunction = angular.isFunction;\n\n      /**\n       * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n       * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set\n       * (pchar) allowed in path segments:\n       *    segment       = *pchar\n       *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n       *    pct-encoded   = \"%\" HEXDIG HEXDIG\n       *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n       *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n       *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n       */\n      function encodeUriSegment(val) {\n        return encodeUriQuery(val, true).\n          replace(/%26/gi, '&').\n          replace(/%3D/gi, '=').\n          replace(/%2B/gi, '+');\n      }\n\n\n      /**\n       * This method is intended for encoding *key* or *value* parts of query component. We need a\n       * custom method because encodeURIComponent is too aggressive and encodes stuff that doesn't\n       * have to be encoded per http://tools.ietf.org/html/rfc3986:\n       *    query       = *( pchar / \"/\" / \"?\" )\n       *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n       *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n       *    pct-encoded   = \"%\" HEXDIG HEXDIG\n       *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n       *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n       */\n      function encodeUriQuery(val, pctEncodeSpaces) {\n        return encodeURIComponent(val).\n          replace(/%40/gi, '@').\n          replace(/%3A/gi, ':').\n          replace(/%24/g, '$').\n          replace(/%2C/gi, ',').\n          replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n      }\n\n      function Route(template, defaults) {\n        this.template = template;\n        this.defaults = extend({}, provider.defaults, defaults);\n        this.urlParams = {};\n      }\n\n      Route.prototype = {\n        setUrlParams: function(config, params, actionUrl) {\n          var self = this,\n            url = actionUrl || self.template,\n            val,\n            encodedVal;\n\n          var urlParams = self.urlParams = {};\n          forEach(url.split(/\\W/), function(param) {\n            if (param === 'hasOwnProperty') {\n              throw $resourceMinErr('badname', \"hasOwnProperty is not a valid parameter name.\");\n            }\n            if (!(new RegExp(\"^\\\\d+$\").test(param)) && param &&\n              (new RegExp(\"(^|[^\\\\\\\\]):\" + param + \"(\\\\W|$)\").test(url))) {\n              urlParams[param] = true;\n            }\n          });\n          url = url.replace(/\\\\:/g, ':');\n\n          params = params || {};\n          forEach(self.urlParams, function(_, urlParam) {\n            val = params.hasOwnProperty(urlParam) ? params[urlParam] : self.defaults[urlParam];\n            if (angular.isDefined(val) && val !== null) {\n              encodedVal = encodeUriSegment(val);\n              url = url.replace(new RegExp(\":\" + urlParam + \"(\\\\W|$)\", \"g\"), function(match, p1) {\n                return encodedVal + p1;\n              });\n            } else {\n              url = url.replace(new RegExp(\"(\\/?):\" + urlParam + \"(\\\\W|$)\", \"g\"), function(match,\n                  leadingSlashes, tail) {\n                if (tail.charAt(0) == '/') {\n                  return tail;\n                } else {\n                  return leadingSlashes + tail;\n                }\n              });\n            }\n          });\n\n          // strip trailing slashes and set the url (unless this behavior is specifically disabled)\n          if (self.defaults.stripTrailingSlashes) {\n            url = url.replace(/\\/+$/, '') || '/';\n          }\n\n          // then replace collapse `/.` if found in the last URL path segment before the query\n          // E.g. `http://url.com/id./format?q=x` becomes `http://url.com/id.format?q=x`\n          url = url.replace(/\\/\\.(?=\\w+($|\\?))/, '.');\n          // replace escaped `/\\.` with `/.`\n          config.url = url.replace(/\\/\\\\\\./, '/.');\n\n\n          // set params - delegate param encoding to $http\n          forEach(params, function(value, key) {\n            if (!self.urlParams[key]) {\n              config.params = config.params || {};\n              config.params[key] = value;\n            }\n          });\n        }\n      };\n\n\n      function resourceFactory(url, paramDefaults, actions, options) {\n        var route = new Route(url, options);\n\n        actions = extend({}, provider.defaults.actions, actions);\n\n        function extractParams(data, actionParams) {\n          var ids = {};\n          actionParams = extend({}, paramDefaults, actionParams);\n          forEach(actionParams, function(value, key) {\n            if (isFunction(value)) { value = value(); }\n            ids[key] = value && value.charAt && value.charAt(0) == '@' ?\n              lookupDottedPath(data, value.substr(1)) : value;\n          });\n          return ids;\n        }\n\n        function defaultResponseInterceptor(response) {\n          return response.resource;\n        }\n\n        function Resource(value) {\n          shallowClearAndCopy(value || {}, this);\n        }\n\n        Resource.prototype.toJSON = function() {\n          var data = extend({}, this);\n          delete data.$promise;\n          delete data.$resolved;\n          return data;\n        };\n\n        forEach(actions, function(action, name) {\n          var hasBody = /^(POST|PUT|PATCH)$/i.test(action.method);\n\n          Resource[name] = function(a1, a2, a3, a4) {\n            var params = {}, data, success, error;\n\n            /* jshint -W086 */ /* (purposefully fall through case statements) */\n            switch (arguments.length) {\n              case 4:\n                error = a4;\n                success = a3;\n              //fallthrough\n              case 3:\n              case 2:\n                if (isFunction(a2)) {\n                  if (isFunction(a1)) {\n                    success = a1;\n                    error = a2;\n                    break;\n                  }\n\n                  success = a2;\n                  error = a3;\n                  //fallthrough\n                } else {\n                  params = a1;\n                  data = a2;\n                  success = a3;\n                  break;\n                }\n              case 1:\n                if (isFunction(a1)) success = a1;\n                else if (hasBody) data = a1;\n                else params = a1;\n                break;\n              case 0: break;\n              default:\n                throw $resourceMinErr('badargs',\n                  \"Expected up to 4 arguments [params, data, success, error], got {0} arguments\",\n                  arguments.length);\n            }\n            /* jshint +W086 */ /* (purposefully fall through case statements) */\n\n            var isInstanceCall = this instanceof Resource;\n            var value = isInstanceCall ? data : (action.isArray ? [] : new Resource(data));\n            var httpConfig = {};\n            var responseInterceptor = action.interceptor && action.interceptor.response ||\n              defaultResponseInterceptor;\n            var responseErrorInterceptor = action.interceptor && action.interceptor.responseError ||\n              undefined;\n\n            forEach(action, function(value, key) {\n              if (key != 'params' && key != 'isArray' && key != 'interceptor') {\n                httpConfig[key] = copy(value);\n              }\n            });\n\n            if (hasBody) httpConfig.data = data;\n            route.setUrlParams(httpConfig,\n              extend({}, extractParams(data, action.params || {}), params),\n              action.url);\n\n            var promise = $http(httpConfig).then(function(response) {\n              var data = response.data,\n                promise = value.$promise;\n\n              if (data) {\n                // Need to convert action.isArray to boolean in case it is undefined\n                // jshint -W018\n                if (angular.isArray(data) !== (!!action.isArray)) {\n                  throw $resourceMinErr('badcfg',\n                      'Error in resource configuration for action `{0}`. Expected response to ' +\n                      'contain an {1} but got an {2} (Request: {3} {4})', name, action.isArray ? 'array' : 'object',\n                    angular.isArray(data) ? 'array' : 'object', httpConfig.method, httpConfig.url);\n                }\n                // jshint +W018\n                if (action.isArray) {\n                  value.length = 0;\n                  forEach(data, function(item) {\n                    if (typeof item === \"object\") {\n                      value.push(new Resource(item));\n                    } else {\n                      // Valid JSON values may be string literals, and these should not be converted\n                      // into objects. These items will not have access to the Resource prototype\n                      // methods, but unfortunately there\n                      value.push(item);\n                    }\n                  });\n                } else {\n                  shallowClearAndCopy(data, value);\n                  value.$promise = promise;\n                }\n              }\n\n              value.$resolved = true;\n\n              response.resource = value;\n\n              return response;\n            }, function(response) {\n              value.$resolved = true;\n\n              (error || noop)(response);\n\n              return $q.reject(response);\n            });\n\n            promise = promise.then(\n              function(response) {\n                var value = responseInterceptor(response);\n                (success || noop)(value, response.headers);\n                return value;\n              },\n              responseErrorInterceptor);\n\n            if (!isInstanceCall) {\n              // we are creating instance / collection\n              // - set the initial promise\n              // - return the instance / collection\n              value.$promise = promise;\n              value.$resolved = false;\n\n              return value;\n            }\n\n            // instance call\n            return promise;\n          };\n\n\n          Resource.prototype['$' + name] = function(params, success, error) {\n            if (isFunction(params)) {\n              error = success; success = params; params = {};\n            }\n            var result = Resource[name].call(this, params, this, success, error);\n            return result.$promise || result;\n          };\n        });\n\n        Resource.bind = function(additionalParamDefaults) {\n          return resourceFactory(url, extend({}, paramDefaults, additionalParamDefaults), actions);\n        };\n\n        return Resource;\n      }\n\n      return resourceFactory;\n    }];\n  });\n\n\n})(window, window.angular);\n","(function() {\n\n\n// Create all modules and define dependencies to make sure they exist\n// and are loaded in the correct order to satisfy dependency injection\n// before all nested files are concatenated by Grunt\n\n// Modules\nangular.module('angular-jwt',\n    [\n        'angular-jwt.interceptor',\n        'angular-jwt.jwt'\n    ]);\n\n angular.module('angular-jwt.interceptor', [])\n  .provider('jwtInterceptor', function() {\n\n    this.urlParam = null;\n    this.authHeader = 'Authorization';\n    this.authPrefix = 'Bearer ';\n    this.tokenGetter = function() {\n      return null;\n    }\n\n    var config = this;\n\n    this.$get = [\"$q\", \"$injector\", \"$rootScope\", function ($q, $injector, $rootScope) {\n      return {\n        request: function (request) {\n          if (request.skipAuthorization) {\n            return request;\n          }\n\n          if (config.urlParam) {\n            request.params = request.params || {};\n            // Already has the token in the url itself\n            if (request.params[config.urlParam]) {\n              return request;\n            }\n          } else {\n            request.headers = request.headers || {};\n            // Already has an Authorization header\n            if (request.headers[config.authHeader]) {\n              return request;\n            }\n          }\n\n          var tokenPromise = $q.when($injector.invoke(config.tokenGetter, this, {\n            config: request\n          }));\n\n          return tokenPromise.then(function(token) {\n            if (token) {\n              if (config.urlParam) {\n                request.params[config.urlParam] = token;\n              } else {\n                request.headers[config.authHeader] = config.authPrefix + token;\n              }\n            }\n            return request;\n          });\n        },\n        responseError: function (response) {\n          // handle the case where the user is not authenticated\n          if (response.status === 401) {\n            $rootScope.$broadcast('unauthenticated', response);\n          }\n          return $q.reject(response);\n        }\n      };\n    }];\n  });\n\n angular.module('angular-jwt.jwt', [])\n  .service('jwtHelper', function() {\n\n    this.urlBase64Decode = function(str) {\n      var output = str.replace(/-/g, '+').replace(/_/g, '/');\n      switch (output.length % 4) {\n        case 0: { break; }\n        case 2: { output += '=='; break; }\n        case 3: { output += '='; break; }\n        default: {\n          throw 'Illegal base64url string!';\n        }\n      }\n      return decodeURIComponent(escape(window.atob(output))); //polifyll https://github.com/davidchambers/Base64.js\n    }\n\n\n    this.decodeToken = function(token) {\n      var parts = token.split('.');\n\n      if (parts.length !== 3) {\n        throw new Error('JWT must have 3 parts');\n      }\n\n      var decoded = this.urlBase64Decode(parts[1]);\n      if (!decoded) {\n        throw new Error('Cannot decode the token');\n      }\n\n      return JSON.parse(decoded);\n    }\n\n    this.getTokenExpirationDate = function(token) {\n      var decoded;\n      decoded = this.decodeToken(token);\n\n      if(typeof decoded.exp === \"undefined\") {\n        return null;\n      }\n\n      var d = new Date(0); // The 0 here is the key, which sets the date to the epoch\n      d.setUTCSeconds(decoded.exp);\n\n      return d;\n    };\n\n    this.isTokenExpired = function(token, offsetSeconds) {\n      var d = this.getTokenExpirationDate(token);\n      offsetSeconds = offsetSeconds || 0;\n      if (d === null) {\n        return false;\n      }\n\n      // Token expired?\n      return !(d.valueOf() > (new Date().valueOf() + (offsetSeconds * 1000)));\n    };\n  });\n\n}());","/**\n * angular-slugify -- provides slugification for AngularJS\n *\n * Copyright © 2013 Paul Smith <paulsmith@pobox.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the “Software”), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\"use strict\";\n\n(function() {\n    var mod = angular.module(\"slugifier\", []);\n\n    // Unicode (non-control) characters in the Latin-1 Supplement and Latin\n    // Extended-A blocks, transliterated into ASCII characters.\n    var charmap = {\n        ' ': \" \",\n        '¡': \"!\",\n        '¢': \"c\",\n        '£': \"lb\",\n        '¥': \"yen\",\n        '¦': \"|\",\n        '§': \"SS\",\n        '¨': \"\\\"\",\n        '©': \"(c)\",\n        'ª': \"a\",\n        '«': \"<<\",\n        '¬': \"not\",\n        '­': \"-\",\n        '®': \"(R)\",\n        '°': \"^0\",\n        '±': \"+/-\",\n        '²': \"^2\",\n        '³': \"^3\",\n        '´': \"'\",\n        'µ': \"u\",\n        '¶': \"P\",\n        '·': \".\",\n        '¸': \",\",\n        '¹': \"^1\",\n        'º': \"o\",\n        '»': \">>\",\n        '¼': \" 1/4 \",\n        '½': \" 1/2 \",\n        '¾': \" 3/4 \",\n        '¿': \"?\",\n        'À': \"`A\",\n        'Á': \"'A\",\n        'Â': \"^A\",\n        'Ã': \"~A\",\n        'Ä': '\"A',\n        'Å': \"A\",\n        'Æ': \"AE\",\n        'Ç': \"C\",\n        'È': \"`E\",\n        'É': \"'E\",\n        'Ê': \"^E\",\n        'Ë': '\"E',\n        'Ì': \"`I\",\n        'Í': \"'I\",\n        'Î': \"^I\",\n        'Ï': '\"I',\n        'Ð': \"D\",\n        'Ñ': \"~N\",\n        'Ò': \"`O\",\n        'Ó': \"'O\",\n        'Ô': \"^O\",\n        'Õ': \"~O\",\n        'Ö': '\"O',\n        '×': \"x\",\n        'Ø': \"O\",\n        'Ù': \"`U\",\n        'Ú': \"'U\",\n        'Û': \"^U\",\n        'Ü': '\"U',\n        'Ý': \"'Y\",\n        'Þ': \"Th\",\n        'ß': \"ss\",\n        'à': \"`a\",\n        'á': \"'a\",\n        'â': \"^a\",\n        'ã': \"~a\",\n        'ä': '\"a',\n        'å': \"a\",\n        'æ': \"ae\",\n        'ç': \"c\",\n        'è': \"`e\",\n        'é': \"'e\",\n        'ê': \"^e\",\n        'ë': '\"e',\n        'ì': \"`i\",\n        'í': \"'i\",\n        'î': \"^i\",\n        'ï': '\"i',\n        'ð': \"d\",\n        'ñ': \"~n\",\n        'ò': \"`o\",\n        'ó': \"'o\",\n        'ô': \"^o\",\n        'õ': \"~o\",\n        'ö': '\"o',\n        '÷': \":\",\n        'ø': \"o\",\n        'ù': \"`u\",\n        'ú': \"'u\",\n        'û': \"^u\",\n        'ü': '\"u',\n        'ý': \"'y\",\n        'þ': \"th\",\n        'ÿ': '\"y',\n        'Ā': \"A\",\n        'ā': \"a\",\n        'Ă': \"A\",\n        'ă': \"a\",\n        'Ą': \"A\",\n        'ą': \"a\",\n        'Ć': \"'C\",\n        'ć': \"'c\",\n        'Ĉ': \"^C\",\n        'ĉ': \"^c\",\n        'Ċ': \"C\",\n        'ċ': \"c\",\n        'Č': \"C\",\n        'č': \"c\",\n        'Ď': \"D\",\n        'ď': \"d\",\n        'Đ': \"D\",\n        'đ': \"d\",\n        'Ē': \"E\",\n        'ē': \"e\",\n        'Ĕ': \"E\",\n        'ĕ': \"e\",\n        'Ė': \"E\",\n        'ė': \"e\",\n        'Ę': \"E\",\n        'ę': \"e\",\n        'Ě': \"E\",\n        'ě': \"e\",\n        'Ĝ': \"^G\",\n        'ĝ': \"^g\",\n        'Ğ': \"G\",\n        'ğ': \"g\",\n        'Ġ': \"G\",\n        'ġ': \"g\",\n        'Ģ': \"G\",\n        'ģ': \"g\",\n        'Ĥ': \"^H\",\n        'ĥ': \"^h\",\n        'Ħ': \"H\",\n        'ħ': \"h\",\n        'Ĩ': \"~I\",\n        'ĩ': \"~i\",\n        'Ī': \"I\",\n        'ī': \"i\",\n        'Ĭ': \"I\",\n        'ĭ': \"i\",\n        'Į': \"I\",\n        'į': \"i\",\n        'İ': \"I\",\n        'ı': \"i\",\n        'Ĳ': \"IJ\",\n        'ĳ': \"ij\",\n        'Ĵ': \"^J\",\n        'ĵ': \"^j\",\n        'Ķ': \"K\",\n        'ķ': \"k\",\n        'Ĺ': \"L\",\n        'ĺ': \"l\",\n        'Ļ': \"L\",\n        'ļ': \"l\",\n        'Ľ': \"L\",\n        'ľ': \"l\",\n        'Ŀ': \"L\",\n        'ŀ': \"l\",\n        'Ł': \"L\",\n        'ł': \"l\",\n        'Ń': \"'N\",\n        'ń': \"'n\",\n        'Ņ': \"N\",\n        'ņ': \"n\",\n        'Ň': \"N\",\n        'ň': \"n\",\n        'ŉ': \"'n\",\n        'Ō': \"O\",\n        'ō': \"o\",\n        'Ŏ': \"O\",\n        'ŏ': \"o\",\n        'Ő': '\"O',\n        'ő': '\"o',\n        'Œ': \"OE\",\n        'œ': \"oe\",\n        'Ŕ': \"'R\",\n        'ŕ': \"'r\",\n        'Ŗ': \"R\",\n        'ŗ': \"r\",\n        'Ř': \"R\",\n        'ř': \"r\",\n        'Ś': \"'S\",\n        'ś': \"'s\",\n        'Ŝ': \"^S\",\n        'ŝ': \"^s\",\n        'Ş': \"S\",\n        'ş': \"s\",\n        'Š': \"S\",\n        'š': \"s\",\n        'Ţ': \"T\",\n        'ţ': \"t\",\n        'Ť': \"T\",\n        'ť': \"t\",\n        'Ŧ': \"T\",\n        'ŧ': \"t\",\n        'Ũ': \"~U\",\n        'ũ': \"~u\",\n        'Ū': \"U\",\n        'ū': \"u\",\n        'Ŭ': \"U\",\n        'ŭ': \"u\",\n        'Ů': \"U\",\n        'ů': \"u\",\n        'Ű': '\"U',\n        'ű': '\"u',\n        'Ų': \"U\",\n        'ų': \"u\",\n        'Ŵ': \"^W\",\n        'ŵ': \"^w\",\n        'Ŷ': \"^Y\",\n        'ŷ': \"^y\",\n        'Ÿ': '\"Y',\n        'Ź': \"'Z\",\n        'ź': \"'z\",\n        'Ż': \"Z\",\n        'ż': \"z\",\n        'Ž': \"Z\",\n        'ž': \"z\",\n        'ſ': \"s\"\n    };\n\n    function _slugify(s) {\n        if (!s) return \"\";\n        var ascii = [];\n        var ch, cp;\n        for (var i = 0; i < s.length; i++) {\n            if ((cp = s.charCodeAt(i)) < 0x180) {\n                ch = String.fromCharCode(cp);\n                ascii.push(charmap[ch] || ch);\n            }\n        }\n        s = ascii.join(\"\");\n        s = s.replace(/[^\\w\\s-]/g, \"\").trim().toLowerCase();\n        return s.replace(/[-\\s]+/g, \"-\");\n    }\n\n    mod.factory(\"Slug\", function() {\n        return {\n            slugify: _slugify\n        };\n    });\n\n    mod.directive(\"slug\", [\"Slug\", function(Slug) {\n        return {\n            restrict: \"E\",\n            scope: {\n                to: \"=\",\n            },\n            transclude: true,\n            replace: true,\n            template: \"<div ng-transclude></div>\",\n            link: function(scope, elem, attrs) {\n                if (!attrs.from) {\n                    throw \"must set attribute 'from'\";\n                }\n                scope.$parent.$watch(attrs.from, function(val) {\n                    scope.to = Slug.slugify(val);\n                });\n            }\n        };\n    }]);\n\n    mod.filter(\"slugify\", function(Slug) {\n        return function(input) {\n            return Slug.slugify(input);\n        };\n    });\n})();\n","/**\n * @license MIT\n */\n(function(window, document, undefined) {'use strict';\n  // ie10+\n  var ie10plus = window.navigator.msPointerEnabled;\n  /**\n   * Flow.js is a library providing multiple simultaneous, stable and\n   * resumable uploads via the HTML5 File API.\n   * @param [opts]\n   * @param {number} [opts.chunkSize]\n   * @param {bool} [opts.forceChunkSize]\n   * @param {number} [opts.simultaneousUploads]\n   * @param {bool} [opts.singleFile]\n   * @param {string} [opts.fileParameterName]\n   * @param {number} [opts.progressCallbacksInterval]\n   * @param {number} [opts.speedSmoothingFactor]\n   * @param {Object|Function} [opts.query]\n   * @param {Object|Function} [opts.headers]\n   * @param {bool} [opts.withCredentials]\n   * @param {Function} [opts.preprocess]\n   * @param {string} [opts.method]\n   * @param {string|Function} [opts.testMethod]\n   * @param {string|Function} [opts.uploadMethod]\n   * @param {bool} [opts.prioritizeFirstAndLastChunk]\n   * @param {string|Function} [opts.target]\n   * @param {number} [opts.maxChunkRetries]\n   * @param {number} [opts.chunkRetryInterval]\n   * @param {Array.<number>} [opts.permanentErrors]\n   * @param {Array.<number>} [opts.successStatuses]\n   * @param {Function} [opts.generateUniqueIdentifier]\n   * @constructor\n   */\n  function Flow(opts) {\n    /**\n     * Supported by browser?\n     * @type {boolean}\n     */\n    this.support = (\n        typeof File !== 'undefined' &&\n        typeof Blob !== 'undefined' &&\n        typeof FileList !== 'undefined' &&\n        (\n          !!Blob.prototype.slice || !!Blob.prototype.webkitSlice || !!Blob.prototype.mozSlice ||\n          false\n        ) // slicing files support\n    );\n\n    if (!this.support) {\n      return ;\n    }\n\n    /**\n     * Check if directory upload is supported\n     * @type {boolean}\n     */\n    this.supportDirectory = /WebKit/.test(window.navigator.userAgent);\n\n    /**\n     * List of FlowFile objects\n     * @type {Array.<FlowFile>}\n     */\n    this.files = [];\n\n    /**\n     * Default options for flow.js\n     * @type {Object}\n     */\n    this.defaults = {\n      chunkSize: 1024 * 1024,\n      forceChunkSize: false,\n      simultaneousUploads: 3,\n      singleFile: false,\n      fileParameterName: 'file',\n      progressCallbacksInterval: 500,\n      speedSmoothingFactor: 0.1,\n      query: {},\n      headers: {},\n      withCredentials: false,\n      preprocess: null,\n      method: 'multipart',\n      testMethod: 'GET',\n      uploadMethod: 'POST',\n      prioritizeFirstAndLastChunk: false,\n      target: '/',\n      testChunks: true,\n      generateUniqueIdentifier: null,\n      maxChunkRetries: 0,\n      chunkRetryInterval: null,\n      permanentErrors: [404, 415, 500, 501],\n      successStatuses: [200, 201, 202],\n      onDropStopPropagation: false\n    };\n\n    /**\n     * Current options\n     * @type {Object}\n     */\n    this.opts = {};\n\n    /**\n     * List of events:\n     *  key stands for event name\n     *  value array list of callbacks\n     * @type {}\n     */\n    this.events = {};\n\n    var $ = this;\n\n    /**\n     * On drop event\n     * @function\n     * @param {MouseEvent} event\n     */\n    this.onDrop = function (event) {\n      if ($.opts.onDropStopPropagation) {\n        event.stopPropagation();\n      }\n      event.preventDefault();\n      var dataTransfer = event.dataTransfer;\n      if (dataTransfer.items && dataTransfer.items[0] &&\n        dataTransfer.items[0].webkitGetAsEntry) {\n        $.webkitReadDataTransfer(event);\n      } else {\n        $.addFiles(dataTransfer.files, event);\n      }\n    };\n\n    /**\n     * Prevent default\n     * @function\n     * @param {MouseEvent} event\n     */\n    this.preventEvent = function (event) {\n      event.preventDefault();\n    };\n\n\n    /**\n     * Current options\n     * @type {Object}\n     */\n    this.opts = Flow.extend({}, this.defaults, opts || {});\n  }\n\n  Flow.prototype = {\n    /**\n     * Set a callback for an event, possible events:\n     * fileSuccess(file), fileProgress(file), fileAdded(file, event),\n     * fileRetry(file), fileError(file, message), complete(),\n     * progress(), error(message, file), pause()\n     * @function\n     * @param {string} event\n     * @param {Function} callback\n     */\n    on: function (event, callback) {\n      event = event.toLowerCase();\n      if (!this.events.hasOwnProperty(event)) {\n        this.events[event] = [];\n      }\n      this.events[event].push(callback);\n    },\n\n    /**\n     * Remove event callback\n     * @function\n     * @param {string} [event] removes all events if not specified\n     * @param {Function} [fn] removes all callbacks of event if not specified\n     */\n    off: function (event, fn) {\n      if (event !== undefined) {\n        event = event.toLowerCase();\n        if (fn !== undefined) {\n          if (this.events.hasOwnProperty(event)) {\n            arrayRemove(this.events[event], fn);\n          }\n        } else {\n          delete this.events[event];\n        }\n      } else {\n        this.events = {};\n      }\n    },\n\n    /**\n     * Fire an event\n     * @function\n     * @param {string} event event name\n     * @param {...} args arguments of a callback\n     * @return {bool} value is false if at least one of the event handlers which handled this event\n     * returned false. Otherwise it returns true.\n     */\n    fire: function (event, args) {\n      // `arguments` is an object, not array, in FF, so:\n      args = Array.prototype.slice.call(arguments);\n      event = event.toLowerCase();\n      var preventDefault = false;\n      if (this.events.hasOwnProperty(event)) {\n        each(this.events[event], function (callback) {\n          preventDefault = callback.apply(this, args.slice(1)) === false || preventDefault;\n        }, this);\n      }\n      if (event != 'catchall') {\n        args.unshift('catchAll');\n        preventDefault = this.fire.apply(this, args) === false || preventDefault;\n      }\n      return !preventDefault;\n    },\n\n    /**\n     * Read webkit dataTransfer object\n     * @param event\n     */\n    webkitReadDataTransfer: function (event) {\n      var $ = this;\n      var queue = event.dataTransfer.items.length;\n      var files = [];\n      each(event.dataTransfer.items, function (item) {\n        var entry = item.webkitGetAsEntry();\n        if (!entry) {\n          decrement();\n          return ;\n        }\n        if (entry.isFile) {\n          // due to a bug in Chrome's File System API impl - #149735\n          fileReadSuccess(item.getAsFile(), entry.fullPath);\n        } else {\n          entry.createReader().readEntries(readSuccess, readError);\n        }\n      });\n      function readSuccess(entries) {\n        queue += entries.length;\n        each(entries, function(entry) {\n          if (entry.isFile) {\n            var fullPath = entry.fullPath;\n            entry.file(function (file) {\n              fileReadSuccess(file, fullPath);\n            }, readError);\n          } else if (entry.isDirectory) {\n            entry.createReader().readEntries(readSuccess, readError);\n          }\n        });\n        decrement();\n      }\n      function fileReadSuccess(file, fullPath) {\n        // relative path should not start with \"/\"\n        file.relativePath = fullPath.substring(1);\n        files.push(file);\n        decrement();\n      }\n      function readError(fileError) {\n        throw fileError;\n      }\n      function decrement() {\n        if (--queue == 0) {\n          $.addFiles(files, event);\n        }\n      }\n    },\n\n    /**\n     * Generate unique identifier for a file\n     * @function\n     * @param {FlowFile} file\n     * @returns {string}\n     */\n    generateUniqueIdentifier: function (file) {\n      var custom = this.opts.generateUniqueIdentifier;\n      if (typeof custom === 'function') {\n        return custom(file);\n      }\n      // Some confusion in different versions of Firefox\n      var relativePath = file.relativePath || file.webkitRelativePath || file.fileName || file.name;\n      return file.size + '-' + relativePath.replace(/[^0-9a-zA-Z_-]/img, '');\n    },\n\n    /**\n     * Upload next chunk from the queue\n     * @function\n     * @returns {boolean}\n     * @private\n     */\n    uploadNextChunk: function (preventEvents) {\n      // In some cases (such as videos) it's really handy to upload the first\n      // and last chunk of a file quickly; this let's the server check the file's\n      // metadata and determine if there's even a point in continuing.\n      var found = false;\n      if (this.opts.prioritizeFirstAndLastChunk) {\n        each(this.files, function (file) {\n          if (!file.paused && file.chunks.length &&\n            file.chunks[0].status() === 'pending' &&\n            file.chunks[0].preprocessState === 0) {\n            file.chunks[0].send();\n            found = true;\n            return false;\n          }\n          if (!file.paused && file.chunks.length > 1 &&\n            file.chunks[file.chunks.length - 1].status() === 'pending' &&\n            file.chunks[0].preprocessState === 0) {\n            file.chunks[file.chunks.length - 1].send();\n            found = true;\n            return false;\n          }\n        });\n        if (found) {\n          return found;\n        }\n      }\n\n      // Now, simply look for the next, best thing to upload\n      each(this.files, function (file) {\n        if (!file.paused) {\n          each(file.chunks, function (chunk) {\n            if (chunk.status() === 'pending' && chunk.preprocessState === 0) {\n              chunk.send();\n              found = true;\n              return false;\n            }\n          });\n        }\n        if (found) {\n          return false;\n        }\n      });\n      if (found) {\n        return true;\n      }\n\n      // The are no more outstanding chunks to upload, check is everything is done\n      var outstanding = false;\n      each(this.files, function (file) {\n        if (!file.isComplete()) {\n          outstanding = true;\n          return false;\n        }\n      });\n      if (!outstanding && !preventEvents) {\n        // All chunks have been uploaded, complete\n        async(function () {\n          this.fire('complete');\n        }, this);\n      }\n      return false;\n    },\n\n\n    /**\n     * Assign a browse action to one or more DOM nodes.\n     * @function\n     * @param {Element|Array.<Element>} domNodes\n     * @param {boolean} isDirectory Pass in true to allow directories to\n     * @param {boolean} singleFile prevent multi file upload\n     * @param {Object} attributes set custom attributes:\n     *  http://www.w3.org/TR/html-markup/input.file.html#input.file-attributes\n     *  eg: accept: 'image/*'\n     * be selected (Chrome only).\n     */\n    assignBrowse: function (domNodes, isDirectory, singleFile, attributes) {\n      if (typeof domNodes.length === 'undefined') {\n        domNodes = [domNodes];\n      }\n\n      each(domNodes, function (domNode) {\n        var input;\n        if (domNode.tagName === 'INPUT' && domNode.type === 'file') {\n          input = domNode;\n        } else {\n          input = document.createElement('input');\n          input.setAttribute('type', 'file');\n          // display:none - not working in opera 12\n          extend(input.style, {\n            visibility: 'hidden',\n            position: 'absolute'\n          });\n          // for opera 12 browser, input must be assigned to a document\n          domNode.appendChild(input);\n          // https://developer.mozilla.org/en/using_files_from_web_applications)\n          // event listener is executed two times\n          // first one - original mouse click event\n          // second - input.click(), input is inside domNode\n          domNode.addEventListener('click', function() {\n            input.click();\n          }, false);\n        }\n        if (!this.opts.singleFile && !singleFile) {\n          input.setAttribute('multiple', 'multiple');\n        }\n        if (isDirectory) {\n          input.setAttribute('webkitdirectory', 'webkitdirectory');\n        }\n        each(attributes, function (value, key) {\n          input.setAttribute(key, value);\n        });\n        // When new files are added, simply append them to the overall list\n        var $ = this;\n        input.addEventListener('change', function (e) {\n          $.addFiles(e.target.files, e);\n          e.target.value = '';\n        }, false);\n      }, this);\n    },\n\n    /**\n     * Assign one or more DOM nodes as a drop target.\n     * @function\n     * @param {Element|Array.<Element>} domNodes\n     */\n    assignDrop: function (domNodes) {\n      if (typeof domNodes.length === 'undefined') {\n        domNodes = [domNodes];\n      }\n      each(domNodes, function (domNode) {\n        domNode.addEventListener('dragover', this.preventEvent, false);\n        domNode.addEventListener('dragenter', this.preventEvent, false);\n        domNode.addEventListener('drop', this.onDrop, false);\n      }, this);\n    },\n\n    /**\n     * Un-assign drop event from DOM nodes\n     * @function\n     * @param domNodes\n     */\n    unAssignDrop: function (domNodes) {\n      if (typeof domNodes.length === 'undefined') {\n        domNodes = [domNodes];\n      }\n      each(domNodes, function (domNode) {\n        domNode.removeEventListener('dragover', this.preventEvent);\n        domNode.removeEventListener('dragenter', this.preventEvent);\n        domNode.removeEventListener('drop', this.onDrop);\n      }, this);\n    },\n\n    /**\n     * Returns a boolean indicating whether or not the instance is currently\n     * uploading anything.\n     * @function\n     * @returns {boolean}\n     */\n    isUploading: function () {\n      var uploading = false;\n      each(this.files, function (file) {\n        if (file.isUploading()) {\n          uploading = true;\n          return false;\n        }\n      });\n      return uploading;\n    },\n\n    /**\n     * should upload next chunk\n     * @function\n     * @returns {boolean|number}\n     */\n    _shouldUploadNext: function () {\n      var num = 0;\n      var should = true;\n      var simultaneousUploads = this.opts.simultaneousUploads;\n      each(this.files, function (file) {\n        each(file.chunks, function(chunk) {\n          if (chunk.status() === 'uploading') {\n            num++;\n            if (num >= simultaneousUploads) {\n              should = false;\n              return false;\n            }\n          }\n        });\n      });\n      // if should is true then return uploading chunks's length\n      return should && num;\n    },\n\n    /**\n     * Start or resume uploading.\n     * @function\n     */\n    upload: function () {\n      // Make sure we don't start too many uploads at once\n      var ret = this._shouldUploadNext();\n      if (ret === false) {\n        return;\n      }\n      // Kick off the queue\n      this.fire('uploadStart');\n      var started = false;\n      for (var num = 1; num <= this.opts.simultaneousUploads - ret; num++) {\n        started = this.uploadNextChunk(true) || started;\n      }\n      if (!started) {\n        async(function () {\n          this.fire('complete');\n        }, this);\n      }\n    },\n\n    /**\n     * Resume uploading.\n     * @function\n     */\n    resume: function () {\n      each(this.files, function (file) {\n        file.resume();\n      });\n    },\n\n    /**\n     * Pause uploading.\n     * @function\n     */\n    pause: function () {\n      each(this.files, function (file) {\n        file.pause();\n      });\n    },\n\n    /**\n     * Cancel upload of all FlowFile objects and remove them from the list.\n     * @function\n     */\n    cancel: function () {\n      for (var i = this.files.length - 1; i >= 0; i--) {\n        this.files[i].cancel();\n      }\n    },\n\n    /**\n     * Returns a number between 0 and 1 indicating the current upload progress\n     * of all files.\n     * @function\n     * @returns {number}\n     */\n    progress: function () {\n      var totalDone = 0;\n      var totalSize = 0;\n      // Resume all chunks currently being uploaded\n      each(this.files, function (file) {\n        totalDone += file.progress() * file.size;\n        totalSize += file.size;\n      });\n      return totalSize > 0 ? totalDone / totalSize : 0;\n    },\n\n    /**\n     * Add a HTML5 File object to the list of files.\n     * @function\n     * @param {File} file\n     * @param {Event} [event] event is optional\n     */\n    addFile: function (file, event) {\n      this.addFiles([file], event);\n    },\n\n    /**\n     * Add a HTML5 File object to the list of files.\n     * @function\n     * @param {FileList|Array} fileList\n     * @param {Event} [event] event is optional\n     */\n    addFiles: function (fileList, event) {\n      var files = [];\n      each(fileList, function (file) {\n        // Uploading empty file IE10/IE11 hangs indefinitely\n        // see https://connect.microsoft.com/IE/feedback/details/813443/uploading-empty-file-ie10-ie11-hangs-indefinitely\n        // Directories have size `0` and name `.`\n        // Ignore already added files\n        if ((!ie10plus || ie10plus && file.size > 0) && !(file.size % 4096 === 0 && (file.name === '.' || file.fileName === '.')) &&\n          !this.getFromUniqueIdentifier(this.generateUniqueIdentifier(file))) {\n          var f = new FlowFile(this, file);\n          if (this.fire('fileAdded', f, event)) {\n            files.push(f);\n          }\n        }\n      }, this);\n      if (this.fire('filesAdded', files, event)) {\n        each(files, function (file) {\n          if (this.opts.singleFile && this.files.length > 0) {\n            this.removeFile(this.files[0]);\n          }\n          this.files.push(file);\n        }, this);\n      }\n      this.fire('filesSubmitted', files, event);\n    },\n\n\n    /**\n     * Cancel upload of a specific FlowFile object from the list.\n     * @function\n     * @param {FlowFile} file\n     */\n    removeFile: function (file) {\n      for (var i = this.files.length - 1; i >= 0; i--) {\n        if (this.files[i] === file) {\n          this.files.splice(i, 1);\n          file.abort();\n        }\n      }\n    },\n\n    /**\n     * Look up a FlowFile object by its unique identifier.\n     * @function\n     * @param {string} uniqueIdentifier\n     * @returns {boolean|FlowFile} false if file was not found\n     */\n    getFromUniqueIdentifier: function (uniqueIdentifier) {\n      var ret = false;\n      each(this.files, function (file) {\n        if (file.uniqueIdentifier === uniqueIdentifier) {\n          ret = file;\n        }\n      });\n      return ret;\n    },\n\n    /**\n     * Returns the total size of all files in bytes.\n     * @function\n     * @returns {number}\n     */\n    getSize: function () {\n      var totalSize = 0;\n      each(this.files, function (file) {\n        totalSize += file.size;\n      });\n      return totalSize;\n    },\n\n    /**\n     * Returns the total size uploaded of all files in bytes.\n     * @function\n     * @returns {number}\n     */\n    sizeUploaded: function () {\n      var size = 0;\n      each(this.files, function (file) {\n        size += file.sizeUploaded();\n      });\n      return size;\n    },\n\n    /**\n     * Returns remaining time to upload all files in seconds. Accuracy is based on average speed.\n     * If speed is zero, time remaining will be equal to positive infinity `Number.POSITIVE_INFINITY`\n     * @function\n     * @returns {number}\n     */\n    timeRemaining: function () {\n      var sizeDelta = 0;\n      var averageSpeed = 0;\n      each(this.files, function (file) {\n        if (!file.paused && !file.error) {\n          sizeDelta += file.size - file.sizeUploaded();\n          averageSpeed += file.averageSpeed;\n        }\n      });\n      if (sizeDelta && !averageSpeed) {\n        return Number.POSITIVE_INFINITY;\n      }\n      if (!sizeDelta && !averageSpeed) {\n        return 0;\n      }\n      return Math.floor(sizeDelta / averageSpeed);\n    }\n  };\n\n\n\n\n\n\n  /**\n   * FlowFile class\n   * @name FlowFile\n   * @param {Flow} flowObj\n   * @param {File} file\n   * @constructor\n   */\n  function FlowFile(flowObj, file) {\n\n    /**\n     * Reference to parent Flow instance\n     * @type {Flow}\n     */\n    this.flowObj = flowObj;\n\n    /**\n     * Reference to file\n     * @type {File}\n     */\n    this.file = file;\n\n    /**\n     * File name. Some confusion in different versions of Firefox\n     * @type {string}\n     */\n    this.name = file.fileName || file.name;\n\n    /**\n     * File size\n     * @type {number}\n     */\n    this.size = file.size;\n\n    /**\n     * Relative file path\n     * @type {string}\n     */\n    this.relativePath = file.relativePath || file.webkitRelativePath || this.name;\n\n    /**\n     * File unique identifier\n     * @type {string}\n     */\n    this.uniqueIdentifier = flowObj.generateUniqueIdentifier(file);\n\n    /**\n     * List of chunks\n     * @type {Array.<FlowChunk>}\n     */\n    this.chunks = [];\n\n    /**\n     * Indicated if file is paused\n     * @type {boolean}\n     */\n    this.paused = false;\n\n    /**\n     * Indicated if file has encountered an error\n     * @type {boolean}\n     */\n    this.error = false;\n\n    /**\n     * Average upload speed\n     * @type {number}\n     */\n    this.averageSpeed = 0;\n\n    /**\n     * Current upload speed\n     * @type {number}\n     */\n    this.currentSpeed = 0;\n\n    /**\n     * Date then progress was called last time\n     * @type {number}\n     * @private\n     */\n    this._lastProgressCallback = Date.now();\n\n    /**\n     * Previously uploaded file size\n     * @type {number}\n     * @private\n     */\n    this._prevUploadedSize = 0;\n\n    /**\n     * Holds previous progress\n     * @type {number}\n     * @private\n     */\n    this._prevProgress = 0;\n\n    this.bootstrap();\n  }\n\n  FlowFile.prototype = {\n    /**\n     * Update speed parameters\n     * @link http://stackoverflow.com/questions/2779600/how-to-estimate-download-time-remaining-accurately\n     * @function\n     */\n    measureSpeed: function () {\n      var timeSpan = Date.now() - this._lastProgressCallback;\n      if (!timeSpan) {\n        return ;\n      }\n      var smoothingFactor = this.flowObj.opts.speedSmoothingFactor;\n      var uploaded = this.sizeUploaded();\n      // Prevent negative upload speed after file upload resume\n      this.currentSpeed = Math.max((uploaded - this._prevUploadedSize) / timeSpan * 1000, 0);\n      this.averageSpeed = smoothingFactor * this.currentSpeed + (1 - smoothingFactor) * this.averageSpeed;\n      this._prevUploadedSize = uploaded;\n    },\n\n    /**\n     * For internal usage only.\n     * Callback when something happens within the chunk.\n     * @function\n     * @param {FlowChunk} chunk\n     * @param {string} event can be 'progress', 'success', 'error' or 'retry'\n     * @param {string} [message]\n     */\n    chunkEvent: function (chunk, event, message) {\n      switch (event) {\n        case 'progress':\n          if (Date.now() - this._lastProgressCallback <\n            this.flowObj.opts.progressCallbacksInterval) {\n            break;\n          }\n          this.measureSpeed();\n          this.flowObj.fire('fileProgress', this, chunk);\n          this.flowObj.fire('progress');\n          this._lastProgressCallback = Date.now();\n          break;\n        case 'error':\n          this.error = true;\n          this.abort(true);\n          this.flowObj.fire('fileError', this, message, chunk);\n          this.flowObj.fire('error', message, this, chunk);\n          break;\n        case 'success':\n          if (this.error) {\n            return;\n          }\n          this.measureSpeed();\n          this.flowObj.fire('fileProgress', this, chunk);\n          this.flowObj.fire('progress');\n          this._lastProgressCallback = Date.now();\n          if (this.isComplete()) {\n            this.currentSpeed = 0;\n            this.averageSpeed = 0;\n            this.flowObj.fire('fileSuccess', this, message, chunk);\n          }\n          break;\n        case 'retry':\n          this.flowObj.fire('fileRetry', this, chunk);\n          break;\n      }\n    },\n\n    /**\n     * Pause file upload\n     * @function\n     */\n    pause: function() {\n      this.paused = true;\n      this.abort();\n    },\n\n    /**\n     * Resume file upload\n     * @function\n     */\n    resume: function() {\n      this.paused = false;\n      this.flowObj.upload();\n    },\n\n    /**\n     * Abort current upload\n     * @function\n     */\n    abort: function (reset) {\n      this.currentSpeed = 0;\n      this.averageSpeed = 0;\n      var chunks = this.chunks;\n      if (reset) {\n        this.chunks = [];\n      }\n      each(chunks, function (c) {\n        if (c.status() === 'uploading') {\n          c.abort();\n          this.flowObj.uploadNextChunk();\n        }\n      }, this);\n    },\n\n    /**\n     * Cancel current upload and remove from a list\n     * @function\n     */\n    cancel: function () {\n      this.flowObj.removeFile(this);\n    },\n\n    /**\n     * Retry aborted file upload\n     * @function\n     */\n    retry: function () {\n      this.bootstrap();\n      this.flowObj.upload();\n    },\n\n    /**\n     * Clear current chunks and slice file again\n     * @function\n     */\n    bootstrap: function () {\n      this.abort(true);\n      this.error = false;\n      // Rebuild stack of chunks from file\n      this._prevProgress = 0;\n      var round = this.flowObj.opts.forceChunkSize ? Math.ceil : Math.floor;\n      var chunks = Math.max(\n        round(this.file.size / this.flowObj.opts.chunkSize), 1\n      );\n      for (var offset = 0; offset < chunks; offset++) {\n        this.chunks.push(\n          new FlowChunk(this.flowObj, this, offset)\n        );\n      }\n    },\n\n    /**\n     * Get current upload progress status\n     * @function\n     * @returns {number} from 0 to 1\n     */\n    progress: function () {\n      if (this.error) {\n        return 1;\n      }\n      if (this.chunks.length === 1) {\n        this._prevProgress = Math.max(this._prevProgress, this.chunks[0].progress());\n        return this._prevProgress;\n      }\n      // Sum up progress across everything\n      var bytesLoaded = 0;\n      each(this.chunks, function (c) {\n        // get chunk progress relative to entire file\n        bytesLoaded += c.progress() * (c.endByte - c.startByte);\n      });\n      var percent = bytesLoaded / this.size;\n      // We don't want to lose percentages when an upload is paused\n      this._prevProgress = Math.max(this._prevProgress, percent > 0.9999 ? 1 : percent);\n      return this._prevProgress;\n    },\n\n    /**\n     * Indicates if file is being uploaded at the moment\n     * @function\n     * @returns {boolean}\n     */\n    isUploading: function () {\n      var uploading = false;\n      each(this.chunks, function (chunk) {\n        if (chunk.status() === 'uploading') {\n          uploading = true;\n          return false;\n        }\n      });\n      return uploading;\n    },\n\n    /**\n     * Indicates if file is has finished uploading and received a response\n     * @function\n     * @returns {boolean}\n     */\n    isComplete: function () {\n      var outstanding = false;\n      each(this.chunks, function (chunk) {\n        var status = chunk.status();\n        if (status === 'pending' || status === 'uploading' || chunk.preprocessState === 1) {\n          outstanding = true;\n          return false;\n        }\n      });\n      return !outstanding;\n    },\n\n    /**\n     * Count total size uploaded\n     * @function\n     * @returns {number}\n     */\n    sizeUploaded: function () {\n      var size = 0;\n      each(this.chunks, function (chunk) {\n        size += chunk.sizeUploaded();\n      });\n      return size;\n    },\n\n    /**\n     * Returns remaining time to finish upload file in seconds. Accuracy is based on average speed.\n     * If speed is zero, time remaining will be equal to positive infinity `Number.POSITIVE_INFINITY`\n     * @function\n     * @returns {number}\n     */\n    timeRemaining: function () {\n      if (this.paused || this.error) {\n        return 0;\n      }\n      var delta = this.size - this.sizeUploaded();\n      if (delta && !this.averageSpeed) {\n        return Number.POSITIVE_INFINITY;\n      }\n      if (!delta && !this.averageSpeed) {\n        return 0;\n      }\n      return Math.floor(delta / this.averageSpeed);\n    },\n\n    /**\n     * Get file type\n     * @function\n     * @returns {string}\n     */\n    getType: function () {\n      return this.file.type && this.file.type.split('/')[1];\n    },\n\n    /**\n     * Get file extension\n     * @function\n     * @returns {string}\n     */\n    getExtension: function () {\n      return this.name.substr((~-this.name.lastIndexOf(\".\") >>> 0) + 2).toLowerCase();\n    }\n  };\n\n\n\n\n\n\n\n\n  /**\n   * Class for storing a single chunk\n   * @name FlowChunk\n   * @param {Flow} flowObj\n   * @param {FlowFile} fileObj\n   * @param {number} offset\n   * @constructor\n   */\n  function FlowChunk(flowObj, fileObj, offset) {\n\n    /**\n     * Reference to parent flow object\n     * @type {Flow}\n     */\n    this.flowObj = flowObj;\n\n    /**\n     * Reference to parent FlowFile object\n     * @type {FlowFile}\n     */\n    this.fileObj = fileObj;\n\n    /**\n     * File size\n     * @type {number}\n     */\n    this.fileObjSize = fileObj.size;\n\n    /**\n     * File offset\n     * @type {number}\n     */\n    this.offset = offset;\n\n    /**\n     * Indicates if chunk existence was checked on the server\n     * @type {boolean}\n     */\n    this.tested = false;\n\n    /**\n     * Number of retries performed\n     * @type {number}\n     */\n    this.retries = 0;\n\n    /**\n     * Pending retry\n     * @type {boolean}\n     */\n    this.pendingRetry = false;\n\n    /**\n     * Preprocess state\n     * @type {number} 0 = unprocessed, 1 = processing, 2 = finished\n     */\n    this.preprocessState = 0;\n\n    /**\n     * Bytes transferred from total request size\n     * @type {number}\n     */\n    this.loaded = 0;\n\n    /**\n     * Total request size\n     * @type {number}\n     */\n    this.total = 0;\n\n    /**\n     * Size of a chunk\n     * @type {number}\n     */\n    var chunkSize = this.flowObj.opts.chunkSize;\n\n    /**\n     * Chunk start byte in a file\n     * @type {number}\n     */\n    this.startByte = this.offset * chunkSize;\n\n    /**\n     * Chunk end byte in a file\n     * @type {number}\n     */\n    this.endByte = Math.min(this.fileObjSize, (this.offset + 1) * chunkSize);\n\n    /**\n     * XMLHttpRequest\n     * @type {XMLHttpRequest}\n     */\n    this.xhr = null;\n\n    if (this.fileObjSize - this.endByte < chunkSize &&\n        !this.flowObj.opts.forceChunkSize) {\n      // The last chunk will be bigger than the chunk size,\n      // but less than 2*chunkSize\n      this.endByte = this.fileObjSize;\n    }\n\n    var $ = this;\n\n\n    /**\n     * Send chunk event\n     * @param event\n     * @param {...} args arguments of a callback\n     */\n    this.event = function (event, args) {\n      args = Array.prototype.slice.call(arguments);\n      args.unshift($);\n      $.fileObj.chunkEvent.apply($.fileObj, args);\n    };\n    /**\n     * Catch progress event\n     * @param {ProgressEvent} event\n     */\n    this.progressHandler = function(event) {\n      if (event.lengthComputable) {\n        $.loaded = event.loaded ;\n        $.total = event.total;\n      }\n      $.event('progress', event);\n    };\n\n    /**\n     * Catch test event\n     * @param {Event} event\n     */\n    this.testHandler = function(event) {\n      var status = $.status(true);\n      if (status === 'error') {\n        $.event(status, $.message());\n        $.flowObj.uploadNextChunk();\n      } else if (status === 'success') {\n        $.tested = true;\n        $.event(status, $.message());\n        $.flowObj.uploadNextChunk();\n      } else if (!$.fileObj.paused) {\n        // Error might be caused by file pause method\n        // Chunks does not exist on the server side\n        $.tested = true;\n        $.send();\n      }\n    };\n\n    /**\n     * Upload has stopped\n     * @param {Event} event\n     */\n    this.doneHandler = function(event) {\n      var status = $.status();\n      if (status === 'success' || status === 'error') {\n        $.event(status, $.message());\n        $.flowObj.uploadNextChunk();\n      } else {\n        $.event('retry', $.message());\n        $.pendingRetry = true;\n        $.abort();\n        $.retries++;\n        var retryInterval = $.flowObj.opts.chunkRetryInterval;\n        if (retryInterval !== null) {\n          setTimeout(function () {\n            $.send();\n          }, retryInterval);\n        } else {\n          $.send();\n        }\n      }\n    };\n  }\n\n  FlowChunk.prototype = {\n    /**\n     * Get params for a request\n     * @function\n     */\n    getParams: function () {\n      return {\n        flowChunkNumber: this.offset + 1,\n        flowChunkSize: this.flowObj.opts.chunkSize,\n        flowCurrentChunkSize: this.endByte - this.startByte,\n        flowTotalSize: this.fileObjSize,\n        flowIdentifier: this.fileObj.uniqueIdentifier,\n        flowFilename: this.fileObj.name,\n        flowRelativePath: this.fileObj.relativePath,\n        flowTotalChunks: this.fileObj.chunks.length\n      };\n    },\n\n    /**\n     * Get target option with query params\n     * @function\n     * @param params\n     * @returns {string}\n     */\n    getTarget: function(target, params){\n      if(target.indexOf('?') < 0) {\n        target += '?';\n      } else {\n        target += '&';\n      }\n      return target + params.join('&');\n    },\n\n    /**\n     * Makes a GET request without any data to see if the chunk has already\n     * been uploaded in a previous session\n     * @function\n     */\n    test: function () {\n      // Set up request and listen for event\n      this.xhr = new XMLHttpRequest();\n      this.xhr.addEventListener(\"load\", this.testHandler, false);\n      this.xhr.addEventListener(\"error\", this.testHandler, false);\n      var testMethod = evalOpts(this.flowObj.opts.testMethod, this.fileObj, this);\n      var data = this.prepareXhrRequest(testMethod, true);\n      this.xhr.send(data);\n    },\n\n    /**\n     * Finish preprocess state\n     * @function\n     */\n    preprocessFinished: function () {\n      this.preprocessState = 2;\n      this.send();\n    },\n\n    /**\n     * Uploads the actual data in a POST call\n     * @function\n     */\n    send: function () {\n      var preprocess = this.flowObj.opts.preprocess;\n      if (typeof preprocess === 'function') {\n        switch (this.preprocessState) {\n          case 0:\n            this.preprocessState = 1;\n            preprocess(this);\n            return;\n          case 1:\n            return;\n        }\n      }\n      if (this.flowObj.opts.testChunks && !this.tested) {\n        this.test();\n        return;\n      }\n\n      this.loaded = 0;\n      this.total = 0;\n      this.pendingRetry = false;\n\n      var func = (this.fileObj.file.slice ? 'slice' :\n        (this.fileObj.file.mozSlice ? 'mozSlice' :\n          (this.fileObj.file.webkitSlice ? 'webkitSlice' :\n            'slice')));\n      var bytes = this.fileObj.file[func](this.startByte, this.endByte, this.fileObj.file.type);\n\n      // Set up request and listen for event\n      this.xhr = new XMLHttpRequest();\n      this.xhr.upload.addEventListener('progress', this.progressHandler, false);\n      this.xhr.addEventListener(\"load\", this.doneHandler, false);\n      this.xhr.addEventListener(\"error\", this.doneHandler, false);\n\n      var uploadMethod = evalOpts(this.flowObj.opts.uploadMethod, this.fileObj, this);\n      var data = this.prepareXhrRequest(uploadMethod, false, this.flowObj.opts.method, bytes);\n      this.xhr.send(data);\n    },\n\n    /**\n     * Abort current xhr request\n     * @function\n     */\n    abort: function () {\n      // Abort and reset\n      var xhr = this.xhr;\n      this.xhr = null;\n      if (xhr) {\n        xhr.abort();\n      }\n    },\n\n    /**\n     * Retrieve current chunk upload status\n     * @function\n     * @returns {string} 'pending', 'uploading', 'success', 'error'\n     */\n    status: function (isTest) {\n      if (this.pendingRetry || this.preprocessState === 1) {\n        // if pending retry then that's effectively the same as actively uploading,\n        // there might just be a slight delay before the retry starts\n        return 'uploading';\n      } else if (!this.xhr) {\n        return 'pending';\n      } else if (this.xhr.readyState < 4) {\n        // Status is really 'OPENED', 'HEADERS_RECEIVED'\n        // or 'LOADING' - meaning that stuff is happening\n        return 'uploading';\n      } else {\n        if (this.flowObj.opts.successStatuses.indexOf(this.xhr.status) > -1) {\n          // HTTP 200, perfect\n\t\t      // HTTP 202 Accepted - The request has been accepted for processing, but the processing has not been completed.\n          return 'success';\n        } else if (this.flowObj.opts.permanentErrors.indexOf(this.xhr.status) > -1 ||\n            !isTest && this.retries >= this.flowObj.opts.maxChunkRetries) {\n          // HTTP 415/500/501, permanent error\n          return 'error';\n        } else {\n          // this should never happen, but we'll reset and queue a retry\n          // a likely case for this would be 503 service unavailable\n          this.abort();\n          return 'pending';\n        }\n      }\n    },\n\n    /**\n     * Get response from xhr request\n     * @function\n     * @returns {String}\n     */\n    message: function () {\n      return this.xhr ? this.xhr.responseText : '';\n    },\n\n    /**\n     * Get upload progress\n     * @function\n     * @returns {number}\n     */\n    progress: function () {\n      if (this.pendingRetry) {\n        return 0;\n      }\n      var s = this.status();\n      if (s === 'success' || s === 'error') {\n        return 1;\n      } else if (s === 'pending') {\n        return 0;\n      } else {\n        return this.total > 0 ? this.loaded / this.total : 0;\n      }\n    },\n\n    /**\n     * Count total size uploaded\n     * @function\n     * @returns {number}\n     */\n    sizeUploaded: function () {\n      var size = this.endByte - this.startByte;\n      // can't return only chunk.loaded value, because it is bigger than chunk size\n      if (this.status() !== 'success') {\n        size = this.progress() * size;\n      }\n      return size;\n    },\n\n    /**\n     * Prepare Xhr request. Set query, headers and data\n     * @param {string} method GET or POST\n     * @param {bool} isTest is this a test request\n     * @param {string} [paramsMethod] octet or form\n     * @param {Blob} [blob] to send\n     * @returns {FormData|Blob|Null} data to send\n     */\n    prepareXhrRequest: function(method, isTest, paramsMethod, blob) {\n      // Add data from the query options\n      var query = evalOpts(this.flowObj.opts.query, this.fileObj, this, isTest);\n      query = extend(this.getParams(), query);\n\n      var target = evalOpts(this.flowObj.opts.target, this.fileObj, this, isTest);\n      var data = null;\n      if (method === 'GET' || paramsMethod === 'octet') {\n        // Add data from the query options\n        var params = [];\n        each(query, function (v, k) {\n          params.push([encodeURIComponent(k), encodeURIComponent(v)].join('='));\n        });\n        target = this.getTarget(target, params);\n        data = blob || null;\n      } else {\n        // Add data from the query options\n        data = new FormData();\n        each(query, function (v, k) {\n          data.append(k, v);\n        });\n        data.append(this.flowObj.opts.fileParameterName, blob, this.fileObj.file.name);\n      }\n\n      this.xhr.open(method, target, true);\n      this.xhr.withCredentials = this.flowObj.opts.withCredentials;\n\n      // Add data from header options\n      each(evalOpts(this.flowObj.opts.headers, this.fileObj, this, isTest), function (v, k) {\n        this.xhr.setRequestHeader(k, v);\n      }, this);\n\n      return data;\n    }\n  };\n\n  /**\n   * Remove value from array\n   * @param array\n   * @param value\n   */\n  function arrayRemove(array, value) {\n    var index = array.indexOf(value);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n\n  /**\n   * If option is a function, evaluate it with given params\n   * @param {*} data\n   * @param {...} args arguments of a callback\n   * @returns {*}\n   */\n  function evalOpts(data, args) {\n    if (typeof data === \"function\") {\n      // `arguments` is an object, not array, in FF, so:\n      args = Array.prototype.slice.call(arguments);\n      data = data.apply(null, args.slice(1));\n    }\n    return data;\n  }\n  Flow.evalOpts = evalOpts;\n\n  /**\n   * Execute function asynchronously\n   * @param fn\n   * @param context\n   */\n  function async(fn, context) {\n    setTimeout(fn.bind(context), 0);\n  }\n\n  /**\n   * Extends the destination object `dst` by copying all of the properties from\n   * the `src` object(s) to `dst`. You can specify multiple `src` objects.\n   * @function\n   * @param {Object} dst Destination object.\n   * @param {...Object} src Source object(s).\n   * @returns {Object} Reference to `dst`.\n   */\n  function extend(dst, src) {\n    each(arguments, function(obj) {\n      if (obj !== dst) {\n        each(obj, function(value, key){\n          dst[key] = value;\n        });\n      }\n    });\n    return dst;\n  }\n  Flow.extend = extend;\n\n  /**\n   * Iterate each element of an object\n   * @function\n   * @param {Array|Object} obj object or an array to iterate\n   * @param {Function} callback first argument is a value and second is a key.\n   * @param {Object=} context Object to become context (`this`) for the iterator function.\n   */\n  function each(obj, callback, context) {\n    if (!obj) {\n      return ;\n    }\n    var key;\n    // Is Array?\n    if (typeof(obj.length) !== 'undefined') {\n      for (key = 0; key < obj.length; key++) {\n        if (callback.call(context, obj[key], key) === false) {\n          return ;\n        }\n      }\n    } else {\n      for (key in obj) {\n        if (obj.hasOwnProperty(key) && callback.call(context, obj[key], key) === false) {\n          return ;\n        }\n      }\n    }\n  }\n  Flow.each = each;\n\n  /**\n   * FlowFile constructor\n   * @type {FlowFile}\n   */\n  Flow.FlowFile = FlowFile;\n\n  /**\n   * FlowFile constructor\n   * @type {FlowChunk}\n   */\n  Flow.FlowChunk = FlowChunk;\n\n  /**\n   * Library version\n   * @type {string}\n   */\n  Flow.version = '2.9.0';\n\n  if ( typeof module === \"object\" && module && typeof module.exports === \"object\" ) {\n    // Expose Flow as module.exports in loaders that implement the Node\n    // module pattern (including browserify). Do not create the global, since\n    // the user will be storing it themselves locally, and globals are frowned\n    // upon in the Node module world.\n    module.exports = Flow;\n  } else {\n    // Otherwise expose Flow to the global object as usual\n    window.Flow = Flow;\n\n    // Register as a named AMD module, since Flow can be concatenated with other\n    // files that may use define, but not via a proper concatenation script that\n    // understands anonymous AMD modules. A named AMD is safest and most robust\n    // way to register. Lowercase flow is used because AMD module names are\n    // derived from file names, and Flow is normally delivered in a lowercase\n    // file name. Do this after creating the global so that if an AMD module wants\n    // to call noConflict to hide this version of Flow, it will work.\n    if ( typeof define === \"function\" && define.amd ) {\n      define( \"flow\", [], function () { return Flow; } );\n    }\n  }\n})(window, document);\n\n/**\n * @description\n * var app = angular.module('App', ['flow.provider'], function(flowFactoryProvider){\n *    flowFactoryProvider.defaults = {target: '/'};\n * });\n * @name flowFactoryProvider\n */\nangular.module('flow.provider', [])\n.provider('flowFactory', function() {\n  'use strict';\n  /**\n   * Define the default properties for flow.js\n   * @name flowFactoryProvider.defaults\n   * @type {Object}\n   */\n  this.defaults = {};\n\n  /**\n   * Flow, MaybeFlow or NotFlow\n   * @name flowFactoryProvider.factory\n   * @type {function}\n   * @return {Flow}\n   */\n  this.factory = function (options) {\n    return new Flow(options);\n  };\n\n  /**\n   * Define the default events\n   * @name flowFactoryProvider.events\n   * @type {Array}\n   * @private\n   */\n  this.events = [];\n\n  /**\n   * Add default events\n   * @name flowFactoryProvider.on\n   * @function\n   * @param {string} event\n   * @param {Function} callback\n   */\n  this.on = function (event, callback) {\n    this.events.push([event, callback]);\n  };\n\n  this.$get = function() {\n    var fn = this.factory;\n    var defaults = this.defaults;\n    var events = this.events;\n    return {\n      'create': function(opts) {\n        // combine default options with global options and options\n        var flow = fn(angular.extend({}, defaults, opts));\n        angular.forEach(events, function (event) {\n          flow.on(event[0], event[1]);\n        });\n        return flow;\n      }\n    };\n  };\n});\nangular.module('flow.init', ['flow.provider'])\n  .controller('flowCtrl', ['$scope', '$attrs', '$parse', 'flowFactory',\n  function ($scope, $attrs, $parse, flowFactory) {\n\n    var options = angular.extend({}, $scope.$eval($attrs.flowInit));\n\n    // use existing flow object or create a new one\n    var flow  = $scope.$eval($attrs.flowObject) || flowFactory.create(options);\n\n    var catchAllHandler = function(eventName){\n      var args = Array.prototype.slice.call(arguments);\n      args.shift();\n      var event = $scope.$broadcast.apply($scope, ['flow::' + eventName, flow].concat(args));\n      if ({\n        'progress':1, 'filesSubmitted':1, 'fileSuccess': 1, 'fileError': 1, 'complete': 1\n      }[eventName]) {\n        $scope.$apply();\n      }\n      if (event.defaultPrevented) {\n        return false;\n      }\n    };\n\n    flow.on('catchAll', catchAllHandler);\n    $scope.$on('$destroy', function(){\n        flow.off('catchAll', catchAllHandler);\n    });\n\n    $scope.$flow = flow;\n\n    if ($attrs.hasOwnProperty('flowName')) {\n      $parse($attrs.flowName).assign($scope, flow);\n      $scope.$on('$destroy', function () {\n        $parse($attrs.flowName).assign($scope);\n      });\n    }\n  }])\n  .directive('flowInit', [function() {\n    return {\n      scope: true,\n      controller: 'flowCtrl'\n    };\n  }]);\nangular.module('flow.btn', ['flow.init'])\n.directive('flowBtn', [function() {\n  return {\n    'restrict': 'EA',\n    'scope': false,\n    'require': '^flowInit',\n    'link': function(scope, element, attrs) {\n      var isDirectory = attrs.hasOwnProperty('flowDirectory');\n      var isSingleFile = attrs.hasOwnProperty('flowSingleFile');\n      var inputAttrs = attrs.hasOwnProperty('flowAttrs') && scope.$eval(attrs.flowAttrs);\n      scope.$flow.assignBrowse(element, isDirectory, isSingleFile, inputAttrs);\n    }\n  };\n}]);\nangular.module('flow.dragEvents', ['flow.init'])\n/**\n * @name flowPreventDrop\n * Prevent loading files then dropped on element\n */\n  .directive('flowPreventDrop', function() {\n    return {\n      'scope': false,\n      'link': function(scope, element, attrs) {\n        element.bind('drop dragover', function (event) {\n          event.preventDefault();\n        });\n      }\n    };\n  })\n/**\n * @name flowDragEnter\n * executes `flowDragEnter` and `flowDragLeave` events\n */\n  .directive('flowDragEnter', ['$timeout', function($timeout) {\n    return {\n      'scope': false,\n      'link': function(scope, element, attrs) {\n        var promise;\n        var enter = false;\n        element.bind('dragover', function (event) {\n          if (!isFileDrag(event)) {\n            return ;\n          }\n          if (!enter) {\n            scope.$apply(attrs.flowDragEnter);\n            enter = true;\n          }\n          $timeout.cancel(promise);\n          event.preventDefault();\n        });\n        element.bind('dragleave drop', function (event) {\n          $timeout.cancel(promise);\n          promise = $timeout(function () {\n            scope.$eval(attrs.flowDragLeave);\n            promise = null;\n            enter = false;\n          }, 100);\n        });\n        function isFileDrag(dragEvent) {\n          var fileDrag = false;\n          var dataTransfer = dragEvent.dataTransfer || dragEvent.originalEvent.dataTransfer;\n          angular.forEach(dataTransfer && dataTransfer.types, function(val) {\n            if (val === 'Files') {\n              fileDrag = true;\n            }\n          });\n          return fileDrag;\n        }\n      }\n    };\n  }]);\n\nangular.module('flow.drop', ['flow.init'])\n.directive('flowDrop', function() {\n  return {\n    'scope': false,\n    'require': '^flowInit',\n    'link': function(scope, element, attrs) {\n      if (attrs.flowDropEnabled) {\n        scope.$watch(attrs.flowDropEnabled, function (value) {\n          if (value) {\n            assignDrop();\n          } else {\n            unAssignDrop();\n          }\n        });\n      } else {\n        assignDrop();\n      }\n      function assignDrop() {\n        scope.$flow.assignDrop(element);\n      }\n      function unAssignDrop() {\n        scope.$flow.unAssignDrop(element);\n      }\n    }\n  };\n});\n\n!function (angular) {'use strict';\n  var module = angular.module('flow.events', ['flow.init']);\n  var events = {\n    fileSuccess: ['$file', '$message'],\n    fileProgress: ['$file'],\n    fileAdded: ['$file', '$event'],\n    filesAdded: ['$files', '$event'],\n    filesSubmitted: ['$files', '$event'],\n    fileRetry: ['$file'],\n    fileError: ['$file', '$message'],\n    uploadStart: [],\n    complete: [],\n    progress: [],\n    error: ['$message', '$file']\n  };\n\n  angular.forEach(events, function (eventArgs, eventName) {\n    var name = 'flow' + capitaliseFirstLetter(eventName);\n    if (name == 'flowUploadStart') {\n      name = 'flowUploadStarted';// event alias\n    }\n    module.directive(name, [function() {\n      return {\n        require: '^flowInit',\n        controller: ['$scope', '$attrs', function ($scope, $attrs) {\n          $scope.$on('flow::' + eventName, function () {\n            var funcArgs = Array.prototype.slice.call(arguments);\n            var event = funcArgs.shift();// remove angular event\n            // remove flow object and ignore event if it is from parent directive\n            if ($scope.$flow !== funcArgs.shift()) {\n              return ;\n            }\n            var args = {};\n            angular.forEach(eventArgs, function(value, key) {\n              args[value] = funcArgs[key];\n            });\n            if ($scope.$eval($attrs[name], args) === false) {\n              event.preventDefault();\n            }\n          });\n        }]\n      };\n    }]);\n  });\n\n  function capitaliseFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n}(angular);\nangular.module('flow.img', ['flow.init'])\n.directive('flowImg', [function() {\n  return {\n    'scope': false,\n    'require': '^flowInit',\n    'link': function(scope, element, attrs) {\n      var file = attrs.flowImg;\n      scope.$watch(file, function (file) {\n        if (!file) {\n          return ;\n        }\n        var fileReader = new FileReader();\n        fileReader.readAsDataURL(file.file);\n        fileReader.onload = function (event) {\n          scope.$apply(function () {\n            attrs.$set('src', event.target.result);\n          });\n        };\n      });\n    }\n  };\n}]);\nangular.module('flow.transfers', ['flow.init'])\n.directive('flowTransfers', [function() {\n  return {\n    'scope': true,\n    'require': '^flowInit',\n    'link': function(scope) {\n      scope.transfers = scope.$flow.files;\n    }\n  };\n}]);\nangular.module('flow', ['flow.provider', 'flow.init', 'flow.events', 'flow.btn',\n  'flow.drop', 'flow.transfers', 'flow.img', 'flow.dragEvents']);","//\n// Copyright Kamil Pękala http://github.com/kamilkp\n// angular-sortable-view v0.0.13 2015/01/13\n//\n\n;(function(window, angular){\n\t'use strict';\n\t/* jshint eqnull:true */\n\t/* jshint -W041 */\n\t/* jshint -W030 */\n\n\tvar module = angular.module('angular-sortable-view', []);\n\tmodule.directive('svRoot', [function(){\n\t\tfunction shouldBeAfter(elem, pointer, isGrid){\n\t\t\treturn isGrid ? elem.x - pointer.x < 0 : elem.y - pointer.y < 0;\n\t\t}\n\t\tfunction getSortableElements(key){\n\t\t\treturn ROOTS_MAP[key];\n\t\t}\n\t\tfunction removeSortableElements(key){\n\t\t\tdelete ROOTS_MAP[key];\n\t\t}\n\n\t\tvar sortingInProgress;\n\t\tvar ROOTS_MAP = Object.create(null);\n\t\t// window.ROOTS_MAP = ROOTS_MAP; // for debug purposes\n\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tcontroller: ['$scope', '$attrs', '$interpolate', '$parse', function($scope, $attrs, $interpolate, $parse){\n\t\t\t\tvar mapKey = $interpolate($attrs.svRoot)($scope) || $scope.$id;\n\t\t\t\tif(!ROOTS_MAP[mapKey]) ROOTS_MAP[mapKey] = [];\n\n\t\t\t\tvar that         = this;\n\t\t\t\tvar candidates;  // set of possible destinations\n\t\t\t\tvar $placeholder;// placeholder element\n\t\t\t\tvar options;     // sortable options\n\t\t\t\tvar $helper;     // helper element - the one thats being dragged around with the mouse pointer\n\t\t\t\tvar $original;   // original element\n\t\t\t\tvar $target;     // last best candidate\n\t\t\t\tvar isGrid       = false;\n\t\t\t\tvar onSort       = $parse($attrs.svOnSort);\n\n\t\t\t\t// ----- hack due to https://github.com/angular/angular.js/issues/8044\n\t\t\t\t$attrs.svOnStart = $attrs.$$element[0].attributes['sv-on-start'];\n\t\t\t\t$attrs.svOnStart = $attrs.svOnStart && $attrs.svOnStart.value;\n\n\t\t\t\t$attrs.svOnStop = $attrs.$$element[0].attributes['sv-on-stop'];\n\t\t\t\t$attrs.svOnStop = $attrs.svOnStop && $attrs.svOnStop.value;\n\t\t\t\t// -------------------------------------------------------------------\n\n\t\t\t\tvar onStart = $parse($attrs.svOnStart);\n\t\t\t\tvar onStop = $parse($attrs.svOnStop);\n\n\t\t\t\tthis.sortingInProgress = function(){\n\t\t\t\t\treturn sortingInProgress;\n\t\t\t\t};\n\n\t\t\t\tif($attrs.svGrid){ // sv-grid determined explicite\n\t\t\t\t\tisGrid = $attrs.svGrid === \"true\" ? true : $attrs.svGrid === \"false\" ? false : null;\n\t\t\t\t\tif(isGrid === null)\n\t\t\t\t\t\tthrow 'Invalid value of sv-grid attribute';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// check if at least one of the lists have a grid like layout\n\t\t\t\t\t$scope.$watchCollection(function(){\n\t\t\t\t\t\treturn getSortableElements(mapKey);\n\t\t\t\t\t}, function(collection){\n\t\t\t\t\t\tisGrid = false;\n\t\t\t\t\t\tvar array = collection.filter(function(item){\n\t\t\t\t\t\t\treturn !item.container;\n\t\t\t\t\t\t}).map(function(item){\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tpart: item.getPart().id,\n\t\t\t\t\t\t\t\ty: item.element[0].getBoundingClientRect().top\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar dict = Object.create(null);\n\t\t\t\t\t\tarray.forEach(function(item){\n\t\t\t\t\t\t\tif(dict[item.part])\n\t\t\t\t\t\t\t\tdict[item.part].push(item.y);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdict[item.part] = [item.y];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tObject.keys(dict).forEach(function(key){\n\t\t\t\t\t\t\tdict[key].sort();\n\t\t\t\t\t\t\tdict[key].forEach(function(item, index){\n\t\t\t\t\t\t\t\tif(index < dict[key].length - 1){\n\t\t\t\t\t\t\t\t\tif(item > 0 && item === dict[key][index + 1]){\n\t\t\t\t\t\t\t\t\t\tisGrid = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.$moveUpdate = function(opts, mouse, svElement, svOriginal, svPlaceholder, originatingPart, originatingIndex){\n\t\t\t\t\tvar svRect = svElement[0].getBoundingClientRect();\n\t\t\t\t\tif(opts.tolerance === 'element')\n\t\t\t\t\t\tmouse = {\n\t\t\t\t\t\t\tx: ~~(svRect.left + svRect.width/2),\n\t\t\t\t\t\t\ty: ~~(svRect.top + svRect.height/2)\n\t\t\t\t\t\t};\n\n\t\t\t\t\tsortingInProgress = true;\n\t\t\t\t\tcandidates = [];\n\t\t\t\t\tif(!$placeholder){\n\t\t\t\t\t\tif(svPlaceholder){ // custom placeholder\n\t\t\t\t\t\t\t$placeholder = svPlaceholder.clone();\n\t\t\t\t\t\t\t$placeholder.removeClass('ng-hide');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{ // default placeholder\n\t\t\t\t\t\t\t$placeholder = svOriginal.clone();\n\t\t\t\t\t\t\t$placeholder.addClass('sv-visibility-hidden');\n\t\t\t\t\t\t\t$placeholder.addClass('sv-placeholder');\n\t\t\t\t\t\t\t$placeholder.css({\n\t\t\t\t\t\t\t\t'height': svRect.height + 'px',\n\t\t\t\t\t\t\t\t'width': svRect.width + 'px'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsvOriginal.after($placeholder);\n\t\t\t\t\t\tsvOriginal.addClass('ng-hide');\n\n\t\t\t\t\t\t// cache options, helper and original element reference\n\t\t\t\t\t\t$original = svOriginal;\n\t\t\t\t\t\toptions = opts;\n\t\t\t\t\t\t$helper = svElement;\n\n\t\t\t\t\t\tonStart($scope, {\n\t\t\t\t\t\t\t$helper: $helper,\n\t\t\t\t\t\t\t$part: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t$index: originatingIndex,\n\t\t\t\t\t\t\t$item: originatingPart.model(originatingPart.scope)[originatingIndex]\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$scope.$root && $scope.$root.$$phase || $scope.$apply();\n\t\t\t\t\t}\n\n\t\t\t\t\t// ----- move the element\n\t\t\t\t\t$helper[0].reposition({\n\t\t\t\t\t\tx: mouse.x + document.body.scrollLeft - mouse.offset.x*svRect.width,\n\t\t\t\t\t\ty: mouse.y + document.body.scrollTop - mouse.offset.y*svRect.height\n\t\t\t\t\t});\n\n\t\t\t\t\t// ----- manage candidates\n\t\t\t\t\tgetSortableElements(mapKey).forEach(function(se, index){\n\t\t\t\t\t\tif(opts.containment != null){\n\t\t\t\t\t\t\t// TODO: optimize this since it could be calculated only once when the moving begins\n\t\t\t\t\t\t\tif(\n\t\t\t\t\t\t\t\t!elementMatchesSelector(se.element, opts.containment) &&\n\t\t\t\t\t\t\t\t!elementMatchesSelector(se.element, opts.containment + ' *')\n\t\t\t\t\t\t\t) return; // element is not within allowed containment\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar rect = se.element[0].getBoundingClientRect();\n\t\t\t\t\t\tvar center = {\n\t\t\t\t\t\t\tx: ~~(rect.left + rect.width/2),\n\t\t\t\t\t\t\ty: ~~(rect.top + rect.height/2)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(!se.container && // not the container element\n\t\t\t\t\t\t\t(se.element[0].scrollHeight || se.element[0].scrollWidth)){ // element is visible\n\t\t\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\t\t\telement: se.element,\n\t\t\t\t\t\t\t\tq: (center.x - mouse.x)*(center.x - mouse.x) + (center.y - mouse.y)*(center.y - mouse.y),\n\t\t\t\t\t\t\t\tview: se.getPart(),\n\t\t\t\t\t\t\t\ttargetIndex: se.getIndex(),\n\t\t\t\t\t\t\t\tafter: shouldBeAfter(center, mouse, isGrid)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(se.container && !se.element[0].querySelector('[sv-element]:not(.sv-placeholder):not(.sv-source)')){ // empty container\n\t\t\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\t\t\telement: se.element,\n\t\t\t\t\t\t\t\tq: (center.x - mouse.x)*(center.x - mouse.x) + (center.y - mouse.y)*(center.y - mouse.y),\n\t\t\t\t\t\t\t\tview: se.getPart(),\n\t\t\t\t\t\t\t\ttargetIndex: 0,\n\t\t\t\t\t\t\t\tcontainer: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar pRect = $placeholder[0].getBoundingClientRect();\n\t\t\t\t\tvar pCenter = {\n\t\t\t\t\t\tx: ~~(pRect.left + pRect.width/2),\n\t\t\t\t\t\ty: ~~(pRect.top + pRect.height/2)\n\t\t\t\t\t};\n\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\tq: (pCenter.x - mouse.x)*(pCenter.x - mouse.x) + (pCenter.y - mouse.y)*(pCenter.y - mouse.y),\n\t\t\t\t\t\telement: $placeholder,\n\t\t\t\t\t\tplaceholder: true\n\t\t\t\t\t});\n\t\t\t\t\tcandidates.sort(function(a, b){\n\t\t\t\t\t\treturn a.q - b.q;\n\t\t\t\t\t});\n\n\t\t\t\t\tcandidates.forEach(function(cand, index){\n\t\t\t\t\t\tif(index === 0 && !cand.placeholder && !cand.container){\n\t\t\t\t\t\t\t$target = cand;\n\t\t\t\t\t\t\tcand.element.addClass('sv-candidate');\n\t\t\t\t\t\t\tif(cand.after)\n\t\t\t\t\t\t\t\tcand.element.after($placeholder);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tinsertElementBefore(cand.element, $placeholder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(index === 0 && cand.container){\n\t\t\t\t\t\t\t$target = cand;\n\t\t\t\t\t\t\tcand.element.append($placeholder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcand.element.removeClass('sv-candidate');\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tthis.$drop = function(originatingPart, index, options){\n\t\t\t\t\tif(!$placeholder) return;\n\n\t\t\t\t\tif(options.revert){\n\t\t\t\t\t\tvar placeholderRect = $placeholder[0].getBoundingClientRect();\n\t\t\t\t\t\tvar helperRect = $helper[0].getBoundingClientRect();\n\t\t\t\t\t\tvar distance = Math.sqrt(\n\t\t\t\t\t\t\tMath.pow(helperRect.top - placeholderRect.top, 2) +\n\t\t\t\t\t\t\tMath.pow(helperRect.left - placeholderRect.left, 2)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar duration = +options.revert*distance/200; // constant speed: duration depends on distance\n\t\t\t\t\t\tduration = Math.min(duration, +options.revert); // however it's not longer that options.revert\n\n\t\t\t\t\t\t['-webkit-', '-moz-', '-ms-', '-o-', ''].forEach(function(prefix){\n\t\t\t\t\t\t\tif(typeof $helper[0].style[prefix + 'transition'] !== \"undefined\")\n\t\t\t\t\t\t\t\t$helper[0].style[prefix + 'transition'] = 'all ' + duration + 'ms ease';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(afterRevert, duration);\n\t\t\t\t\t\t$helper.css({\n\t\t\t\t\t\t\t'top': placeholderRect.top + document.body.scrollTop + 'px',\n\t\t\t\t\t\t\t'left': placeholderRect.left + document.body.scrollLeft + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tafterRevert();\n\n\t\t\t\t\tfunction afterRevert(){\n\t\t\t\t\t\tsortingInProgress = false;\n\t\t\t\t\t\t$placeholder.remove();\n\t\t\t\t\t\t$helper.remove();\n\t\t\t\t\t\t$original.removeClass('ng-hide');\n\n\t\t\t\t\t\tcandidates = void 0;\n\t\t\t\t\t\t$placeholder = void 0;\n\t\t\t\t\t\toptions = void 0;\n\t\t\t\t\t\t$helper = void 0;\n\t\t\t\t\t\t$original = void 0;\n\n\t\t\t\t\t\t// sv-on-stop callback\n\t\t\t\t\t\tonStop($scope, {\n\t\t\t\t\t\t\t$part: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t$index: index,\n\t\t\t\t\t\t\t$item: originatingPart.model(originatingPart.scope)[index]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif($target){\n\t\t\t\t\t\t\t$target.element.removeClass('sv-candidate');\n\t\t\t\t\t\t\tvar spliced = originatingPart.model(originatingPart.scope).splice(index, 1);\n\t\t\t\t\t\t\tvar targetIndex = $target.targetIndex;\n\t\t\t\t\t\t\tif($target.view === originatingPart && $target.targetIndex > index)\n\t\t\t\t\t\t\t\ttargetIndex--;\n\t\t\t\t\t\t\tif($target.after)\n\t\t\t\t\t\t\t\ttargetIndex++;\n\t\t\t\t\t\t\t$target.view.model($target.view.scope).splice(targetIndex, 0, spliced[0]);\n\n\t\t\t\t\t\t\t// sv-on-sort callback\n\t\t\t\t\t\t\tif($target.view !== originatingPart || index !== targetIndex)\n\t\t\t\t\t\t\t\tonSort($scope, {\n\t\t\t\t\t\t\t\t\t$partTo: $target.view.model($target.view.scope),\n\t\t\t\t\t\t\t\t\t$partFrom: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t\t\t$item: spliced[0],\n\t\t\t\t\t\t\t\t\t$indexTo: targetIndex,\n\t\t\t\t\t\t\t\t\t$indexFrom: index\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$target = void 0;\n\n\t\t\t\t\t\t$scope.$root && $scope.$root.$$phase || $scope.$apply();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.addToSortableElements = function(se){\n\t\t\t\t\tgetSortableElements(mapKey).push(se);\n\t\t\t\t};\n\t\t\t\tthis.removeFromSortableElements = function(se){\n\t\t\t\t\tvar elems = getSortableElements(mapKey);\n\t\t\t\t\tvar index = elems.indexOf(se);\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\telems.splice(index, 1);\n\t\t\t\t\t\tif(elems.length === 0)\n\t\t\t\t\t\t\tremoveSortableElements(mapKey);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}]\n\t\t};\n\t}]);\n\n\tmodule.directive('svPart', ['$parse', function($parse){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\trequire: '^svRoot',\n\t\t\tcontroller: ['$scope', function($scope){\n\t\t\t\t$scope.$ctrl = this;\n\t\t\t\tthis.getPart = function(){\n\t\t\t\t\treturn $scope.part;\n\t\t\t\t};\n\t\t\t\tthis.$drop = function(index, options){\n\t\t\t\t\t$scope.$sortableRoot.$drop($scope.part, index, options);\n\t\t\t\t};\n\t\t\t}],\n\t\t\tscope: true,\n\t\t\tlink: function($scope, $element, $attrs, $sortable){\n\t\t\t\tif(!$attrs.svPart) throw new Error('no model provided');\n\t\t\t\tvar model = $parse($attrs.svPart);\n\t\t\t\tif(!model.assign) throw new Error('model not assignable');\n\n\t\t\t\t$scope.part = {\n\t\t\t\t\tid: $scope.$id,\n\t\t\t\t\telement: $element,\n\t\t\t\t\tmodel: model,\n\t\t\t\t\tscope: $scope\n\t\t\t\t};\n\t\t\t\t$scope.$sortableRoot = $sortable;\n\n\t\t\t\tvar sortablePart = {\n\t\t\t\t\telement: $element,\n\t\t\t\t\tgetPart: $scope.$ctrl.getPart,\n\t\t\t\t\tcontainer: true\n\t\t\t\t};\n\t\t\t\t$sortable.addToSortableElements(sortablePart);\n\t\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\t\t$sortable.removeFromSortableElements(sortablePart);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}]);\n\n\tmodule.directive('svElement', ['$parse', function($parse){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\trequire: ['^svPart', '^svRoot'],\n\t\t\tcontroller: ['$scope', function($scope){\n\t\t\t\t$scope.$ctrl = this;\n\t\t\t}],\n\t\t\tlink: function($scope, $element, $attrs, $controllers){\n\t\t\t\tvar sortableElement = {\n\t\t\t\t\telement: $element,\n\t\t\t\t\tgetPart: $controllers[0].getPart,\n\t\t\t\t\tgetIndex: function(){\n\t\t\t\t\t\treturn $scope.$index;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t$controllers[1].addToSortableElements(sortableElement);\n\t\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\t\t$controllers[1].removeFromSortableElements(sortableElement);\n\t\t\t\t});\n\n\t\t\t\tvar handle = $element;\n\t\t\t\thandle.on('mousedown touchstart', onMousedown);\n\t\t\t\t$scope.$watch('$ctrl.handle', function(customHandle){\n\t\t\t\t\tif(customHandle){\n\t\t\t\t\t\thandle.off('mousedown touchstart', onMousedown);\n\t\t\t\t\t\thandle = customHandle;\n\t\t\t\t\t\thandle.on('mousedown touchstart', onMousedown);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar helper;\n\t\t\t\t$scope.$watch('$ctrl.helper', function(customHelper){\n\t\t\t\t\tif(customHelper){\n\t\t\t\t\t\thelper = customHelper;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar placeholder;\n\t\t\t\t$scope.$watch('$ctrl.placeholder', function(customPlaceholder){\n\t\t\t\t\tif(customPlaceholder){\n\t\t\t\t\t\tplaceholder = customPlaceholder;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar body = angular.element(document.body);\n\t\t\t\tvar html = angular.element(document.documentElement);\n\n\t\t\t\tvar moveExecuted;\n\n\t\t\t\tfunction onMousedown(e){\n\t\t\t\t\ttouchFix(e);\n\n\t\t\t\t\tif($controllers[1].sortingInProgress()) return;\n\t\t\t\t\tif(e.button != 0 && e.type === 'mousedown') return;\n\n\t\t\t\t\tmoveExecuted = false;\n\t\t\t\t\tvar opts = $parse($attrs.svElement)($scope);\n\t\t\t\t\topts = angular.extend({}, {\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\trevert: 200,\n\t\t\t\t\t\tcontainment: 'html'\n\t\t\t\t\t}, opts);\n\t\t\t\t\tif(opts.containment){\n\t\t\t\t\t\tvar containmentRect = closestElement.call($element, opts.containment)[0].getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar target = $element;\n\t\t\t\t\tvar clientRect = $element[0].getBoundingClientRect();\n\t\t\t\t\tvar clone;\n\n\t\t\t\t\tif(!helper) helper = $controllers[0].helper;\n\t\t\t\t\tif(!placeholder) placeholder = $controllers[0].placeholder;\n\t\t\t\t\tif(helper){\n\t\t\t\t\t\tclone = helper.clone();\n\t\t\t\t\t\tclone.removeClass('ng-hide');\n\t\t\t\t\t\tclone.css({\n\t\t\t\t\t\t\t'left': clientRect.left + document.body.scrollLeft + 'px',\n\t\t\t\t\t\t\t'top': clientRect.top + document.body.scrollTop + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttarget.addClass('sv-visibility-hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tclone = target.clone();\n\t\t\t\t\t\tclone.addClass('sv-helper').css({\n\t\t\t\t\t\t\t'left': clientRect.left + document.body.scrollLeft + 'px',\n\t\t\t\t\t\t\t'top': clientRect.top + document.body.scrollTop + 'px',\n\t\t\t\t\t\t\t'width': clientRect.width + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tclone[0].reposition = function(coords){\n\t\t\t\t\t\tvar targetLeft = coords.x;\n\t\t\t\t\t\tvar targetTop = coords.y;\n\t\t\t\t\t\tvar helperRect = clone[0].getBoundingClientRect();\n\n\t\t\t\t\t\tvar body = document.body;\n\n\t\t\t\t\t\tif(containmentRect){\n\t\t\t\t\t\t\tif(targetTop < containmentRect.top + body.scrollTop) // top boundary\n\t\t\t\t\t\t\t\ttargetTop = containmentRect.top + body.scrollTop;\n\t\t\t\t\t\t\tif(targetTop + helperRect.height > containmentRect.top + body.scrollTop + containmentRect.height) // bottom boundary\n\t\t\t\t\t\t\t\ttargetTop = containmentRect.top + body.scrollTop + containmentRect.height - helperRect.height;\n\t\t\t\t\t\t\tif(targetLeft < containmentRect.left + body.scrollLeft) // left boundary\n\t\t\t\t\t\t\t\ttargetLeft = containmentRect.left + body.scrollLeft;\n\t\t\t\t\t\t\tif(targetLeft + helperRect.width > containmentRect.left + body.scrollLeft + containmentRect.width) // right boundary\n\t\t\t\t\t\t\t\ttargetLeft = containmentRect.left + body.scrollLeft + containmentRect.width - helperRect.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.style.left = targetLeft - body.scrollLeft + 'px';\n\t\t\t\t\t\tthis.style.top = targetTop - body.scrollTop + 'px';\n\t\t\t\t\t};\n\n\t\t\t\t\tvar pointerOffset = {\n\t\t\t\t\t\tx: (e.clientX - clientRect.left)/clientRect.width,\n\t\t\t\t\t\ty: (e.clientY - clientRect.top)/clientRect.height\n\t\t\t\t\t};\n\t\t\t\t\thtml.addClass('sv-sorting-in-progress');\n\t\t\t\t\thtml.on('mousemove touchmove', onMousemove).on('mouseup touchend touchcancel', function mouseup(e){\n\t\t\t\t\t\thtml.off('mousemove touchmove', onMousemove);\n\t\t\t\t\t\thtml.off('mouseup touchend', mouseup);\n\t\t\t\t\t\thtml.removeClass('sv-sorting-in-progress');\n\t\t\t\t\t\tif(moveExecuted)\n\t\t\t\t\t\t\t$controllers[0].$drop($scope.$index, opts);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t$element.removeClass('sv-visibility-hidden');\n\t\t\t\t\t});\n\n\t\t\t\t\t// onMousemove(e);\n\t\t\t\t\tfunction onMousemove(e){\n\t\t\t\t\t\ttouchFix(e);\n\t\t\t\t\t\tif(!moveExecuted){\n\t\t\t\t\t\t\t$element.parent().prepend(clone);\n\t\t\t\t\t\t\tmoveExecuted = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$controllers[1].$moveUpdate(opts, {\n\t\t\t\t\t\t\tx: e.clientX,\n\t\t\t\t\t\t\ty: e.clientY,\n\t\t\t\t\t\t\toffset: pointerOffset\n\t\t\t\t\t\t}, clone, $element, placeholder, $controllers[0].getPart(), $scope.$index);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}]);\n\n\tmodule.directive('svHandle', function(){\n\t\treturn {\n\t\t\trequire: '?^svElement',\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\tif($ctrl)\n\t\t\t\t\t$ctrl.handle = $element.add($ctrl.handle); // support multiple handles\n\t\t\t}\n\t\t};\n\t});\n\n\tmodule.directive('svHelper', function(){\n\t\treturn {\n\t\t\trequire: ['?^svPart', '?^svElement'],\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\t$element.addClass('sv-helper').addClass('ng-hide');\n\t\t\t\tif($ctrl[1])\n\t\t\t\t\t$ctrl[1].helper = $element;\n\t\t\t\telse if($ctrl[0])\n\t\t\t\t\t$ctrl[0].helper = $element;\n\t\t\t}\n\t\t};\n\t});\n\n\tmodule.directive('svPlaceholder', function(){\n\t\treturn {\n\t\t\trequire: ['?^svPart', '?^svElement'],\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\t$element.addClass('sv-placeholder').addClass('ng-hide');\n\t\t\t\tif($ctrl[1])\n\t\t\t\t\t$ctrl[1].placeholder = $element;\n\t\t\t\telse if($ctrl[0])\n\t\t\t\t\t$ctrl[0].placeholder = $element;\n\t\t\t}\n\t\t};\n\t});\n\n\tangular.element(document.head).append([\n\t\t'<style>' +\n\t\t'.sv-helper{' +\n\t\t\t'position: fixed !important;' +\n\t\t\t'z-index: 99999;' +\n\t\t\t'margin: 0 !important;' +\n\t\t'}' +\n\t\t'.sv-candidate{' +\n\t\t'}' +\n\t\t'.sv-placeholder{' +\n\t\t\t// 'opacity: 0;' +\n\t\t'}' +\n\t\t'.sv-sorting-in-progress{' +\n\t\t\t'-webkit-user-select: none;' +\n\t\t\t'-moz-user-select: none;' +\n\t\t\t'-ms-user-select: none;' +\n\t\t\t'user-select: none;' +\n\t\t'}' +\n\t\t'.sv-visibility-hidden{' +\n\t\t\t'visibility: hidden !important;' +\n\t\t\t'opacity: 0 !important;' +\n\t\t'}' +\n\t\t'</style>'\n\t].join(''));\n\n\tfunction touchFix(e){\n\t\tif(!('clientX' in e) && !('clientY' in e)) {\n\t\t\tvar touches = e.touches || e.originalEvent.touches;\n\t\t\tif(touches && touches.length) {\n\t\t\t\te.clientX = touches[0].clientX;\n\t\t\t\te.clientY = touches[0].clientY;\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\tfunction getPreviousSibling(element){\n\t\telement = element[0];\n\t\tif(element.previousElementSibling)\n\t\t\treturn angular.element(element.previousElementSibling);\n\t\telse{\n\t\t\tvar sib = element.previousSibling;\n\t\t\twhile(sib != null && sib.nodeType != 1)\n\t\t\t\tsib = sib.previousSibling;\n\t\t\treturn angular.element(sib);\n\t\t}\n\t}\n\n\tfunction insertElementBefore(element, newElement){\n\t\tvar prevSibl = getPreviousSibling(element);\n\t\tif(prevSibl.length > 0){\n\t\t\tprevSibl.after(newElement);\n\t\t}\n\t\telse{\n\t\t\telement.parent().prepend(newElement);\n\t\t}\n\t}\n\n\tvar dde = document.documentElement,\n\tmatchingFunction = dde.matches ? 'matches' :\n\t\t\t\t\t\tdde.matchesSelector ? 'matchesSelector' :\n\t\t\t\t\t\tdde.webkitMatches ? 'webkitMatches' :\n\t\t\t\t\t\tdde.webkitMatchesSelector ? 'webkitMatchesSelector' :\n\t\t\t\t\t\tdde.msMatches ? 'msMatches' :\n\t\t\t\t\t\tdde.msMatchesSelector ? 'msMatchesSelector' :\n\t\t\t\t\t\tdde.mozMatches ? 'mozMatches' :\n\t\t\t\t\t\tdde.mozMatchesSelector ? 'mozMatchesSelector' : null;\n\tif(matchingFunction == null)\n\t\tthrow 'This browser doesn\\'t support the HTMLElement.matches method';\n\n\tfunction elementMatchesSelector(element, selector){\n\t\tif(element instanceof angular.element) element = element[0];\n\t\tif(matchingFunction !== null)\n\t\t\treturn element[matchingFunction](selector);\n\t}\n\n\tvar closestElement = angular.element.prototype.closest || function (selector){\n\t\tvar el = this[0].parentNode;\n\t\twhile(el !== document.documentElement && !el[matchingFunction](selector))\n\t\t\tel = el.parentNode;\n\n\t\tif(el[matchingFunction](selector))\n\t\t\treturn angular.element(el);\n\t\telse\n\t\t\treturn angular.element();\n\t};\n\n\t/*\n\t\tSimple implementation of jQuery's .add method\n\t */\n\tif(typeof angular.element.prototype.add !== 'function'){\n\t\tangular.element.prototype.add = function(elem){\n\t\t\tvar i, res = angular.element();\n\t\t\telem = angular.element(elem);\n\t\t\tfor(i=0;i<this.length;i++){\n\t\t\t\tres.push(this[i]);\n\t\t\t}\n\t\t\tfor(i=0;i<elem.length;i++){\n\t\t\t\tres.push(elem[i]);\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\t}\n\n})(window, window.angular);"],"sourceRoot":"/source/"}